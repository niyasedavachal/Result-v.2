function mh(t,e){for(var r=0;r<e.length;r++){const s=e[r];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in t)){const a=Object.getOwnPropertyDescriptor(s,n);a&&Object.defineProperty(t,n,a.get?a:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();var ls=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ph(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Xn(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var n=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(r,s,n.get?n:{enumerable:!0,get:function(){return t[s]}})}),r}var gh={exports:{}},Li={},xh={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yn=Symbol.for("react.element"),S0=Symbol.for("react.portal"),N0=Symbol.for("react.fragment"),j0=Symbol.for("react.strict_mode"),T0=Symbol.for("react.profiler"),C0=Symbol.for("react.provider"),R0=Symbol.for("react.context"),P0=Symbol.for("react.forward_ref"),A0=Symbol.for("react.suspense"),O0=Symbol.for("react.memo"),I0=Symbol.for("react.lazy"),_u=Symbol.iterator;function L0(t){return t===null||typeof t!="object"?null:(t=_u&&t[_u]||t["@@iterator"],typeof t=="function"?t:null)}var vh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yh=Object.assign,wh={};function Gs(t,e,r){this.props=t,this.context=e,this.refs=wh,this.updater=r||vh}Gs.prototype.isReactComponent={};Gs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function bh(){}bh.prototype=Gs.prototype;function oc(t,e,r){this.props=t,this.context=e,this.refs=wh,this.updater=r||vh}var cc=oc.prototype=new bh;cc.constructor=oc;yh(cc,Gs.prototype);cc.isPureReactComponent=!0;var Eu=Array.isArray,_h=Object.prototype.hasOwnProperty,uc={current:null},Eh={key:!0,ref:!0,__self:!0,__source:!0};function kh(t,e,r){var s,n={},a=null,l=null;if(e!=null)for(s in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(a=""+e.key),e)_h.call(e,s)&&!Eh.hasOwnProperty(s)&&(n[s]=e[s]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];n.children=c}if(t&&t.defaultProps)for(s in o=t.defaultProps,o)n[s]===void 0&&(n[s]=o[s]);return{$$typeof:Yn,type:t,key:a,ref:l,props:n,_owner:uc.current}}function U0(t,e){return{$$typeof:Yn,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function dc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yn}function D0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var ku=/\/+/g;function ol(t,e){return typeof t=="object"&&t!==null&&t.key!=null?D0(""+t.key):e.toString(36)}function Aa(t,e,r,s,n){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Yn:case S0:l=!0}}if(l)return l=t,n=n(l),t=s===""?"."+ol(l,0):s,Eu(n)?(r="",t!=null&&(r=t.replace(ku,"$&/")+"/"),Aa(n,e,r,"",function(u){return u})):n!=null&&(dc(n)&&(n=U0(n,r+(!n.key||l&&l.key===n.key?"":(""+n.key).replace(ku,"$&/")+"/")+t)),e.push(n)),1;if(l=0,s=s===""?".":s+":",Eu(t))for(var o=0;o<t.length;o++){a=t[o];var c=s+ol(a,o);l+=Aa(a,e,r,c,n)}else if(c=L0(t),typeof c=="function")for(t=c.call(t),o=0;!(a=t.next()).done;)a=a.value,c=s+ol(a,o++),l+=Aa(a,e,r,c,n);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function aa(t,e,r){if(t==null)return t;var s=[],n=0;return Aa(t,s,"","",function(a){return e.call(r,a,n++)}),s}function F0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ge={current:null},Oa={transition:null},$0={ReactCurrentDispatcher:Ge,ReactCurrentBatchConfig:Oa,ReactCurrentOwner:uc};function Sh(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:aa,forEach:function(t,e,r){aa(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return aa(t,function(){e++}),e},toArray:function(t){return aa(t,function(e){return e})||[]},only:function(t){if(!dc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Y.Component=Gs;Y.Fragment=N0;Y.Profiler=T0;Y.PureComponent=oc;Y.StrictMode=j0;Y.Suspense=A0;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$0;Y.act=Sh;Y.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=yh({},t.props),n=t.key,a=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,l=uc.current),e.key!==void 0&&(n=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)_h.call(e,c)&&!Eh.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];s.children=o}return{$$typeof:Yn,type:t.type,key:n,ref:a,props:s,_owner:l}};Y.createContext=function(t){return t={$$typeof:R0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:C0,_context:t},t.Consumer=t};Y.createElement=kh;Y.createFactory=function(t){var e=kh.bind(null,t);return e.type=t,e};Y.createRef=function(){return{current:null}};Y.forwardRef=function(t){return{$$typeof:P0,render:t}};Y.isValidElement=dc;Y.lazy=function(t){return{$$typeof:I0,_payload:{_status:-1,_result:t},_init:F0}};Y.memo=function(t,e){return{$$typeof:O0,type:t,compare:e===void 0?null:e}};Y.startTransition=function(t){var e=Oa.transition;Oa.transition={};try{t()}finally{Oa.transition=e}};Y.unstable_act=Sh;Y.useCallback=function(t,e){return Ge.current.useCallback(t,e)};Y.useContext=function(t){return Ge.current.useContext(t)};Y.useDebugValue=function(){};Y.useDeferredValue=function(t){return Ge.current.useDeferredValue(t)};Y.useEffect=function(t,e){return Ge.current.useEffect(t,e)};Y.useId=function(){return Ge.current.useId()};Y.useImperativeHandle=function(t,e,r){return Ge.current.useImperativeHandle(t,e,r)};Y.useInsertionEffect=function(t,e){return Ge.current.useInsertionEffect(t,e)};Y.useLayoutEffect=function(t,e){return Ge.current.useLayoutEffect(t,e)};Y.useMemo=function(t,e){return Ge.current.useMemo(t,e)};Y.useReducer=function(t,e,r){return Ge.current.useReducer(t,e,r)};Y.useRef=function(t){return Ge.current.useRef(t)};Y.useState=function(t){return Ge.current.useState(t)};Y.useSyncExternalStore=function(t,e,r){return Ge.current.useSyncExternalStore(t,e,r)};Y.useTransition=function(){return Ge.current.useTransition()};Y.version="18.3.1";xh.exports=Y;var b=xh.exports;const Nh=ph(b),M0=mh({__proto__:null,default:Nh},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B0=b,z0=Symbol.for("react.element"),q0=Symbol.for("react.fragment"),W0=Object.prototype.hasOwnProperty,V0=B0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,H0={key:!0,ref:!0,__self:!0,__source:!0};function jh(t,e,r){var s,n={},a=null,l=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(l=e.ref);for(s in e)W0.call(e,s)&&!H0.hasOwnProperty(s)&&(n[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)n[s]===void 0&&(n[s]=e[s]);return{$$typeof:z0,type:t,key:a,ref:l,props:n,_owner:V0.current}}Li.Fragment=q0;Li.jsx=jh;Li.jsxs=jh;gh.exports=Li;var i=gh.exports,Wl={},Th={exports:{}},ht={},Ch={exports:{}},Rh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,$){var V=A.length;A.push($);e:for(;0<V;){var te=V-1>>>1,ae=A[te];if(0<n(ae,$))A[te]=$,A[V]=ae,V=te;else break e}}function r(A){return A.length===0?null:A[0]}function s(A){if(A.length===0)return null;var $=A[0],V=A.pop();if(V!==$){A[0]=V;e:for(var te=0,ae=A.length,Xe=ae>>>1;te<Xe;){var be=2*(te+1)-1,pe=A[be],Ae=be+1,Ot=A[Ae];if(0>n(pe,V))Ae<ae&&0>n(Ot,pe)?(A[te]=Ot,A[Ae]=V,te=Ae):(A[te]=pe,A[be]=V,te=be);else if(Ae<ae&&0>n(Ot,V))A[te]=Ot,A[Ae]=V,te=Ae;else break e}}return $}function n(A,$){var V=A.sortIndex-$.sortIndex;return V!==0?V:A.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],u=[],h=1,d=null,f=3,x=!1,v=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(A){for(var $=r(u);$!==null;){if($.callback===null)s(u);else if($.startTime<=A)s(u),$.sortIndex=$.expirationTime,e(c,$);else break;$=r(u)}}function _(A){if(y=!1,m(A),!v)if(r(c)!==null)v=!0,Ce(N);else{var $=r(u);$!==null&&nt(_,$.startTime-A)}}function N(A,$){v=!1,y&&(y=!1,g(C),C=-1),x=!0;var V=f;try{for(m($),d=r(c);d!==null&&(!(d.expirationTime>$)||A&&!Q());){var te=d.callback;if(typeof te=="function"){d.callback=null,f=d.priorityLevel;var ae=te(d.expirationTime<=$);$=t.unstable_now(),typeof ae=="function"?d.callback=ae:d===r(c)&&s(c),m($)}else s(c);d=r(c)}if(d!==null)var Xe=!0;else{var be=r(u);be!==null&&nt(_,be.startTime-$),Xe=!1}return Xe}finally{d=null,f=V,x=!1}}var E=!1,S=null,C=-1,W=5,R=-1;function Q(){return!(t.unstable_now()-R<W)}function de(){if(S!==null){var A=t.unstable_now();R=A;var $=!0;try{$=S(!0,A)}finally{$?me():(E=!1,S=null)}}else E=!1}var me;if(typeof p=="function")me=function(){p(de)};else if(typeof MessageChannel<"u"){var bt=new MessageChannel,J=bt.port2;bt.port1.onmessage=de,me=function(){J.postMessage(null)}}else me=function(){w(de,0)};function Ce(A){S=A,E||(E=!0,me())}function nt(A,$){C=w(function(){A(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){v||x||(v=!0,Ce(N))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(A){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var V=f;f=$;try{return A()}finally{f=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,$){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var V=f;f=A;try{return $()}finally{f=V}},t.unstable_scheduleCallback=function(A,$,V){var te=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?te+V:te):V=te,A){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=V+ae,A={id:h++,callback:$,priorityLevel:A,startTime:V,expirationTime:ae,sortIndex:-1},V>te?(A.sortIndex=V,e(u,A),r(c)===null&&A===r(u)&&(y?(g(C),C=-1):y=!0,nt(_,V-te))):(A.sortIndex=ae,e(c,A),v||x||(v=!0,Ce(N))),A},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(A){var $=f;return function(){var V=f;f=$;try{return A.apply(this,arguments)}finally{f=V}}}})(Rh);Ch.exports=Rh;var G0=Ch.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K0=b,dt=G0;function T(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ph=new Set,jn={};function Zr(t,e){Ds(t,e),Ds(t+"Capture",e)}function Ds(t,e){for(jn[t]=e,t=0;t<e.length;t++)Ph.add(e[t])}var Kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vl=Object.prototype.hasOwnProperty,X0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Su={},Nu={};function Y0(t){return Vl.call(Nu,t)?!0:Vl.call(Su,t)?!1:X0.test(t)?Nu[t]=!0:(Su[t]=!0,!1)}function J0(t,e,r,s){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Q0(t,e,r,s){if(e===null||typeof e>"u"||J0(t,e,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ke(t,e,r,s,n,a,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=l}var De={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){De[t]=new Ke(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];De[e]=new Ke(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){De[t]=new Ke(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){De[t]=new Ke(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){De[t]=new Ke(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){De[t]=new Ke(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){De[t]=new Ke(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){De[t]=new Ke(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){De[t]=new Ke(t,5,!1,t.toLowerCase(),null,!1,!1)});var hc=/[\-:]([a-z])/g;function fc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hc,fc);De[e]=new Ke(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hc,fc);De[e]=new Ke(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hc,fc);De[e]=new Ke(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){De[t]=new Ke(t,1,!1,t.toLowerCase(),null,!1,!1)});De.xlinkHref=new Ke("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){De[t]=new Ke(t,1,!1,t.toLowerCase(),null,!0,!0)});function mc(t,e,r,s){var n=De.hasOwnProperty(e)?De[e]:null;(n!==null?n.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Q0(e,r,n,s)&&(r=null),s||n===null?Y0(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):n.mustUseProperty?t[n.propertyName]=r===null?n.type===3?!1:"":r:(e=n.attributeName,s=n.attributeNamespace,r===null?t.removeAttribute(e):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,s?t.setAttributeNS(s,e,r):t.setAttribute(e,r))))}var Zt=K0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ia=Symbol.for("react.element"),gs=Symbol.for("react.portal"),xs=Symbol.for("react.fragment"),pc=Symbol.for("react.strict_mode"),Hl=Symbol.for("react.profiler"),Ah=Symbol.for("react.provider"),Oh=Symbol.for("react.context"),gc=Symbol.for("react.forward_ref"),Gl=Symbol.for("react.suspense"),Kl=Symbol.for("react.suspense_list"),xc=Symbol.for("react.memo"),ar=Symbol.for("react.lazy"),Ih=Symbol.for("react.offscreen"),ju=Symbol.iterator;function tn(t){return t===null||typeof t!="object"?null:(t=ju&&t[ju]||t["@@iterator"],typeof t=="function"?t:null)}var ye=Object.assign,cl;function un(t){if(cl===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);cl=e&&e[1]||""}return`
`+cl+t}var ul=!1;function dl(t,e){if(!t||ul)return"";ul=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){s=u}t.call(e.prototype)}else{try{throw Error()}catch(u){s=u}t()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var n=u.stack.split(`
`),a=s.stack.split(`
`),l=n.length-1,o=a.length-1;1<=l&&0<=o&&n[l]!==a[o];)o--;for(;1<=l&&0<=o;l--,o--)if(n[l]!==a[o]){if(l!==1||o!==1)do if(l--,o--,0>o||n[l]!==a[o]){var c=`
`+n[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=o);break}}}finally{ul=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?un(t):""}function Z0(t){switch(t.tag){case 5:return un(t.type);case 16:return un("Lazy");case 13:return un("Suspense");case 19:return un("SuspenseList");case 0:case 2:case 15:return t=dl(t.type,!1),t;case 11:return t=dl(t.type.render,!1),t;case 1:return t=dl(t.type,!0),t;default:return""}}function Xl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xs:return"Fragment";case gs:return"Portal";case Hl:return"Profiler";case pc:return"StrictMode";case Gl:return"Suspense";case Kl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Oh:return(t.displayName||"Context")+".Consumer";case Ah:return(t._context.displayName||"Context")+".Provider";case gc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xc:return e=t.displayName||null,e!==null?e:Xl(t.type)||"Memo";case ar:e=t._payload,t=t._init;try{return Xl(t(e))}catch{}}return null}function eg(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xl(e);case 8:return e===pc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Lh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tg(t){var e=Lh(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.call(this)},set:function(l){s=""+l,a.call(this,l)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function la(t){t._valueTracker||(t._valueTracker=tg(t))}function Uh(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),s="";return t&&(s=Lh(t)?t.checked?"true":"false":t.value),t=s,t!==r?(e.setValue(t),!0):!1}function Ya(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Yl(t,e){var r=e.checked;return ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Tu(t,e){var r=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;r=kr(e.value!=null?e.value:r),t._wrapperState={initialChecked:s,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Dh(t,e){e=e.checked,e!=null&&mc(t,"checked",e,!1)}function Jl(t,e){Dh(t,e);var r=kr(e.value),s=e.type;if(r!=null)s==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ql(t,e.type,r):e.hasOwnProperty("defaultValue")&&Ql(t,e.type,kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Cu(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Ql(t,e,r){(e!=="number"||Ya(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var dn=Array.isArray;function Ts(t,e,r,s){if(t=t.options,e){e={};for(var n=0;n<r.length;n++)e["$"+r[n]]=!0;for(r=0;r<t.length;r++)n=e.hasOwnProperty("$"+t[r].value),t[r].selected!==n&&(t[r].selected=n),n&&s&&(t[r].defaultSelected=!0)}else{for(r=""+kr(r),e=null,n=0;n<t.length;n++){if(t[n].value===r){t[n].selected=!0,s&&(t[n].defaultSelected=!0);return}e!==null||t[n].disabled||(e=t[n])}e!==null&&(e.selected=!0)}}function Zl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ru(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(T(92));if(dn(r)){if(1<r.length)throw Error(T(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:kr(r)}}function Fh(t,e){var r=kr(e.value),s=kr(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),s!=null&&(t.defaultValue=""+s)}function Pu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $h(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function eo(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$h(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var oa,Mh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,s,n){MSApp.execUnsafeLocalFunction(function(){return t(e,r,s,n)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(oa=oa||document.createElement("div"),oa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=oa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Tn(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var xn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rg=["Webkit","ms","Moz","O"];Object.keys(xn).forEach(function(t){rg.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xn[e]=xn[t]})});function Bh(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||xn.hasOwnProperty(t)&&xn[t]?(""+e).trim():e+"px"}function zh(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var s=r.indexOf("--")===0,n=Bh(r,e[r],s);r==="float"&&(r="cssFloat"),s?t.setProperty(r,n):t[r]=n}}var sg=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function to(t,e){if(e){if(sg[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function ro(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var so=null;function vc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var no=null,Cs=null,Rs=null;function Au(t){if(t=Zn(t)){if(typeof no!="function")throw Error(T(280));var e=t.stateNode;e&&(e=Mi(e),no(t.stateNode,t.type,e))}}function qh(t){Cs?Rs?Rs.push(t):Rs=[t]:Cs=t}function Wh(){if(Cs){var t=Cs,e=Rs;if(Rs=Cs=null,Au(t),e)for(t=0;t<e.length;t++)Au(e[t])}}function Vh(t,e){return t(e)}function Hh(){}var hl=!1;function Gh(t,e,r){if(hl)return t(e,r);hl=!0;try{return Vh(t,e,r)}finally{hl=!1,(Cs!==null||Rs!==null)&&(Hh(),Wh())}}function Cn(t,e){var r=t.stateNode;if(r===null)return null;var s=Mi(r);if(s===null)return null;r=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(T(231,e,typeof r));return r}var ao=!1;if(Kt)try{var rn={};Object.defineProperty(rn,"passive",{get:function(){ao=!0}}),window.addEventListener("test",rn,rn),window.removeEventListener("test",rn,rn)}catch{ao=!1}function ng(t,e,r,s,n,a,l,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(h){this.onError(h)}}var vn=!1,Ja=null,Qa=!1,io=null,ag={onError:function(t){vn=!0,Ja=t}};function ig(t,e,r,s,n,a,l,o,c){vn=!1,Ja=null,ng.apply(ag,arguments)}function lg(t,e,r,s,n,a,l,o,c){if(ig.apply(this,arguments),vn){if(vn){var u=Ja;vn=!1,Ja=null}else throw Error(T(198));Qa||(Qa=!0,io=u)}}function es(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Kh(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ou(t){if(es(t)!==t)throw Error(T(188))}function og(t){var e=t.alternate;if(!e){if(e=es(t),e===null)throw Error(T(188));return e!==t?null:t}for(var r=t,s=e;;){var n=r.return;if(n===null)break;var a=n.alternate;if(a===null){if(s=n.return,s!==null){r=s;continue}break}if(n.child===a.child){for(a=n.child;a;){if(a===r)return Ou(n),t;if(a===s)return Ou(n),e;a=a.sibling}throw Error(T(188))}if(r.return!==s.return)r=n,s=a;else{for(var l=!1,o=n.child;o;){if(o===r){l=!0,r=n,s=a;break}if(o===s){l=!0,s=n,r=a;break}o=o.sibling}if(!l){for(o=a.child;o;){if(o===r){l=!0,r=a,s=n;break}if(o===s){l=!0,s=a,r=n;break}o=o.sibling}if(!l)throw Error(T(189))}}if(r.alternate!==s)throw Error(T(190))}if(r.tag!==3)throw Error(T(188));return r.stateNode.current===r?t:e}function Xh(t){return t=og(t),t!==null?Yh(t):null}function Yh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Yh(t);if(e!==null)return e;t=t.sibling}return null}var Jh=dt.unstable_scheduleCallback,Iu=dt.unstable_cancelCallback,cg=dt.unstable_shouldYield,ug=dt.unstable_requestPaint,_e=dt.unstable_now,dg=dt.unstable_getCurrentPriorityLevel,yc=dt.unstable_ImmediatePriority,Qh=dt.unstable_UserBlockingPriority,Za=dt.unstable_NormalPriority,hg=dt.unstable_LowPriority,Zh=dt.unstable_IdlePriority,Ui=null,Ft=null;function fg(t){if(Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Ui,t,void 0,(t.current.flags&128)===128)}catch{}}var Rt=Math.clz32?Math.clz32:gg,mg=Math.log,pg=Math.LN2;function gg(t){return t>>>=0,t===0?32:31-(mg(t)/pg|0)|0}var ca=64,ua=4194304;function hn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ei(t,e){var r=t.pendingLanes;if(r===0)return 0;var s=0,n=t.suspendedLanes,a=t.pingedLanes,l=r&268435455;if(l!==0){var o=l&~n;o!==0?s=hn(o):(a&=l,a!==0&&(s=hn(a)))}else l=r&~n,l!==0?s=hn(l):a!==0&&(s=hn(a));if(s===0)return 0;if(e!==0&&e!==s&&!(e&n)&&(n=s&-s,a=e&-e,n>=a||n===16&&(a&4194240)!==0))return e;if(s&4&&(s|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)r=31-Rt(e),n=1<<r,s|=t[r],e&=~n;return s}function xg(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vg(t,e){for(var r=t.suspendedLanes,s=t.pingedLanes,n=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-Rt(a),o=1<<l,c=n[l];c===-1?(!(o&r)||o&s)&&(n[l]=xg(o,e)):c<=e&&(t.expiredLanes|=o),a&=~o}}function lo(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ef(){var t=ca;return ca<<=1,!(ca&4194240)&&(ca=64),t}function fl(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Jn(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Rt(e),t[e]=r}function yg(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<r;){var n=31-Rt(r),a=1<<n;e[n]=0,s[n]=-1,t[n]=-1,r&=~a}}function wc(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var s=31-Rt(r),n=1<<s;n&e|t[s]&e&&(t[s]|=e),r&=~n}}var ne=0;function tf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var rf,bc,sf,nf,af,oo=!1,da=[],mr=null,pr=null,gr=null,Rn=new Map,Pn=new Map,lr=[],wg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lu(t,e){switch(t){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":Rn.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pn.delete(e.pointerId)}}function sn(t,e,r,s,n,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:s,nativeEvent:a,targetContainers:[n]},e!==null&&(e=Zn(e),e!==null&&bc(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,n!==null&&e.indexOf(n)===-1&&e.push(n),t)}function bg(t,e,r,s,n){switch(e){case"focusin":return mr=sn(mr,t,e,r,s,n),!0;case"dragenter":return pr=sn(pr,t,e,r,s,n),!0;case"mouseover":return gr=sn(gr,t,e,r,s,n),!0;case"pointerover":var a=n.pointerId;return Rn.set(a,sn(Rn.get(a)||null,t,e,r,s,n)),!0;case"gotpointercapture":return a=n.pointerId,Pn.set(a,sn(Pn.get(a)||null,t,e,r,s,n)),!0}return!1}function lf(t){var e=Br(t.target);if(e!==null){var r=es(e);if(r!==null){if(e=r.tag,e===13){if(e=Kh(r),e!==null){t.blockedOn=e,af(t.priority,function(){sf(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ia(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=co(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var s=new r.constructor(r.type,r);so=s,r.target.dispatchEvent(s),so=null}else return e=Zn(r),e!==null&&bc(e),t.blockedOn=r,!1;e.shift()}return!0}function Uu(t,e,r){Ia(t)&&r.delete(e)}function _g(){oo=!1,mr!==null&&Ia(mr)&&(mr=null),pr!==null&&Ia(pr)&&(pr=null),gr!==null&&Ia(gr)&&(gr=null),Rn.forEach(Uu),Pn.forEach(Uu)}function nn(t,e){t.blockedOn===e&&(t.blockedOn=null,oo||(oo=!0,dt.unstable_scheduleCallback(dt.unstable_NormalPriority,_g)))}function An(t){function e(n){return nn(n,t)}if(0<da.length){nn(da[0],t);for(var r=1;r<da.length;r++){var s=da[r];s.blockedOn===t&&(s.blockedOn=null)}}for(mr!==null&&nn(mr,t),pr!==null&&nn(pr,t),gr!==null&&nn(gr,t),Rn.forEach(e),Pn.forEach(e),r=0;r<lr.length;r++)s=lr[r],s.blockedOn===t&&(s.blockedOn=null);for(;0<lr.length&&(r=lr[0],r.blockedOn===null);)lf(r),r.blockedOn===null&&lr.shift()}var Ps=Zt.ReactCurrentBatchConfig,ti=!0;function Eg(t,e,r,s){var n=ne,a=Ps.transition;Ps.transition=null;try{ne=1,_c(t,e,r,s)}finally{ne=n,Ps.transition=a}}function kg(t,e,r,s){var n=ne,a=Ps.transition;Ps.transition=null;try{ne=4,_c(t,e,r,s)}finally{ne=n,Ps.transition=a}}function _c(t,e,r,s){if(ti){var n=co(t,e,r,s);if(n===null)El(t,e,s,ri,r),Lu(t,s);else if(bg(n,t,e,r,s))s.stopPropagation();else if(Lu(t,s),e&4&&-1<wg.indexOf(t)){for(;n!==null;){var a=Zn(n);if(a!==null&&rf(a),a=co(t,e,r,s),a===null&&El(t,e,s,ri,r),a===n)break;n=a}n!==null&&s.stopPropagation()}else El(t,e,s,null,r)}}var ri=null;function co(t,e,r,s){if(ri=null,t=vc(s),t=Br(t),t!==null)if(e=es(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Kh(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ri=t,null}function of(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dg()){case yc:return 1;case Qh:return 4;case Za:case hg:return 16;case Zh:return 536870912;default:return 16}default:return 16}}var dr=null,Ec=null,La=null;function cf(){if(La)return La;var t,e=Ec,r=e.length,s,n="value"in dr?dr.value:dr.textContent,a=n.length;for(t=0;t<r&&e[t]===n[t];t++);var l=r-t;for(s=1;s<=l&&e[r-s]===n[a-s];s++);return La=n.slice(t,1<s?1-s:void 0)}function Ua(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ha(){return!0}function Du(){return!1}function ft(t){function e(r,s,n,a,l){this._reactName=r,this._targetInst=n,this.type=s,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ha:Du,this.isPropagationStopped=Du,this}return ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ha)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ha)},persist:function(){},isPersistent:ha}),e}var Ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kc=ft(Ks),Qn=ye({},Ks,{view:0,detail:0}),Sg=ft(Qn),ml,pl,an,Di=ye({},Qn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==an&&(an&&t.type==="mousemove"?(ml=t.screenX-an.screenX,pl=t.screenY-an.screenY):pl=ml=0,an=t),ml)},movementY:function(t){return"movementY"in t?t.movementY:pl}}),Fu=ft(Di),Ng=ye({},Di,{dataTransfer:0}),jg=ft(Ng),Tg=ye({},Qn,{relatedTarget:0}),gl=ft(Tg),Cg=ye({},Ks,{animationName:0,elapsedTime:0,pseudoElement:0}),Rg=ft(Cg),Pg=ye({},Ks,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ag=ft(Pg),Og=ye({},Ks,{data:0}),$u=ft(Og),Ig={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ug={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dg(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ug[t])?!!e[t]:!1}function Sc(){return Dg}var Fg=ye({},Qn,{key:function(t){if(t.key){var e=Ig[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ua(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Lg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sc,charCode:function(t){return t.type==="keypress"?Ua(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ua(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$g=ft(Fg),Mg=ye({},Di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mu=ft(Mg),Bg=ye({},Qn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sc}),zg=ft(Bg),qg=ye({},Ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wg=ft(qg),Vg=ye({},Di,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Hg=ft(Vg),Gg=[9,13,27,32],Nc=Kt&&"CompositionEvent"in window,yn=null;Kt&&"documentMode"in document&&(yn=document.documentMode);var Kg=Kt&&"TextEvent"in window&&!yn,uf=Kt&&(!Nc||yn&&8<yn&&11>=yn),Bu=" ",zu=!1;function df(t,e){switch(t){case"keyup":return Gg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vs=!1;function Xg(t,e){switch(t){case"compositionend":return hf(e);case"keypress":return e.which!==32?null:(zu=!0,Bu);case"textInput":return t=e.data,t===Bu&&zu?null:t;default:return null}}function Yg(t,e){if(vs)return t==="compositionend"||!Nc&&df(t,e)?(t=cf(),La=Ec=dr=null,vs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uf&&e.locale!=="ko"?null:e.data;default:return null}}var Jg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Jg[t.type]:e==="textarea"}function ff(t,e,r,s){qh(s),e=si(e,"onChange"),0<e.length&&(r=new kc("onChange","change",null,r,s),t.push({event:r,listeners:e}))}var wn=null,On=null;function Qg(t){kf(t,0)}function Fi(t){var e=bs(t);if(Uh(e))return t}function Zg(t,e){if(t==="change")return e}var mf=!1;if(Kt){var xl;if(Kt){var vl="oninput"in document;if(!vl){var Wu=document.createElement("div");Wu.setAttribute("oninput","return;"),vl=typeof Wu.oninput=="function"}xl=vl}else xl=!1;mf=xl&&(!document.documentMode||9<document.documentMode)}function Vu(){wn&&(wn.detachEvent("onpropertychange",pf),On=wn=null)}function pf(t){if(t.propertyName==="value"&&Fi(On)){var e=[];ff(e,On,t,vc(t)),Gh(Qg,e)}}function ex(t,e,r){t==="focusin"?(Vu(),wn=e,On=r,wn.attachEvent("onpropertychange",pf)):t==="focusout"&&Vu()}function tx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fi(On)}function rx(t,e){if(t==="click")return Fi(e)}function sx(t,e){if(t==="input"||t==="change")return Fi(e)}function nx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var At=typeof Object.is=="function"?Object.is:nx;function In(t,e){if(At(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var n=r[s];if(!Vl.call(e,n)||!At(t[n],e[n]))return!1}return!0}function Hu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gu(t,e){var r=Hu(t);t=0;for(var s;r;){if(r.nodeType===3){if(s=t+r.textContent.length,t<=e&&s>=e)return{node:r,offset:e-t};t=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Hu(r)}}function gf(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?gf(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function xf(){for(var t=window,e=Ya();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Ya(t.document)}return e}function jc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ax(t){var e=xf(),r=t.focusedElem,s=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&gf(r.ownerDocument.documentElement,r)){if(s!==null&&jc(r)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var n=r.textContent.length,a=Math.min(s.start,n);s=s.end===void 0?a:Math.min(s.end,n),!t.extend&&a>s&&(n=s,s=a,a=n),n=Gu(r,a);var l=Gu(r,s);n&&l&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(n.node,n.offset),t.removeAllRanges(),a>s?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ix=Kt&&"documentMode"in document&&11>=document.documentMode,ys=null,uo=null,bn=null,ho=!1;function Ku(t,e,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ho||ys==null||ys!==Ya(s)||(s=ys,"selectionStart"in s&&jc(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),bn&&In(bn,s)||(bn=s,s=si(uo,"onSelect"),0<s.length&&(e=new kc("onSelect","select",null,e,r),t.push({event:e,listeners:s}),e.target=ys)))}function fa(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var ws={animationend:fa("Animation","AnimationEnd"),animationiteration:fa("Animation","AnimationIteration"),animationstart:fa("Animation","AnimationStart"),transitionend:fa("Transition","TransitionEnd")},yl={},vf={};Kt&&(vf=document.createElement("div").style,"AnimationEvent"in window||(delete ws.animationend.animation,delete ws.animationiteration.animation,delete ws.animationstart.animation),"TransitionEvent"in window||delete ws.transitionend.transition);function $i(t){if(yl[t])return yl[t];if(!ws[t])return t;var e=ws[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in vf)return yl[t]=e[r];return t}var yf=$i("animationend"),wf=$i("animationiteration"),bf=$i("animationstart"),_f=$i("transitionend"),Ef=new Map,Xu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(t,e){Ef.set(t,e),Zr(e,[t])}for(var wl=0;wl<Xu.length;wl++){var bl=Xu[wl],lx=bl.toLowerCase(),ox=bl[0].toUpperCase()+bl.slice(1);Nr(lx,"on"+ox)}Nr(yf,"onAnimationEnd");Nr(wf,"onAnimationIteration");Nr(bf,"onAnimationStart");Nr("dblclick","onDoubleClick");Nr("focusin","onFocus");Nr("focusout","onBlur");Nr(_f,"onTransitionEnd");Ds("onMouseEnter",["mouseout","mouseover"]);Ds("onMouseLeave",["mouseout","mouseover"]);Ds("onPointerEnter",["pointerout","pointerover"]);Ds("onPointerLeave",["pointerout","pointerover"]);Zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cx=new Set("cancel close invalid load scroll toggle".split(" ").concat(fn));function Yu(t,e,r){var s=t.type||"unknown-event";t.currentTarget=r,lg(s,e,void 0,t),t.currentTarget=null}function kf(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var s=t[r],n=s.event;s=s.listeners;e:{var a=void 0;if(e)for(var l=s.length-1;0<=l;l--){var o=s[l],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==a&&n.isPropagationStopped())break e;Yu(n,o,u),a=c}else for(l=0;l<s.length;l++){if(o=s[l],c=o.instance,u=o.currentTarget,o=o.listener,c!==a&&n.isPropagationStopped())break e;Yu(n,o,u),a=c}}}if(Qa)throw t=io,Qa=!1,io=null,t}function ce(t,e){var r=e[xo];r===void 0&&(r=e[xo]=new Set);var s=t+"__bubble";r.has(s)||(Sf(e,t,2,!1),r.add(s))}function _l(t,e,r){var s=0;e&&(s|=4),Sf(r,t,s,e)}var ma="_reactListening"+Math.random().toString(36).slice(2);function Ln(t){if(!t[ma]){t[ma]=!0,Ph.forEach(function(r){r!=="selectionchange"&&(cx.has(r)||_l(r,!1,t),_l(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ma]||(e[ma]=!0,_l("selectionchange",!1,e))}}function Sf(t,e,r,s){switch(of(e)){case 1:var n=Eg;break;case 4:n=kg;break;default:n=_c}r=n.bind(null,e,r,t),n=void 0,!ao||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(n=!0),s?n!==void 0?t.addEventListener(e,r,{capture:!0,passive:n}):t.addEventListener(e,r,!0):n!==void 0?t.addEventListener(e,r,{passive:n}):t.addEventListener(e,r,!1)}function El(t,e,r,s,n){var a=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var o=s.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(l===4)for(l=s.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;l=l.return}for(;o!==null;){if(l=Br(o),l===null)return;if(c=l.tag,c===5||c===6){s=a=l;continue e}o=o.parentNode}}s=s.return}Gh(function(){var u=a,h=vc(r),d=[];e:{var f=Ef.get(t);if(f!==void 0){var x=kc,v=t;switch(t){case"keypress":if(Ua(r)===0)break e;case"keydown":case"keyup":x=$g;break;case"focusin":v="focus",x=gl;break;case"focusout":v="blur",x=gl;break;case"beforeblur":case"afterblur":x=gl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Fu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=jg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=zg;break;case yf:case wf:case bf:x=Rg;break;case _f:x=Wg;break;case"scroll":x=Sg;break;case"wheel":x=Hg;break;case"copy":case"cut":case"paste":x=Ag;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Mu}var y=(e&4)!==0,w=!y&&t==="scroll",g=y?f!==null?f+"Capture":null:f;y=[];for(var p=u,m;p!==null;){m=p;var _=m.stateNode;if(m.tag===5&&_!==null&&(m=_,g!==null&&(_=Cn(p,g),_!=null&&y.push(Un(p,_,m)))),w)break;p=p.return}0<y.length&&(f=new x(f,v,null,r,h),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",f&&r!==so&&(v=r.relatedTarget||r.fromElement)&&(Br(v)||v[Xt]))break e;if((x||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,x?(v=r.relatedTarget||r.toElement,x=u,v=v?Br(v):null,v!==null&&(w=es(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(x=null,v=u),x!==v)){if(y=Fu,_="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(y=Mu,_="onPointerLeave",g="onPointerEnter",p="pointer"),w=x==null?f:bs(x),m=v==null?f:bs(v),f=new y(_,p+"leave",x,r,h),f.target=w,f.relatedTarget=m,_=null,Br(h)===u&&(y=new y(g,p+"enter",v,r,h),y.target=m,y.relatedTarget=w,_=y),w=_,x&&v)t:{for(y=x,g=v,p=0,m=y;m;m=os(m))p++;for(m=0,_=g;_;_=os(_))m++;for(;0<p-m;)y=os(y),p--;for(;0<m-p;)g=os(g),m--;for(;p--;){if(y===g||g!==null&&y===g.alternate)break t;y=os(y),g=os(g)}y=null}else y=null;x!==null&&Ju(d,f,x,y,!1),v!==null&&w!==null&&Ju(d,w,v,y,!0)}}e:{if(f=u?bs(u):window,x=f.nodeName&&f.nodeName.toLowerCase(),x==="select"||x==="input"&&f.type==="file")var N=Zg;else if(qu(f))if(mf)N=sx;else{N=tx;var E=ex}else(x=f.nodeName)&&x.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=rx);if(N&&(N=N(t,u))){ff(d,N,r,h);break e}E&&E(t,f,u),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&Ql(f,"number",f.value)}switch(E=u?bs(u):window,t){case"focusin":(qu(E)||E.contentEditable==="true")&&(ys=E,uo=u,bn=null);break;case"focusout":bn=uo=ys=null;break;case"mousedown":ho=!0;break;case"contextmenu":case"mouseup":case"dragend":ho=!1,Ku(d,r,h);break;case"selectionchange":if(ix)break;case"keydown":case"keyup":Ku(d,r,h)}var S;if(Nc)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else vs?df(t,r)&&(C="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(uf&&r.locale!=="ko"&&(vs||C!=="onCompositionStart"?C==="onCompositionEnd"&&vs&&(S=cf()):(dr=h,Ec="value"in dr?dr.value:dr.textContent,vs=!0)),E=si(u,C),0<E.length&&(C=new $u(C,t,null,r,h),d.push({event:C,listeners:E}),S?C.data=S:(S=hf(r),S!==null&&(C.data=S)))),(S=Kg?Xg(t,r):Yg(t,r))&&(u=si(u,"onBeforeInput"),0<u.length&&(h=new $u("onBeforeInput","beforeinput",null,r,h),d.push({event:h,listeners:u}),h.data=S))}kf(d,e)})}function Un(t,e,r){return{instance:t,listener:e,currentTarget:r}}function si(t,e){for(var r=e+"Capture",s=[];t!==null;){var n=t,a=n.stateNode;n.tag===5&&a!==null&&(n=a,a=Cn(t,r),a!=null&&s.unshift(Un(t,a,n)),a=Cn(t,e),a!=null&&s.push(Un(t,a,n))),t=t.return}return s}function os(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ju(t,e,r,s,n){for(var a=e._reactName,l=[];r!==null&&r!==s;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&u!==null&&(o=u,n?(c=Cn(r,a),c!=null&&l.unshift(Un(r,c,o))):n||(c=Cn(r,a),c!=null&&l.push(Un(r,c,o)))),r=r.return}l.length!==0&&t.push({event:e,listeners:l})}var ux=/\r\n?/g,dx=/\u0000|\uFFFD/g;function Qu(t){return(typeof t=="string"?t:""+t).replace(ux,`
`).replace(dx,"")}function pa(t,e,r){if(e=Qu(e),Qu(t)!==e&&r)throw Error(T(425))}function ni(){}var fo=null,mo=null;function po(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var go=typeof setTimeout=="function"?setTimeout:void 0,hx=typeof clearTimeout=="function"?clearTimeout:void 0,Zu=typeof Promise=="function"?Promise:void 0,fx=typeof queueMicrotask=="function"?queueMicrotask:typeof Zu<"u"?function(t){return Zu.resolve(null).then(t).catch(mx)}:go;function mx(t){setTimeout(function(){throw t})}function kl(t,e){var r=e,s=0;do{var n=r.nextSibling;if(t.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(s===0){t.removeChild(n),An(e);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=n}while(r);An(e)}function xr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ed(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Xs=Math.random().toString(36).slice(2),Dt="__reactFiber$"+Xs,Dn="__reactProps$"+Xs,Xt="__reactContainer$"+Xs,xo="__reactEvents$"+Xs,px="__reactListeners$"+Xs,gx="__reactHandles$"+Xs;function Br(t){var e=t[Dt];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Xt]||r[Dt]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=ed(t);t!==null;){if(r=t[Dt])return r;t=ed(t)}return e}t=r,r=t.parentNode}return null}function Zn(t){return t=t[Dt]||t[Xt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function bs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(T(33))}function Mi(t){return t[Dn]||null}var vo=[],_s=-1;function jr(t){return{current:t}}function ue(t){0>_s||(t.current=vo[_s],vo[_s]=null,_s--)}function oe(t,e){_s++,vo[_s]=t.current,t.current=e}var Sr={},We=jr(Sr),tt=jr(!1),Kr=Sr;function Fs(t,e){var r=t.type.contextTypes;if(!r)return Sr;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var n={},a;for(a in r)n[a]=e[a];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n),n}function rt(t){return t=t.childContextTypes,t!=null}function ai(){ue(tt),ue(We)}function td(t,e,r){if(We.current!==Sr)throw Error(T(168));oe(We,e),oe(tt,r)}function Nf(t,e,r){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var n in s)if(!(n in e))throw Error(T(108,eg(t)||"Unknown",n));return ye({},r,s)}function ii(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Sr,Kr=We.current,oe(We,t),oe(tt,tt.current),!0}function rd(t,e,r){var s=t.stateNode;if(!s)throw Error(T(169));r?(t=Nf(t,e,Kr),s.__reactInternalMemoizedMergedChildContext=t,ue(tt),ue(We),oe(We,t)):ue(tt),oe(tt,r)}var qt=null,Bi=!1,Sl=!1;function jf(t){qt===null?qt=[t]:qt.push(t)}function xx(t){Bi=!0,jf(t)}function Tr(){if(!Sl&&qt!==null){Sl=!0;var t=0,e=ne;try{var r=qt;for(ne=1;t<r.length;t++){var s=r[t];do s=s(!0);while(s!==null)}qt=null,Bi=!1}catch(n){throw qt!==null&&(qt=qt.slice(t+1)),Jh(yc,Tr),n}finally{ne=e,Sl=!1}}return null}var Es=[],ks=0,li=null,oi=0,pt=[],gt=0,Xr=null,Wt=1,Vt="";function Ir(t,e){Es[ks++]=oi,Es[ks++]=li,li=t,oi=e}function Tf(t,e,r){pt[gt++]=Wt,pt[gt++]=Vt,pt[gt++]=Xr,Xr=t;var s=Wt;t=Vt;var n=32-Rt(s)-1;s&=~(1<<n),r+=1;var a=32-Rt(e)+n;if(30<a){var l=n-n%5;a=(s&(1<<l)-1).toString(32),s>>=l,n-=l,Wt=1<<32-Rt(e)+n|r<<n|s,Vt=a+t}else Wt=1<<a|r<<n|s,Vt=t}function Tc(t){t.return!==null&&(Ir(t,1),Tf(t,1,0))}function Cc(t){for(;t===li;)li=Es[--ks],Es[ks]=null,oi=Es[--ks],Es[ks]=null;for(;t===Xr;)Xr=pt[--gt],pt[gt]=null,Vt=pt[--gt],pt[gt]=null,Wt=pt[--gt],pt[gt]=null}var ut=null,ct=null,fe=!1,Ct=null;function Cf(t,e){var r=xt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function sd(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ut=t,ct=xr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ut=t,ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Xr!==null?{id:Wt,overflow:Vt}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=xt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ut=t,ct=null,!0):!1;default:return!1}}function yo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wo(t){if(fe){var e=ct;if(e){var r=e;if(!sd(t,e)){if(yo(t))throw Error(T(418));e=xr(r.nextSibling);var s=ut;e&&sd(t,e)?Cf(s,r):(t.flags=t.flags&-4097|2,fe=!1,ut=t)}}else{if(yo(t))throw Error(T(418));t.flags=t.flags&-4097|2,fe=!1,ut=t}}}function nd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ut=t}function ga(t){if(t!==ut)return!1;if(!fe)return nd(t),fe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!po(t.type,t.memoizedProps)),e&&(e=ct)){if(yo(t))throw Rf(),Error(T(418));for(;e;)Cf(t,e),e=xr(e.nextSibling)}if(nd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(T(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){ct=xr(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}ct=null}}else ct=ut?xr(t.stateNode.nextSibling):null;return!0}function Rf(){for(var t=ct;t;)t=xr(t.nextSibling)}function $s(){ct=ut=null,fe=!1}function Rc(t){Ct===null?Ct=[t]:Ct.push(t)}var vx=Zt.ReactCurrentBatchConfig;function ln(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(T(309));var s=r.stateNode}if(!s)throw Error(T(147,t));var n=s,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(l){var o=n.refs;l===null?delete o[a]:o[a]=l},e._stringRef=a,e)}if(typeof t!="string")throw Error(T(284));if(!r._owner)throw Error(T(290,t))}return t}function xa(t,e){throw t=Object.prototype.toString.call(e),Error(T(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ad(t){var e=t._init;return e(t._payload)}function Pf(t){function e(g,p){if(t){var m=g.deletions;m===null?(g.deletions=[p],g.flags|=16):m.push(p)}}function r(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function s(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function n(g,p){return g=br(g,p),g.index=0,g.sibling=null,g}function a(g,p,m){return g.index=m,t?(m=g.alternate,m!==null?(m=m.index,m<p?(g.flags|=2,p):m):(g.flags|=2,p)):(g.flags|=1048576,p)}function l(g){return t&&g.alternate===null&&(g.flags|=2),g}function o(g,p,m,_){return p===null||p.tag!==6?(p=Al(m,g.mode,_),p.return=g,p):(p=n(p,m),p.return=g,p)}function c(g,p,m,_){var N=m.type;return N===xs?h(g,p,m.props.children,_,m.key):p!==null&&(p.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ar&&ad(N)===p.type)?(_=n(p,m.props),_.ref=ln(g,p,m),_.return=g,_):(_=qa(m.type,m.key,m.props,null,g.mode,_),_.ref=ln(g,p,m),_.return=g,_)}function u(g,p,m,_){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=Ol(m,g.mode,_),p.return=g,p):(p=n(p,m.children||[]),p.return=g,p)}function h(g,p,m,_,N){return p===null||p.tag!==7?(p=Hr(m,g.mode,_,N),p.return=g,p):(p=n(p,m),p.return=g,p)}function d(g,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Al(""+p,g.mode,m),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ia:return m=qa(p.type,p.key,p.props,null,g.mode,m),m.ref=ln(g,null,p),m.return=g,m;case gs:return p=Ol(p,g.mode,m),p.return=g,p;case ar:var _=p._init;return d(g,_(p._payload),m)}if(dn(p)||tn(p))return p=Hr(p,g.mode,m,null),p.return=g,p;xa(g,p)}return null}function f(g,p,m,_){var N=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return N!==null?null:o(g,p,""+m,_);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ia:return m.key===N?c(g,p,m,_):null;case gs:return m.key===N?u(g,p,m,_):null;case ar:return N=m._init,f(g,p,N(m._payload),_)}if(dn(m)||tn(m))return N!==null?null:h(g,p,m,_,null);xa(g,m)}return null}function x(g,p,m,_,N){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(m)||null,o(p,g,""+_,N);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ia:return g=g.get(_.key===null?m:_.key)||null,c(p,g,_,N);case gs:return g=g.get(_.key===null?m:_.key)||null,u(p,g,_,N);case ar:var E=_._init;return x(g,p,m,E(_._payload),N)}if(dn(_)||tn(_))return g=g.get(m)||null,h(p,g,_,N,null);xa(p,_)}return null}function v(g,p,m,_){for(var N=null,E=null,S=p,C=p=0,W=null;S!==null&&C<m.length;C++){S.index>C?(W=S,S=null):W=S.sibling;var R=f(g,S,m[C],_);if(R===null){S===null&&(S=W);break}t&&S&&R.alternate===null&&e(g,S),p=a(R,p,C),E===null?N=R:E.sibling=R,E=R,S=W}if(C===m.length)return r(g,S),fe&&Ir(g,C),N;if(S===null){for(;C<m.length;C++)S=d(g,m[C],_),S!==null&&(p=a(S,p,C),E===null?N=S:E.sibling=S,E=S);return fe&&Ir(g,C),N}for(S=s(g,S);C<m.length;C++)W=x(S,g,C,m[C],_),W!==null&&(t&&W.alternate!==null&&S.delete(W.key===null?C:W.key),p=a(W,p,C),E===null?N=W:E.sibling=W,E=W);return t&&S.forEach(function(Q){return e(g,Q)}),fe&&Ir(g,C),N}function y(g,p,m,_){var N=tn(m);if(typeof N!="function")throw Error(T(150));if(m=N.call(m),m==null)throw Error(T(151));for(var E=N=null,S=p,C=p=0,W=null,R=m.next();S!==null&&!R.done;C++,R=m.next()){S.index>C?(W=S,S=null):W=S.sibling;var Q=f(g,S,R.value,_);if(Q===null){S===null&&(S=W);break}t&&S&&Q.alternate===null&&e(g,S),p=a(Q,p,C),E===null?N=Q:E.sibling=Q,E=Q,S=W}if(R.done)return r(g,S),fe&&Ir(g,C),N;if(S===null){for(;!R.done;C++,R=m.next())R=d(g,R.value,_),R!==null&&(p=a(R,p,C),E===null?N=R:E.sibling=R,E=R);return fe&&Ir(g,C),N}for(S=s(g,S);!R.done;C++,R=m.next())R=x(S,g,C,R.value,_),R!==null&&(t&&R.alternate!==null&&S.delete(R.key===null?C:R.key),p=a(R,p,C),E===null?N=R:E.sibling=R,E=R);return t&&S.forEach(function(de){return e(g,de)}),fe&&Ir(g,C),N}function w(g,p,m,_){if(typeof m=="object"&&m!==null&&m.type===xs&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case ia:e:{for(var N=m.key,E=p;E!==null;){if(E.key===N){if(N=m.type,N===xs){if(E.tag===7){r(g,E.sibling),p=n(E,m.props.children),p.return=g,g=p;break e}}else if(E.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ar&&ad(N)===E.type){r(g,E.sibling),p=n(E,m.props),p.ref=ln(g,E,m),p.return=g,g=p;break e}r(g,E);break}else e(g,E);E=E.sibling}m.type===xs?(p=Hr(m.props.children,g.mode,_,m.key),p.return=g,g=p):(_=qa(m.type,m.key,m.props,null,g.mode,_),_.ref=ln(g,p,m),_.return=g,g=_)}return l(g);case gs:e:{for(E=m.key;p!==null;){if(p.key===E)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){r(g,p.sibling),p=n(p,m.children||[]),p.return=g,g=p;break e}else{r(g,p);break}else e(g,p);p=p.sibling}p=Ol(m,g.mode,_),p.return=g,g=p}return l(g);case ar:return E=m._init,w(g,p,E(m._payload),_)}if(dn(m))return v(g,p,m,_);if(tn(m))return y(g,p,m,_);xa(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(r(g,p.sibling),p=n(p,m),p.return=g,g=p):(r(g,p),p=Al(m,g.mode,_),p.return=g,g=p),l(g)):r(g,p)}return w}var Ms=Pf(!0),Af=Pf(!1),ci=jr(null),ui=null,Ss=null,Pc=null;function Ac(){Pc=Ss=ui=null}function Oc(t){var e=ci.current;ue(ci),t._currentValue=e}function bo(t,e,r){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===r)break;t=t.return}}function As(t,e){ui=t,Pc=Ss=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(et=!0),t.firstContext=null)}function yt(t){var e=t._currentValue;if(Pc!==t)if(t={context:t,memoizedValue:e,next:null},Ss===null){if(ui===null)throw Error(T(308));Ss=t,ui.dependencies={lanes:0,firstContext:t}}else Ss=Ss.next=t;return e}var zr=null;function Ic(t){zr===null?zr=[t]:zr.push(t)}function Of(t,e,r,s){var n=e.interleaved;return n===null?(r.next=r,Ic(e)):(r.next=n.next,n.next=r),e.interleaved=r,Yt(t,s)}function Yt(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ir=!1;function Lc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function If(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ht(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function vr(t,e,r){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,ee&2){var n=s.pending;return n===null?e.next=e:(e.next=n.next,n.next=e),s.pending=e,Yt(t,r)}return n=s.interleaved,n===null?(e.next=e,Ic(s)):(e.next=n.next,n.next=e),s.interleaved=e,Yt(t,r)}function Da(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,wc(t,r)}}function id(t,e){var r=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var n=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?n=a=l:a=a.next=l,r=r.next}while(r!==null);a===null?n=a=e:a=a.next=e}else n=a=e;r={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:a,shared:s.shared,effects:s.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function di(t,e,r,s){var n=t.updateQueue;ir=!1;var a=n.firstBaseUpdate,l=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,u=c.next;c.next=null,l===null?a=u:l.next=u,l=c;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==l&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=c))}if(a!==null){var d=n.baseState;l=0,h=u=c=null,o=a;do{var f=o.lane,x=o.eventTime;if((s&f)===f){h!==null&&(h=h.next={eventTime:x,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=t,y=o;switch(f=e,x=r,y.tag){case 1:if(v=y.payload,typeof v=="function"){d=v.call(x,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,f=typeof v=="function"?v.call(x,d,f):v,f==null)break e;d=ye({},d,f);break e;case 2:ir=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=n.effects,f===null?n.effects=[o]:f.push(o))}else x={eventTime:x,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=x,c=d):h=h.next=x,l|=f;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;f=o,o=f.next,f.next=null,n.lastBaseUpdate=f,n.shared.pending=null}}while(!0);if(h===null&&(c=d),n.baseState=c,n.firstBaseUpdate=u,n.lastBaseUpdate=h,e=n.shared.interleaved,e!==null){n=e;do l|=n.lane,n=n.next;while(n!==e)}else a===null&&(n.shared.lanes=0);Jr|=l,t.lanes=l,t.memoizedState=d}}function ld(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],n=s.callback;if(n!==null){if(s.callback=null,s=r,typeof n!="function")throw Error(T(191,n));n.call(s)}}}var ea={},$t=jr(ea),Fn=jr(ea),$n=jr(ea);function qr(t){if(t===ea)throw Error(T(174));return t}function Uc(t,e){switch(oe($n,e),oe(Fn,t),oe($t,ea),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:eo(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=eo(e,t)}ue($t),oe($t,e)}function Bs(){ue($t),ue(Fn),ue($n)}function Lf(t){qr($n.current);var e=qr($t.current),r=eo(e,t.type);e!==r&&(oe(Fn,t),oe($t,r))}function Dc(t){Fn.current===t&&(ue($t),ue(Fn))}var xe=jr(0);function hi(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Nl=[];function Fc(){for(var t=0;t<Nl.length;t++)Nl[t]._workInProgressVersionPrimary=null;Nl.length=0}var Fa=Zt.ReactCurrentDispatcher,jl=Zt.ReactCurrentBatchConfig,Yr=0,ve=null,je=null,Re=null,fi=!1,_n=!1,Mn=0,yx=0;function $e(){throw Error(T(321))}function $c(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!At(t[r],e[r]))return!1;return!0}function Mc(t,e,r,s,n,a){if(Yr=a,ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fa.current=t===null||t.memoizedState===null?Ex:kx,t=r(s,n),_n){a=0;do{if(_n=!1,Mn=0,25<=a)throw Error(T(301));a+=1,Re=je=null,e.updateQueue=null,Fa.current=Sx,t=r(s,n)}while(_n)}if(Fa.current=mi,e=je!==null&&je.next!==null,Yr=0,Re=je=ve=null,fi=!1,e)throw Error(T(300));return t}function Bc(){var t=Mn!==0;return Mn=0,t}function Lt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?ve.memoizedState=Re=t:Re=Re.next=t,Re}function wt(){if(je===null){var t=ve.alternate;t=t!==null?t.memoizedState:null}else t=je.next;var e=Re===null?ve.memoizedState:Re.next;if(e!==null)Re=e,je=t;else{if(t===null)throw Error(T(310));je=t,t={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},Re===null?ve.memoizedState=Re=t:Re=Re.next=t}return Re}function Bn(t,e){return typeof e=="function"?e(t):e}function Tl(t){var e=wt(),r=e.queue;if(r===null)throw Error(T(311));r.lastRenderedReducer=t;var s=je,n=s.baseQueue,a=r.pending;if(a!==null){if(n!==null){var l=n.next;n.next=a.next,a.next=l}s.baseQueue=n=a,r.pending=null}if(n!==null){a=n.next,s=s.baseState;var o=l=null,c=null,u=a;do{var h=u.lane;if((Yr&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:t(s,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=d,l=s):c=c.next=d,ve.lanes|=h,Jr|=h}u=u.next}while(u!==null&&u!==a);c===null?l=s:c.next=o,At(s,e.memoizedState)||(et=!0),e.memoizedState=s,e.baseState=l,e.baseQueue=c,r.lastRenderedState=s}if(t=r.interleaved,t!==null){n=t;do a=n.lane,ve.lanes|=a,Jr|=a,n=n.next;while(n!==t)}else n===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Cl(t){var e=wt(),r=e.queue;if(r===null)throw Error(T(311));r.lastRenderedReducer=t;var s=r.dispatch,n=r.pending,a=e.memoizedState;if(n!==null){r.pending=null;var l=n=n.next;do a=t(a,l.action),l=l.next;while(l!==n);At(a,e.memoizedState)||(et=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,s]}function Uf(){}function Df(t,e){var r=ve,s=wt(),n=e(),a=!At(s.memoizedState,n);if(a&&(s.memoizedState=n,et=!0),s=s.queue,zc(Mf.bind(null,r,s,t),[t]),s.getSnapshot!==e||a||Re!==null&&Re.memoizedState.tag&1){if(r.flags|=2048,zn(9,$f.bind(null,r,s,n,e),void 0,null),Pe===null)throw Error(T(349));Yr&30||Ff(r,e,n)}return n}function Ff(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function $f(t,e,r,s){e.value=r,e.getSnapshot=s,Bf(e)&&zf(t)}function Mf(t,e,r){return r(function(){Bf(e)&&zf(t)})}function Bf(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!At(t,r)}catch{return!0}}function zf(t){var e=Yt(t,1);e!==null&&Pt(e,t,1,-1)}function od(t){var e=Lt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bn,lastRenderedState:t},e.queue=t,t=t.dispatch=_x.bind(null,ve,t),[e.memoizedState,t]}function zn(t,e,r,s){return t={tag:t,create:e,destroy:r,deps:s,next:null},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(s=r.next,r.next=t,t.next=s,e.lastEffect=t)),t}function qf(){return wt().memoizedState}function $a(t,e,r,s){var n=Lt();ve.flags|=t,n.memoizedState=zn(1|e,r,void 0,s===void 0?null:s)}function zi(t,e,r,s){var n=wt();s=s===void 0?null:s;var a=void 0;if(je!==null){var l=je.memoizedState;if(a=l.destroy,s!==null&&$c(s,l.deps)){n.memoizedState=zn(e,r,a,s);return}}ve.flags|=t,n.memoizedState=zn(1|e,r,a,s)}function cd(t,e){return $a(8390656,8,t,e)}function zc(t,e){return zi(2048,8,t,e)}function Wf(t,e){return zi(4,2,t,e)}function Vf(t,e){return zi(4,4,t,e)}function Hf(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Gf(t,e,r){return r=r!=null?r.concat([t]):null,zi(4,4,Hf.bind(null,e,t),r)}function qc(){}function Kf(t,e){var r=wt();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&$c(e,s[1])?s[0]:(r.memoizedState=[t,e],t)}function Xf(t,e){var r=wt();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&$c(e,s[1])?s[0]:(t=t(),r.memoizedState=[t,e],t)}function Yf(t,e,r){return Yr&21?(At(r,e)||(r=ef(),ve.lanes|=r,Jr|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,et=!0),t.memoizedState=r)}function wx(t,e){var r=ne;ne=r!==0&&4>r?r:4,t(!0);var s=jl.transition;jl.transition={};try{t(!1),e()}finally{ne=r,jl.transition=s}}function Jf(){return wt().memoizedState}function bx(t,e,r){var s=wr(t);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Qf(t))Zf(e,r);else if(r=Of(t,e,r,s),r!==null){var n=He();Pt(r,t,s,n),em(r,e,s)}}function _x(t,e,r){var s=wr(t),n={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Qf(t))Zf(e,n);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var l=e.lastRenderedState,o=a(l,r);if(n.hasEagerState=!0,n.eagerState=o,At(o,l)){var c=e.interleaved;c===null?(n.next=n,Ic(e)):(n.next=c.next,c.next=n),e.interleaved=n;return}}catch{}finally{}r=Of(t,e,n,s),r!==null&&(n=He(),Pt(r,t,s,n),em(r,e,s))}}function Qf(t){var e=t.alternate;return t===ve||e!==null&&e===ve}function Zf(t,e){_n=fi=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function em(t,e,r){if(r&4194240){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,wc(t,r)}}var mi={readContext:yt,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useInsertionEffect:$e,useLayoutEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useMutableSource:$e,useSyncExternalStore:$e,useId:$e,unstable_isNewReconciler:!1},Ex={readContext:yt,useCallback:function(t,e){return Lt().memoizedState=[t,e===void 0?null:e],t},useContext:yt,useEffect:cd,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,$a(4194308,4,Hf.bind(null,e,t),r)},useLayoutEffect:function(t,e){return $a(4194308,4,t,e)},useInsertionEffect:function(t,e){return $a(4,2,t,e)},useMemo:function(t,e){var r=Lt();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var s=Lt();return e=r!==void 0?r(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=bx.bind(null,ve,t),[s.memoizedState,t]},useRef:function(t){var e=Lt();return t={current:t},e.memoizedState=t},useState:od,useDebugValue:qc,useDeferredValue:function(t){return Lt().memoizedState=t},useTransition:function(){var t=od(!1),e=t[0];return t=wx.bind(null,t[1]),Lt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var s=ve,n=Lt();if(fe){if(r===void 0)throw Error(T(407));r=r()}else{if(r=e(),Pe===null)throw Error(T(349));Yr&30||Ff(s,e,r)}n.memoizedState=r;var a={value:r,getSnapshot:e};return n.queue=a,cd(Mf.bind(null,s,a,t),[t]),s.flags|=2048,zn(9,$f.bind(null,s,a,r,e),void 0,null),r},useId:function(){var t=Lt(),e=Pe.identifierPrefix;if(fe){var r=Vt,s=Wt;r=(s&~(1<<32-Rt(s)-1)).toString(32)+r,e=":"+e+"R"+r,r=Mn++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=yx++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kx={readContext:yt,useCallback:Kf,useContext:yt,useEffect:zc,useImperativeHandle:Gf,useInsertionEffect:Wf,useLayoutEffect:Vf,useMemo:Xf,useReducer:Tl,useRef:qf,useState:function(){return Tl(Bn)},useDebugValue:qc,useDeferredValue:function(t){var e=wt();return Yf(e,je.memoizedState,t)},useTransition:function(){var t=Tl(Bn)[0],e=wt().memoizedState;return[t,e]},useMutableSource:Uf,useSyncExternalStore:Df,useId:Jf,unstable_isNewReconciler:!1},Sx={readContext:yt,useCallback:Kf,useContext:yt,useEffect:zc,useImperativeHandle:Gf,useInsertionEffect:Wf,useLayoutEffect:Vf,useMemo:Xf,useReducer:Cl,useRef:qf,useState:function(){return Cl(Bn)},useDebugValue:qc,useDeferredValue:function(t){var e=wt();return je===null?e.memoizedState=t:Yf(e,je.memoizedState,t)},useTransition:function(){var t=Cl(Bn)[0],e=wt().memoizedState;return[t,e]},useMutableSource:Uf,useSyncExternalStore:Df,useId:Jf,unstable_isNewReconciler:!1};function St(t,e){if(t&&t.defaultProps){e=ye({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function _o(t,e,r,s){e=t.memoizedState,r=r(s,e),r=r==null?e:ye({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var qi={isMounted:function(t){return(t=t._reactInternals)?es(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var s=He(),n=wr(t),a=Ht(s,n);a.payload=e,r!=null&&(a.callback=r),e=vr(t,a,n),e!==null&&(Pt(e,t,n,s),Da(e,t,n))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var s=He(),n=wr(t),a=Ht(s,n);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=vr(t,a,n),e!==null&&(Pt(e,t,n,s),Da(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=He(),s=wr(t),n=Ht(r,s);n.tag=2,e!=null&&(n.callback=e),e=vr(t,n,s),e!==null&&(Pt(e,t,s,r),Da(e,t,s))}};function ud(t,e,r,s,n,a,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,a,l):e.prototype&&e.prototype.isPureReactComponent?!In(r,s)||!In(n,a):!0}function tm(t,e,r){var s=!1,n=Sr,a=e.contextType;return typeof a=="object"&&a!==null?a=yt(a):(n=rt(e)?Kr:We.current,s=e.contextTypes,a=(s=s!=null)?Fs(t,n):Sr),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qi,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=a),e}function dd(t,e,r,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,s),e.state!==t&&qi.enqueueReplaceState(e,e.state,null)}function Eo(t,e,r,s){var n=t.stateNode;n.props=r,n.state=t.memoizedState,n.refs={},Lc(t);var a=e.contextType;typeof a=="object"&&a!==null?n.context=yt(a):(a=rt(e)?Kr:We.current,n.context=Fs(t,a)),n.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(_o(t,e,a,r),n.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(e=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),e!==n.state&&qi.enqueueReplaceState(n,n.state,null),di(t,r,n,s),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function zs(t,e){try{var r="",s=e;do r+=Z0(s),s=s.return;while(s);var n=r}catch(a){n=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:n,digest:null}}function Rl(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function ko(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Nx=typeof WeakMap=="function"?WeakMap:Map;function rm(t,e,r){r=Ht(-1,r),r.tag=3,r.payload={element:null};var s=e.value;return r.callback=function(){gi||(gi=!0,Io=s),ko(t,e)},r}function sm(t,e,r){r=Ht(-1,r),r.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var n=e.value;r.payload=function(){return s(n)},r.callback=function(){ko(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){ko(t,e),typeof s!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),r}function hd(t,e,r){var s=t.pingCache;if(s===null){s=t.pingCache=new Nx;var n=new Set;s.set(e,n)}else n=s.get(e),n===void 0&&(n=new Set,s.set(e,n));n.has(r)||(n.add(r),t=Mx.bind(null,t,e,r),e.then(t,t))}function fd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function md(t,e,r,s,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ht(-1,1),e.tag=2,vr(r,e,1))),r.lanes|=1),t)}var jx=Zt.ReactCurrentOwner,et=!1;function Ve(t,e,r,s){e.child=t===null?Af(e,null,r,s):Ms(e,t.child,r,s)}function pd(t,e,r,s,n){r=r.render;var a=e.ref;return As(e,n),s=Mc(t,e,r,s,a,n),r=Bc(),t!==null&&!et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Jt(t,e,n)):(fe&&r&&Tc(e),e.flags|=1,Ve(t,e,s,n),e.child)}function gd(t,e,r,s,n){if(t===null){var a=r.type;return typeof a=="function"&&!Jc(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,nm(t,e,a,s,n)):(t=qa(r.type,null,s,e,e.mode,n),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&n)){var l=a.memoizedProps;if(r=r.compare,r=r!==null?r:In,r(l,s)&&t.ref===e.ref)return Jt(t,e,n)}return e.flags|=1,t=br(a,s),t.ref=e.ref,t.return=e,e.child=t}function nm(t,e,r,s,n){if(t!==null){var a=t.memoizedProps;if(In(a,s)&&t.ref===e.ref)if(et=!1,e.pendingProps=s=a,(t.lanes&n)!==0)t.flags&131072&&(et=!0);else return e.lanes=t.lanes,Jt(t,e,n)}return So(t,e,r,s,n)}function am(t,e,r){var s=e.pendingProps,n=s.children,a=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},oe(js,lt),lt|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,oe(js,lt),lt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:r,oe(js,lt),lt|=s}else a!==null?(s=a.baseLanes|r,e.memoizedState=null):s=r,oe(js,lt),lt|=s;return Ve(t,e,n,r),e.child}function im(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function So(t,e,r,s,n){var a=rt(r)?Kr:We.current;return a=Fs(e,a),As(e,n),r=Mc(t,e,r,s,a,n),s=Bc(),t!==null&&!et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Jt(t,e,n)):(fe&&s&&Tc(e),e.flags|=1,Ve(t,e,r,n),e.child)}function xd(t,e,r,s,n){if(rt(r)){var a=!0;ii(e)}else a=!1;if(As(e,n),e.stateNode===null)Ma(t,e),tm(e,r,s),Eo(e,r,s,n),s=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var c=l.context,u=r.contextType;typeof u=="object"&&u!==null?u=yt(u):(u=rt(r)?Kr:We.current,u=Fs(e,u));var h=r.getDerivedStateFromProps,d=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";d||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==s||c!==u)&&dd(e,l,s,u),ir=!1;var f=e.memoizedState;l.state=f,di(e,s,l,n),c=e.memoizedState,o!==s||f!==c||tt.current||ir?(typeof h=="function"&&(_o(e,r,h,s),c=e.memoizedState),(o=ir||ud(e,r,o,s,f,c,u))?(d||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),l.props=s,l.state=c,l.context=u,s=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{l=e.stateNode,If(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:St(e.type,o),l.props=u,d=e.pendingProps,f=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=yt(c):(c=rt(r)?Kr:We.current,c=Fs(e,c));var x=r.getDerivedStateFromProps;(h=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==d||f!==c)&&dd(e,l,s,c),ir=!1,f=e.memoizedState,l.state=f,di(e,s,l,n);var v=e.memoizedState;o!==d||f!==v||tt.current||ir?(typeof x=="function"&&(_o(e,r,x,s),v=e.memoizedState),(u=ir||ud(e,r,u,s,f,v,c)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,v,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,v,c)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=v),l.props=s,l.state=v,l.context=c,s=u):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),s=!1)}return No(t,e,r,s,a,n)}function No(t,e,r,s,n,a){im(t,e);var l=(e.flags&128)!==0;if(!s&&!l)return n&&rd(e,r,!1),Jt(t,e,a);s=e.stateNode,jx.current=e;var o=l&&typeof r.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&l?(e.child=Ms(e,t.child,null,a),e.child=Ms(e,null,o,a)):Ve(t,e,o,a),e.memoizedState=s.state,n&&rd(e,r,!0),e.child}function lm(t){var e=t.stateNode;e.pendingContext?td(t,e.pendingContext,e.pendingContext!==e.context):e.context&&td(t,e.context,!1),Uc(t,e.containerInfo)}function vd(t,e,r,s,n){return $s(),Rc(n),e.flags|=256,Ve(t,e,r,s),e.child}var jo={dehydrated:null,treeContext:null,retryLane:0};function To(t){return{baseLanes:t,cachePool:null,transitions:null}}function om(t,e,r){var s=e.pendingProps,n=xe.current,a=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(n&2)!==0),o?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),oe(xe,n&1),t===null)return wo(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=s.children,t=s.fallback,a?(s=e.mode,a=e.child,l={mode:"hidden",children:l},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=Hi(l,s,0,null),t=Hr(t,s,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=To(r),e.memoizedState=jo,t):Wc(e,l));if(n=t.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return Tx(t,e,l,s,o,n,r);if(a){a=s.fallback,l=e.mode,n=t.child,o=n.sibling;var c={mode:"hidden",children:s.children};return!(l&1)&&e.child!==n?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=br(n,c),s.subtreeFlags=n.subtreeFlags&14680064),o!==null?a=br(o,a):(a=Hr(a,l,r,null),a.flags|=2),a.return=e,s.return=e,s.sibling=a,e.child=s,s=a,a=e.child,l=t.child.memoizedState,l=l===null?To(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~r,e.memoizedState=jo,s}return a=t.child,t=a.sibling,s=br(a,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=r),s.return=e,s.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=s,e.memoizedState=null,s}function Wc(t,e){return e=Hi({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function va(t,e,r,s){return s!==null&&Rc(s),Ms(e,t.child,null,r),t=Wc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Tx(t,e,r,s,n,a,l){if(r)return e.flags&256?(e.flags&=-257,s=Rl(Error(T(422))),va(t,e,l,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=s.fallback,n=e.mode,s=Hi({mode:"visible",children:s.children},n,0,null),a=Hr(a,n,l,null),a.flags|=2,s.return=e,a.return=e,s.sibling=a,e.child=s,e.mode&1&&Ms(e,t.child,null,l),e.child.memoizedState=To(l),e.memoizedState=jo,a);if(!(e.mode&1))return va(t,e,l,null);if(n.data==="$!"){if(s=n.nextSibling&&n.nextSibling.dataset,s)var o=s.dgst;return s=o,a=Error(T(419)),s=Rl(a,s,void 0),va(t,e,l,s)}if(o=(l&t.childLanes)!==0,et||o){if(s=Pe,s!==null){switch(l&-l){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(s.suspendedLanes|l)?0:n,n!==0&&n!==a.retryLane&&(a.retryLane=n,Yt(t,n),Pt(s,t,n,-1))}return Yc(),s=Rl(Error(T(421))),va(t,e,l,s)}return n.data==="$?"?(e.flags|=128,e.child=t.child,e=Bx.bind(null,t),n._reactRetry=e,null):(t=a.treeContext,ct=xr(n.nextSibling),ut=e,fe=!0,Ct=null,t!==null&&(pt[gt++]=Wt,pt[gt++]=Vt,pt[gt++]=Xr,Wt=t.id,Vt=t.overflow,Xr=e),e=Wc(e,s.children),e.flags|=4096,e)}function yd(t,e,r){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),bo(t.return,e,r)}function Pl(t,e,r,s,n){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:n}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=r,a.tailMode=n)}function cm(t,e,r){var s=e.pendingProps,n=s.revealOrder,a=s.tail;if(Ve(t,e,s.children,r),s=xe.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yd(t,r,e);else if(t.tag===19)yd(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(oe(xe,s),!(e.mode&1))e.memoizedState=null;else switch(n){case"forwards":for(r=e.child,n=null;r!==null;)t=r.alternate,t!==null&&hi(t)===null&&(n=r),r=r.sibling;r=n,r===null?(n=e.child,e.child=null):(n=r.sibling,r.sibling=null),Pl(e,!1,n,r,a);break;case"backwards":for(r=null,n=e.child,e.child=null;n!==null;){if(t=n.alternate,t!==null&&hi(t)===null){e.child=n;break}t=n.sibling,n.sibling=r,r=n,n=t}Pl(e,!0,r,null,a);break;case"together":Pl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ma(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Jt(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Jr|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(T(153));if(e.child!==null){for(t=e.child,r=br(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=br(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Cx(t,e,r){switch(e.tag){case 3:lm(e),$s();break;case 5:Lf(e);break;case 1:rt(e.type)&&ii(e);break;case 4:Uc(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,n=e.memoizedProps.value;oe(ci,s._currentValue),s._currentValue=n;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(oe(xe,xe.current&1),e.flags|=128,null):r&e.child.childLanes?om(t,e,r):(oe(xe,xe.current&1),t=Jt(t,e,r),t!==null?t.sibling:null);oe(xe,xe.current&1);break;case 19:if(s=(r&e.childLanes)!==0,t.flags&128){if(s)return cm(t,e,r);e.flags|=128}if(n=e.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),oe(xe,xe.current),s)break;return null;case 22:case 23:return e.lanes=0,am(t,e,r)}return Jt(t,e,r)}var um,Co,dm,hm;um=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Co=function(){};dm=function(t,e,r,s){var n=t.memoizedProps;if(n!==s){t=e.stateNode,qr($t.current);var a=null;switch(r){case"input":n=Yl(t,n),s=Yl(t,s),a=[];break;case"select":n=ye({},n,{value:void 0}),s=ye({},s,{value:void 0}),a=[];break;case"textarea":n=Zl(t,n),s=Zl(t,s),a=[];break;default:typeof n.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=ni)}to(r,s);var l;r=null;for(u in n)if(!s.hasOwnProperty(u)&&n.hasOwnProperty(u)&&n[u]!=null)if(u==="style"){var o=n[u];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(jn.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in s){var c=s[u];if(o=n!=null?n[u]:void 0,s.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(jn.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ce("scroll",t),a||o===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};hm=function(t,e,r,s){r!==s&&(e.flags|=4)};function on(t,e){if(!fe)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Me(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,s=0;if(e)for(var n=t.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags&14680064,s|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=s,t.childLanes=r,e}function Rx(t,e,r){var s=e.pendingProps;switch(Cc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(e),null;case 1:return rt(e.type)&&ai(),Me(e),null;case 3:return s=e.stateNode,Bs(),ue(tt),ue(We),Fc(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(ga(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ct!==null&&(Do(Ct),Ct=null))),Co(t,e),Me(e),null;case 5:Dc(e);var n=qr($n.current);if(r=e.type,t!==null&&e.stateNode!=null)dm(t,e,r,s,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(T(166));return Me(e),null}if(t=qr($t.current),ga(e)){s=e.stateNode,r=e.type;var a=e.memoizedProps;switch(s[Dt]=e,s[Dn]=a,t=(e.mode&1)!==0,r){case"dialog":ce("cancel",s),ce("close",s);break;case"iframe":case"object":case"embed":ce("load",s);break;case"video":case"audio":for(n=0;n<fn.length;n++)ce(fn[n],s);break;case"source":ce("error",s);break;case"img":case"image":case"link":ce("error",s),ce("load",s);break;case"details":ce("toggle",s);break;case"input":Tu(s,a),ce("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},ce("invalid",s);break;case"textarea":Ru(s,a),ce("invalid",s)}to(r,a),n=null;for(var l in a)if(a.hasOwnProperty(l)){var o=a[l];l==="children"?typeof o=="string"?s.textContent!==o&&(a.suppressHydrationWarning!==!0&&pa(s.textContent,o,t),n=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&pa(s.textContent,o,t),n=["children",""+o]):jn.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&ce("scroll",s)}switch(r){case"input":la(s),Cu(s,a,!0);break;case"textarea":la(s),Pu(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=ni)}s=n,e.updateQueue=s,s!==null&&(e.flags|=4)}else{l=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$h(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=l.createElement(r,{is:s.is}):(t=l.createElement(r),r==="select"&&(l=t,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):t=l.createElementNS(t,r),t[Dt]=e,t[Dn]=s,um(t,e,!1,!1),e.stateNode=t;e:{switch(l=ro(r,s),r){case"dialog":ce("cancel",t),ce("close",t),n=s;break;case"iframe":case"object":case"embed":ce("load",t),n=s;break;case"video":case"audio":for(n=0;n<fn.length;n++)ce(fn[n],t);n=s;break;case"source":ce("error",t),n=s;break;case"img":case"image":case"link":ce("error",t),ce("load",t),n=s;break;case"details":ce("toggle",t),n=s;break;case"input":Tu(t,s),n=Yl(t,s),ce("invalid",t);break;case"option":n=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},n=ye({},s,{value:void 0}),ce("invalid",t);break;case"textarea":Ru(t,s),n=Zl(t,s),ce("invalid",t);break;default:n=s}to(r,n),o=n;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?zh(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Mh(t,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Tn(t,c):typeof c=="number"&&Tn(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(jn.hasOwnProperty(a)?c!=null&&a==="onScroll"&&ce("scroll",t):c!=null&&mc(t,a,c,l))}switch(r){case"input":la(t),Cu(t,s,!1);break;case"textarea":la(t),Pu(t);break;case"option":s.value!=null&&t.setAttribute("value",""+kr(s.value));break;case"select":t.multiple=!!s.multiple,a=s.value,a!=null?Ts(t,!!s.multiple,a,!1):s.defaultValue!=null&&Ts(t,!!s.multiple,s.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=ni)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Me(e),null;case 6:if(t&&e.stateNode!=null)hm(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(T(166));if(r=qr($n.current),qr($t.current),ga(e)){if(s=e.stateNode,r=e.memoizedProps,s[Dt]=e,(a=s.nodeValue!==r)&&(t=ut,t!==null))switch(t.tag){case 3:pa(s.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pa(s.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Dt]=e,e.stateNode=s}return Me(e),null;case 13:if(ue(xe),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(fe&&ct!==null&&e.mode&1&&!(e.flags&128))Rf(),$s(),e.flags|=98560,a=!1;else if(a=ga(e),s!==null&&s.dehydrated!==null){if(t===null){if(!a)throw Error(T(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(T(317));a[Dt]=e}else $s(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Me(e),a=!1}else Ct!==null&&(Do(Ct),Ct=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||xe.current&1?Te===0&&(Te=3):Yc())),e.updateQueue!==null&&(e.flags|=4),Me(e),null);case 4:return Bs(),Co(t,e),t===null&&Ln(e.stateNode.containerInfo),Me(e),null;case 10:return Oc(e.type._context),Me(e),null;case 17:return rt(e.type)&&ai(),Me(e),null;case 19:if(ue(xe),a=e.memoizedState,a===null)return Me(e),null;if(s=(e.flags&128)!==0,l=a.rendering,l===null)if(s)on(a,!1);else{if(Te!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=hi(t),l!==null){for(e.flags|=128,on(a,!1),s=l.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=r,r=e.child;r!==null;)a=r,t=s,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return oe(xe,xe.current&1|2),e.child}t=t.sibling}a.tail!==null&&_e()>qs&&(e.flags|=128,s=!0,on(a,!1),e.lanes=4194304)}else{if(!s)if(t=hi(l),t!==null){if(e.flags|=128,s=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),on(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!fe)return Me(e),null}else 2*_e()-a.renderingStartTime>qs&&r!==1073741824&&(e.flags|=128,s=!0,on(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(r=a.last,r!==null?r.sibling=l:e.child=l,a.last=l)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=_e(),e.sibling=null,r=xe.current,oe(xe,s?r&1|2:r&1),e):(Me(e),null);case 22:case 23:return Xc(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?lt&1073741824&&(Me(e),e.subtreeFlags&6&&(e.flags|=8192)):Me(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function Px(t,e){switch(Cc(e),e.tag){case 1:return rt(e.type)&&ai(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bs(),ue(tt),ue(We),Fc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Dc(e),null;case 13:if(ue(xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(T(340));$s()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ue(xe),null;case 4:return Bs(),null;case 10:return Oc(e.type._context),null;case 22:case 23:return Xc(),null;case 24:return null;default:return null}}var ya=!1,ze=!1,Ax=typeof WeakSet=="function"?WeakSet:Set,I=null;function Ns(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){we(t,e,s)}else r.current=null}function Ro(t,e,r){try{r()}catch(s){we(t,e,s)}}var wd=!1;function Ox(t,e){if(fo=ti,t=xf(),jc(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var n=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var x;d!==r||n!==0&&d.nodeType!==3||(o=l+n),d!==a||s!==0&&d.nodeType!==3||(c=l+s),d.nodeType===3&&(l+=d.nodeValue.length),(x=d.firstChild)!==null;)f=d,d=x;for(;;){if(d===t)break t;if(f===r&&++u===n&&(o=l),f===a&&++h===s&&(c=l),(x=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=x}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(mo={focusedElem:t,selectionRange:r},ti=!1,I=e;I!==null;)if(e=I,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,I=t;else for(;I!==null;){e=I;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,w=v.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:St(e.type,y),w);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(_){we(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,I=t;break}I=e.return}return v=wd,wd=!1,v}function En(t,e,r){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&t)===t){var a=n.destroy;n.destroy=void 0,a!==void 0&&Ro(e,r,a)}n=n.next}while(n!==s)}}function Wi(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var s=r.create;r.destroy=s()}r=r.next}while(r!==e)}}function Po(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function fm(t){var e=t.alternate;e!==null&&(t.alternate=null,fm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Dt],delete e[Dn],delete e[xo],delete e[px],delete e[gx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function mm(t){return t.tag===5||t.tag===3||t.tag===4}function bd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ao(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ni));else if(s!==4&&(t=t.child,t!==null))for(Ao(t,e,r),t=t.sibling;t!==null;)Ao(t,e,r),t=t.sibling}function Oo(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Oo(t,e,r),t=t.sibling;t!==null;)Oo(t,e,r),t=t.sibling}var Le=null,jt=!1;function nr(t,e,r){for(r=r.child;r!==null;)pm(t,e,r),r=r.sibling}function pm(t,e,r){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Ui,r)}catch{}switch(r.tag){case 5:ze||Ns(r,e);case 6:var s=Le,n=jt;Le=null,nr(t,e,r),Le=s,jt=n,Le!==null&&(jt?(t=Le,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Le.removeChild(r.stateNode));break;case 18:Le!==null&&(jt?(t=Le,r=r.stateNode,t.nodeType===8?kl(t.parentNode,r):t.nodeType===1&&kl(t,r),An(t)):kl(Le,r.stateNode));break;case 4:s=Le,n=jt,Le=r.stateNode.containerInfo,jt=!0,nr(t,e,r),Le=s,jt=n;break;case 0:case 11:case 14:case 15:if(!ze&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){n=s=s.next;do{var a=n,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&Ro(r,e,l),n=n.next}while(n!==s)}nr(t,e,r);break;case 1:if(!ze&&(Ns(r,e),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(o){we(r,e,o)}nr(t,e,r);break;case 21:nr(t,e,r);break;case 22:r.mode&1?(ze=(s=ze)||r.memoizedState!==null,nr(t,e,r),ze=s):nr(t,e,r);break;default:nr(t,e,r)}}function _d(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Ax),e.forEach(function(s){var n=zx.bind(null,t,s);r.has(s)||(r.add(s),s.then(n,n))})}}function Et(t,e){var r=e.deletions;if(r!==null)for(var s=0;s<r.length;s++){var n=r[s];try{var a=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:Le=o.stateNode,jt=!1;break e;case 3:Le=o.stateNode.containerInfo,jt=!0;break e;case 4:Le=o.stateNode.containerInfo,jt=!0;break e}o=o.return}if(Le===null)throw Error(T(160));pm(a,l,n),Le=null,jt=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(u){we(n,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gm(e,t),e=e.sibling}function gm(t,e){var r=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Et(e,t),It(t),s&4){try{En(3,t,t.return),Wi(3,t)}catch(y){we(t,t.return,y)}try{En(5,t,t.return)}catch(y){we(t,t.return,y)}}break;case 1:Et(e,t),It(t),s&512&&r!==null&&Ns(r,r.return);break;case 5:if(Et(e,t),It(t),s&512&&r!==null&&Ns(r,r.return),t.flags&32){var n=t.stateNode;try{Tn(n,"")}catch(y){we(t,t.return,y)}}if(s&4&&(n=t.stateNode,n!=null)){var a=t.memoizedProps,l=r!==null?r.memoizedProps:a,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&Dh(n,a),ro(o,l);var u=ro(o,a);for(l=0;l<c.length;l+=2){var h=c[l],d=c[l+1];h==="style"?zh(n,d):h==="dangerouslySetInnerHTML"?Mh(n,d):h==="children"?Tn(n,d):mc(n,h,d,u)}switch(o){case"input":Jl(n,a);break;case"textarea":Fh(n,a);break;case"select":var f=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!a.multiple;var x=a.value;x!=null?Ts(n,!!a.multiple,x,!1):f!==!!a.multiple&&(a.defaultValue!=null?Ts(n,!!a.multiple,a.defaultValue,!0):Ts(n,!!a.multiple,a.multiple?[]:"",!1))}n[Dn]=a}catch(y){we(t,t.return,y)}}break;case 6:if(Et(e,t),It(t),s&4){if(t.stateNode===null)throw Error(T(162));n=t.stateNode,a=t.memoizedProps;try{n.nodeValue=a}catch(y){we(t,t.return,y)}}break;case 3:if(Et(e,t),It(t),s&4&&r!==null&&r.memoizedState.isDehydrated)try{An(e.containerInfo)}catch(y){we(t,t.return,y)}break;case 4:Et(e,t),It(t);break;case 13:Et(e,t),It(t),n=t.child,n.flags&8192&&(a=n.memoizedState!==null,n.stateNode.isHidden=a,!a||n.alternate!==null&&n.alternate.memoizedState!==null||(Gc=_e())),s&4&&_d(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(ze=(u=ze)||h,Et(e,t),ze=u):Et(e,t),It(t),s&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(I=t,h=t.child;h!==null;){for(d=I=h;I!==null;){switch(f=I,x=f.child,f.tag){case 0:case 11:case 14:case 15:En(4,f,f.return);break;case 1:Ns(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){s=f,r=f.return;try{e=s,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){we(s,r,y)}}break;case 5:Ns(f,f.return);break;case 22:if(f.memoizedState!==null){kd(d);continue}}x!==null?(x.return=f,I=x):kd(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{n=d.stateNode,u?(a=n.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=d.stateNode,c=d.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Bh("display",l))}catch(y){we(t,t.return,y)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){we(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Et(e,t),It(t),s&4&&_d(t);break;case 21:break;default:Et(e,t),It(t)}}function It(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(mm(r)){var s=r;break e}r=r.return}throw Error(T(160))}switch(s.tag){case 5:var n=s.stateNode;s.flags&32&&(Tn(n,""),s.flags&=-33);var a=bd(t);Oo(t,a,n);break;case 3:case 4:var l=s.stateNode.containerInfo,o=bd(t);Ao(t,o,l);break;default:throw Error(T(161))}}catch(c){we(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ix(t,e,r){I=t,xm(t)}function xm(t,e,r){for(var s=(t.mode&1)!==0;I!==null;){var n=I,a=n.child;if(n.tag===22&&s){var l=n.memoizedState!==null||ya;if(!l){var o=n.alternate,c=o!==null&&o.memoizedState!==null||ze;o=ya;var u=ze;if(ya=l,(ze=c)&&!u)for(I=n;I!==null;)l=I,c=l.child,l.tag===22&&l.memoizedState!==null?Sd(n):c!==null?(c.return=l,I=c):Sd(n);for(;a!==null;)I=a,xm(a),a=a.sibling;I=n,ya=o,ze=u}Ed(t)}else n.subtreeFlags&8772&&a!==null?(a.return=n,I=a):Ed(t)}}function Ed(t){for(;I!==null;){var e=I;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ze||Wi(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!ze)if(r===null)s.componentDidMount();else{var n=e.elementType===e.type?r.memoizedProps:St(e.type,r.memoizedProps);s.componentDidUpdate(n,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&ld(e,a,s);break;case 3:var l=e.updateQueue;if(l!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}ld(e,l,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&An(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}ze||e.flags&512&&Po(e)}catch(f){we(e,e.return,f)}}if(e===t){I=null;break}if(r=e.sibling,r!==null){r.return=e.return,I=r;break}I=e.return}}function kd(t){for(;I!==null;){var e=I;if(e===t){I=null;break}var r=e.sibling;if(r!==null){r.return=e.return,I=r;break}I=e.return}}function Sd(t){for(;I!==null;){var e=I;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Wi(4,e)}catch(c){we(e,r,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var n=e.return;try{s.componentDidMount()}catch(c){we(e,n,c)}}var a=e.return;try{Po(e)}catch(c){we(e,a,c)}break;case 5:var l=e.return;try{Po(e)}catch(c){we(e,l,c)}}}catch(c){we(e,e.return,c)}if(e===t){I=null;break}var o=e.sibling;if(o!==null){o.return=e.return,I=o;break}I=e.return}}var Lx=Math.ceil,pi=Zt.ReactCurrentDispatcher,Vc=Zt.ReactCurrentOwner,vt=Zt.ReactCurrentBatchConfig,ee=0,Pe=null,Ne=null,Ue=0,lt=0,js=jr(0),Te=0,qn=null,Jr=0,Vi=0,Hc=0,kn=null,Qe=null,Gc=0,qs=1/0,zt=null,gi=!1,Io=null,yr=null,wa=!1,hr=null,xi=0,Sn=0,Lo=null,Ba=-1,za=0;function He(){return ee&6?_e():Ba!==-1?Ba:Ba=_e()}function wr(t){return t.mode&1?ee&2&&Ue!==0?Ue&-Ue:vx.transition!==null?(za===0&&(za=ef()),za):(t=ne,t!==0||(t=window.event,t=t===void 0?16:of(t.type)),t):1}function Pt(t,e,r,s){if(50<Sn)throw Sn=0,Lo=null,Error(T(185));Jn(t,r,s),(!(ee&2)||t!==Pe)&&(t===Pe&&(!(ee&2)&&(Vi|=r),Te===4&&or(t,Ue)),st(t,s),r===1&&ee===0&&!(e.mode&1)&&(qs=_e()+500,Bi&&Tr()))}function st(t,e){var r=t.callbackNode;vg(t,e);var s=ei(t,t===Pe?Ue:0);if(s===0)r!==null&&Iu(r),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(r!=null&&Iu(r),e===1)t.tag===0?xx(Nd.bind(null,t)):jf(Nd.bind(null,t)),fx(function(){!(ee&6)&&Tr()}),r=null;else{switch(tf(s)){case 1:r=yc;break;case 4:r=Qh;break;case 16:r=Za;break;case 536870912:r=Zh;break;default:r=Za}r=Sm(r,vm.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function vm(t,e){if(Ba=-1,za=0,ee&6)throw Error(T(327));var r=t.callbackNode;if(Os()&&t.callbackNode!==r)return null;var s=ei(t,t===Pe?Ue:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=vi(t,s);else{e=s;var n=ee;ee|=2;var a=wm();(Pe!==t||Ue!==e)&&(zt=null,qs=_e()+500,Vr(t,e));do try{Fx();break}catch(o){ym(t,o)}while(!0);Ac(),pi.current=a,ee=n,Ne!==null?e=0:(Pe=null,Ue=0,e=Te)}if(e!==0){if(e===2&&(n=lo(t),n!==0&&(s=n,e=Uo(t,n))),e===1)throw r=qn,Vr(t,0),or(t,s),st(t,_e()),r;if(e===6)or(t,s);else{if(n=t.current.alternate,!(s&30)&&!Ux(n)&&(e=vi(t,s),e===2&&(a=lo(t),a!==0&&(s=a,e=Uo(t,a))),e===1))throw r=qn,Vr(t,0),or(t,s),st(t,_e()),r;switch(t.finishedWork=n,t.finishedLanes=s,e){case 0:case 1:throw Error(T(345));case 2:Lr(t,Qe,zt);break;case 3:if(or(t,s),(s&130023424)===s&&(e=Gc+500-_e(),10<e)){if(ei(t,0)!==0)break;if(n=t.suspendedLanes,(n&s)!==s){He(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=go(Lr.bind(null,t,Qe,zt),e);break}Lr(t,Qe,zt);break;case 4:if(or(t,s),(s&4194240)===s)break;for(e=t.eventTimes,n=-1;0<s;){var l=31-Rt(s);a=1<<l,l=e[l],l>n&&(n=l),s&=~a}if(s=n,s=_e()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Lx(s/1960))-s,10<s){t.timeoutHandle=go(Lr.bind(null,t,Qe,zt),s);break}Lr(t,Qe,zt);break;case 5:Lr(t,Qe,zt);break;default:throw Error(T(329))}}}return st(t,_e()),t.callbackNode===r?vm.bind(null,t):null}function Uo(t,e){var r=kn;return t.current.memoizedState.isDehydrated&&(Vr(t,e).flags|=256),t=vi(t,e),t!==2&&(e=Qe,Qe=r,e!==null&&Do(e)),t}function Do(t){Qe===null?Qe=t:Qe.push.apply(Qe,t)}function Ux(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var n=r[s],a=n.getSnapshot;n=n.value;try{if(!At(a(),n))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function or(t,e){for(e&=~Hc,e&=~Vi,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Rt(e),s=1<<r;t[r]=-1,e&=~s}}function Nd(t){if(ee&6)throw Error(T(327));Os();var e=ei(t,0);if(!(e&1))return st(t,_e()),null;var r=vi(t,e);if(t.tag!==0&&r===2){var s=lo(t);s!==0&&(e=s,r=Uo(t,s))}if(r===1)throw r=qn,Vr(t,0),or(t,e),st(t,_e()),r;if(r===6)throw Error(T(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Lr(t,Qe,zt),st(t,_e()),null}function Kc(t,e){var r=ee;ee|=1;try{return t(e)}finally{ee=r,ee===0&&(qs=_e()+500,Bi&&Tr())}}function Qr(t){hr!==null&&hr.tag===0&&!(ee&6)&&Os();var e=ee;ee|=1;var r=vt.transition,s=ne;try{if(vt.transition=null,ne=1,t)return t()}finally{ne=s,vt.transition=r,ee=e,!(ee&6)&&Tr()}}function Xc(){lt=js.current,ue(js)}function Vr(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,hx(r)),Ne!==null)for(r=Ne.return;r!==null;){var s=r;switch(Cc(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&ai();break;case 3:Bs(),ue(tt),ue(We),Fc();break;case 5:Dc(s);break;case 4:Bs();break;case 13:ue(xe);break;case 19:ue(xe);break;case 10:Oc(s.type._context);break;case 22:case 23:Xc()}r=r.return}if(Pe=t,Ne=t=br(t.current,null),Ue=lt=e,Te=0,qn=null,Hc=Vi=Jr=0,Qe=kn=null,zr!==null){for(e=0;e<zr.length;e++)if(r=zr[e],s=r.interleaved,s!==null){r.interleaved=null;var n=s.next,a=r.pending;if(a!==null){var l=a.next;a.next=n,s.next=l}r.pending=s}zr=null}return t}function ym(t,e){do{var r=Ne;try{if(Ac(),Fa.current=mi,fi){for(var s=ve.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}fi=!1}if(Yr=0,Re=je=ve=null,_n=!1,Mn=0,Vc.current=null,r===null||r.return===null){Te=1,qn=e,Ne=null;break}e:{var a=t,l=r.return,o=r,c=e;if(e=Ue,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=o,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=fd(l);if(x!==null){x.flags&=-257,md(x,l,o,a,e),x.mode&1&&hd(a,u,e),e=x,c=u;var v=e.updateQueue;if(v===null){var y=new Set;y.add(c),e.updateQueue=y}else v.add(c);break e}else{if(!(e&1)){hd(a,u,e),Yc();break e}c=Error(T(426))}}else if(fe&&o.mode&1){var w=fd(l);if(w!==null){!(w.flags&65536)&&(w.flags|=256),md(w,l,o,a,e),Rc(zs(c,o));break e}}a=c=zs(c,o),Te!==4&&(Te=2),kn===null?kn=[a]:kn.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var g=rm(a,c,e);id(a,g);break e;case 1:o=c;var p=a.type,m=a.stateNode;if(!(a.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(yr===null||!yr.has(m)))){a.flags|=65536,e&=-e,a.lanes|=e;var _=sm(a,o,e);id(a,_);break e}}a=a.return}while(a!==null)}_m(r)}catch(N){e=N,Ne===r&&r!==null&&(Ne=r=r.return);continue}break}while(!0)}function wm(){var t=pi.current;return pi.current=mi,t===null?mi:t}function Yc(){(Te===0||Te===3||Te===2)&&(Te=4),Pe===null||!(Jr&268435455)&&!(Vi&268435455)||or(Pe,Ue)}function vi(t,e){var r=ee;ee|=2;var s=wm();(Pe!==t||Ue!==e)&&(zt=null,Vr(t,e));do try{Dx();break}catch(n){ym(t,n)}while(!0);if(Ac(),ee=r,pi.current=s,Ne!==null)throw Error(T(261));return Pe=null,Ue=0,Te}function Dx(){for(;Ne!==null;)bm(Ne)}function Fx(){for(;Ne!==null&&!cg();)bm(Ne)}function bm(t){var e=km(t.alternate,t,lt);t.memoizedProps=t.pendingProps,e===null?_m(t):Ne=e,Vc.current=null}function _m(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Px(r,e),r!==null){r.flags&=32767,Ne=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Te=6,Ne=null;return}}else if(r=Rx(r,e,lt),r!==null){Ne=r;return}if(e=e.sibling,e!==null){Ne=e;return}Ne=e=t}while(e!==null);Te===0&&(Te=5)}function Lr(t,e,r){var s=ne,n=vt.transition;try{vt.transition=null,ne=1,$x(t,e,r,s)}finally{vt.transition=n,ne=s}return null}function $x(t,e,r,s){do Os();while(hr!==null);if(ee&6)throw Error(T(327));r=t.finishedWork;var n=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(T(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(yg(t,a),t===Pe&&(Ne=Pe=null,Ue=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||wa||(wa=!0,Sm(Za,function(){return Os(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=vt.transition,vt.transition=null;var l=ne;ne=1;var o=ee;ee|=4,Vc.current=null,Ox(t,r),gm(r,t),ax(mo),ti=!!fo,mo=fo=null,t.current=r,Ix(r),ug(),ee=o,ne=l,vt.transition=a}else t.current=r;if(wa&&(wa=!1,hr=t,xi=n),a=t.pendingLanes,a===0&&(yr=null),fg(r.stateNode),st(t,_e()),e!==null)for(s=t.onRecoverableError,r=0;r<e.length;r++)n=e[r],s(n.value,{componentStack:n.stack,digest:n.digest});if(gi)throw gi=!1,t=Io,Io=null,t;return xi&1&&t.tag!==0&&Os(),a=t.pendingLanes,a&1?t===Lo?Sn++:(Sn=0,Lo=t):Sn=0,Tr(),null}function Os(){if(hr!==null){var t=tf(xi),e=vt.transition,r=ne;try{if(vt.transition=null,ne=16>t?16:t,hr===null)var s=!1;else{if(t=hr,hr=null,xi=0,ee&6)throw Error(T(331));var n=ee;for(ee|=4,I=t.current;I!==null;){var a=I,l=a.child;if(I.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(I=u;I!==null;){var h=I;switch(h.tag){case 0:case 11:case 15:En(8,h,a)}var d=h.child;if(d!==null)d.return=h,I=d;else for(;I!==null;){h=I;var f=h.sibling,x=h.return;if(fm(h),h===u){I=null;break}if(f!==null){f.return=x,I=f;break}I=x}}}var v=a.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}I=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,I=l;else e:for(;I!==null;){if(a=I,a.flags&2048)switch(a.tag){case 0:case 11:case 15:En(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,I=g;break e}I=a.return}}var p=t.current;for(I=p;I!==null;){l=I;var m=l.child;if(l.subtreeFlags&2064&&m!==null)m.return=l,I=m;else e:for(l=p;I!==null;){if(o=I,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Wi(9,o)}}catch(N){we(o,o.return,N)}if(o===l){I=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,I=_;break e}I=o.return}}if(ee=n,Tr(),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Ui,t)}catch{}s=!0}return s}finally{ne=r,vt.transition=e}}return!1}function jd(t,e,r){e=zs(r,e),e=rm(t,e,1),t=vr(t,e,1),e=He(),t!==null&&(Jn(t,1,e),st(t,e))}function we(t,e,r){if(t.tag===3)jd(t,t,r);else for(;e!==null;){if(e.tag===3){jd(e,t,r);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(yr===null||!yr.has(s))){t=zs(r,t),t=sm(e,t,1),e=vr(e,t,1),t=He(),e!==null&&(Jn(e,1,t),st(e,t));break}}e=e.return}}function Mx(t,e,r){var s=t.pingCache;s!==null&&s.delete(e),e=He(),t.pingedLanes|=t.suspendedLanes&r,Pe===t&&(Ue&r)===r&&(Te===4||Te===3&&(Ue&130023424)===Ue&&500>_e()-Gc?Vr(t,0):Hc|=r),st(t,e)}function Em(t,e){e===0&&(t.mode&1?(e=ua,ua<<=1,!(ua&130023424)&&(ua=4194304)):e=1);var r=He();t=Yt(t,e),t!==null&&(Jn(t,e,r),st(t,r))}function Bx(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Em(t,r)}function zx(t,e){var r=0;switch(t.tag){case 13:var s=t.stateNode,n=t.memoizedState;n!==null&&(r=n.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(T(314))}s!==null&&s.delete(e),Em(t,r)}var km;km=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||tt.current)et=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return et=!1,Cx(t,e,r);et=!!(t.flags&131072)}else et=!1,fe&&e.flags&1048576&&Tf(e,oi,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Ma(t,e),t=e.pendingProps;var n=Fs(e,We.current);As(e,r),n=Mc(null,e,s,t,n,r);var a=Bc();return e.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rt(s)?(a=!0,ii(e)):a=!1,e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Lc(e),n.updater=qi,e.stateNode=n,n._reactInternals=e,Eo(e,s,t,r),e=No(null,e,s,!0,a,r)):(e.tag=0,fe&&a&&Tc(e),Ve(null,e,n,r),e=e.child),e;case 16:s=e.elementType;e:{switch(Ma(t,e),t=e.pendingProps,n=s._init,s=n(s._payload),e.type=s,n=e.tag=Wx(s),t=St(s,t),n){case 0:e=So(null,e,s,t,r);break e;case 1:e=xd(null,e,s,t,r);break e;case 11:e=pd(null,e,s,t,r);break e;case 14:e=gd(null,e,s,St(s.type,t),r);break e}throw Error(T(306,s,""))}return e;case 0:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:St(s,n),So(t,e,s,n,r);case 1:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:St(s,n),xd(t,e,s,n,r);case 3:e:{if(lm(e),t===null)throw Error(T(387));s=e.pendingProps,a=e.memoizedState,n=a.element,If(t,e),di(e,s,null,r);var l=e.memoizedState;if(s=l.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){n=zs(Error(T(423)),e),e=vd(t,e,s,r,n);break e}else if(s!==n){n=zs(Error(T(424)),e),e=vd(t,e,s,r,n);break e}else for(ct=xr(e.stateNode.containerInfo.firstChild),ut=e,fe=!0,Ct=null,r=Af(e,null,s,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if($s(),s===n){e=Jt(t,e,r);break e}Ve(t,e,s,r)}e=e.child}return e;case 5:return Lf(e),t===null&&wo(e),s=e.type,n=e.pendingProps,a=t!==null?t.memoizedProps:null,l=n.children,po(s,n)?l=null:a!==null&&po(s,a)&&(e.flags|=32),im(t,e),Ve(t,e,l,r),e.child;case 6:return t===null&&wo(e),null;case 13:return om(t,e,r);case 4:return Uc(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Ms(e,null,s,r):Ve(t,e,s,r),e.child;case 11:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:St(s,n),pd(t,e,s,n,r);case 7:return Ve(t,e,e.pendingProps,r),e.child;case 8:return Ve(t,e,e.pendingProps.children,r),e.child;case 12:return Ve(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(s=e.type._context,n=e.pendingProps,a=e.memoizedProps,l=n.value,oe(ci,s._currentValue),s._currentValue=l,a!==null)if(At(a.value,l)){if(a.children===n.children&&!tt.current){e=Jt(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){l=a.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(a.tag===1){c=Ht(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),bo(a.return,r,e),o.lanes|=r;break}c=c.next}}else if(a.tag===10)l=a.type===e.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(T(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),bo(l,r,e),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===e){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}Ve(t,e,n.children,r),e=e.child}return e;case 9:return n=e.type,s=e.pendingProps.children,As(e,r),n=yt(n),s=s(n),e.flags|=1,Ve(t,e,s,r),e.child;case 14:return s=e.type,n=St(s,e.pendingProps),n=St(s.type,n),gd(t,e,s,n,r);case 15:return nm(t,e,e.type,e.pendingProps,r);case 17:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:St(s,n),Ma(t,e),e.tag=1,rt(s)?(t=!0,ii(e)):t=!1,As(e,r),tm(e,s,n),Eo(e,s,n,r),No(null,e,s,!0,t,r);case 19:return cm(t,e,r);case 22:return am(t,e,r)}throw Error(T(156,e.tag))};function Sm(t,e){return Jh(t,e)}function qx(t,e,r,s){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xt(t,e,r,s){return new qx(t,e,r,s)}function Jc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Wx(t){if(typeof t=="function")return Jc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gc)return 11;if(t===xc)return 14}return 2}function br(t,e){var r=t.alternate;return r===null?(r=xt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function qa(t,e,r,s,n,a){var l=2;if(s=t,typeof t=="function")Jc(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case xs:return Hr(r.children,n,a,e);case pc:l=8,n|=8;break;case Hl:return t=xt(12,r,e,n|2),t.elementType=Hl,t.lanes=a,t;case Gl:return t=xt(13,r,e,n),t.elementType=Gl,t.lanes=a,t;case Kl:return t=xt(19,r,e,n),t.elementType=Kl,t.lanes=a,t;case Ih:return Hi(r,n,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ah:l=10;break e;case Oh:l=9;break e;case gc:l=11;break e;case xc:l=14;break e;case ar:l=16,s=null;break e}throw Error(T(130,t==null?t:typeof t,""))}return e=xt(l,r,e,n),e.elementType=t,e.type=s,e.lanes=a,e}function Hr(t,e,r,s){return t=xt(7,t,s,e),t.lanes=r,t}function Hi(t,e,r,s){return t=xt(22,t,s,e),t.elementType=Ih,t.lanes=r,t.stateNode={isHidden:!1},t}function Al(t,e,r){return t=xt(6,t,null,e),t.lanes=r,t}function Ol(t,e,r){return e=xt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Vx(t,e,r,s,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fl(0),this.expirationTimes=fl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fl(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Qc(t,e,r,s,n,a,l,o,c){return t=new Vx(t,e,r,o,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=xt(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lc(a),t}function Hx(t,e,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gs,key:s==null?null:""+s,children:t,containerInfo:e,implementation:r}}function Nm(t){if(!t)return Sr;t=t._reactInternals;e:{if(es(t)!==t||t.tag!==1)throw Error(T(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(t.tag===1){var r=t.type;if(rt(r))return Nf(t,r,e)}return e}function jm(t,e,r,s,n,a,l,o,c){return t=Qc(r,s,!0,t,n,a,l,o,c),t.context=Nm(null),r=t.current,s=He(),n=wr(r),a=Ht(s,n),a.callback=e??null,vr(r,a,n),t.current.lanes=n,Jn(t,n,s),st(t,s),t}function Gi(t,e,r,s){var n=e.current,a=He(),l=wr(n);return r=Nm(r),e.context===null?e.context=r:e.pendingContext=r,e=Ht(a,l),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=vr(n,e,l),t!==null&&(Pt(t,n,l,a),Da(t,n,l)),l}function yi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Td(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Zc(t,e){Td(t,e),(t=t.alternate)&&Td(t,e)}function Gx(){return null}var Tm=typeof reportError=="function"?reportError:function(t){console.error(t)};function eu(t){this._internalRoot=t}Ki.prototype.render=eu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(T(409));Gi(t,e,null,null)};Ki.prototype.unmount=eu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qr(function(){Gi(null,t,null,null)}),e[Xt]=null}};function Ki(t){this._internalRoot=t}Ki.prototype.unstable_scheduleHydration=function(t){if(t){var e=nf();t={blockedOn:null,target:t,priority:e};for(var r=0;r<lr.length&&e!==0&&e<lr[r].priority;r++);lr.splice(r,0,t),r===0&&lf(t)}};function tu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xi(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Cd(){}function Kx(t,e,r,s,n){if(n){if(typeof s=="function"){var a=s;s=function(){var u=yi(l);a.call(u)}}var l=jm(e,s,t,0,null,!1,!1,"",Cd);return t._reactRootContainer=l,t[Xt]=l.current,Ln(t.nodeType===8?t.parentNode:t),Qr(),l}for(;n=t.lastChild;)t.removeChild(n);if(typeof s=="function"){var o=s;s=function(){var u=yi(c);o.call(u)}}var c=Qc(t,0,!1,null,null,!1,!1,"",Cd);return t._reactRootContainer=c,t[Xt]=c.current,Ln(t.nodeType===8?t.parentNode:t),Qr(function(){Gi(e,c,r,s)}),c}function Yi(t,e,r,s,n){var a=r._reactRootContainer;if(a){var l=a;if(typeof n=="function"){var o=n;n=function(){var c=yi(l);o.call(c)}}Gi(e,l,t,n)}else l=Kx(r,e,t,n,s);return yi(l)}rf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=hn(e.pendingLanes);r!==0&&(wc(e,r|1),st(e,_e()),!(ee&6)&&(qs=_e()+500,Tr()))}break;case 13:Qr(function(){var s=Yt(t,1);if(s!==null){var n=He();Pt(s,t,1,n)}}),Zc(t,1)}};bc=function(t){if(t.tag===13){var e=Yt(t,134217728);if(e!==null){var r=He();Pt(e,t,134217728,r)}Zc(t,134217728)}};sf=function(t){if(t.tag===13){var e=wr(t),r=Yt(t,e);if(r!==null){var s=He();Pt(r,t,e,s)}Zc(t,e)}};nf=function(){return ne};af=function(t,e){var r=ne;try{return ne=t,e()}finally{ne=r}};no=function(t,e,r){switch(e){case"input":if(Jl(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var s=r[e];if(s!==t&&s.form===t.form){var n=Mi(s);if(!n)throw Error(T(90));Uh(s),Jl(s,n)}}}break;case"textarea":Fh(t,r);break;case"select":e=r.value,e!=null&&Ts(t,!!r.multiple,e,!1)}};Vh=Kc;Hh=Qr;var Xx={usingClientEntryPoint:!1,Events:[Zn,bs,Mi,qh,Wh,Kc]},cn={findFiberByHostInstance:Br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Yx={bundleType:cn.bundleType,version:cn.version,rendererPackageName:cn.rendererPackageName,rendererConfig:cn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Xh(t),t===null?null:t.stateNode},findFiberByHostInstance:cn.findFiberByHostInstance||Gx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ba=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ba.isDisabled&&ba.supportsFiber)try{Ui=ba.inject(Yx),Ft=ba}catch{}}ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xx;ht.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tu(e))throw Error(T(200));return Hx(t,e,null,r)};ht.createRoot=function(t,e){if(!tu(t))throw Error(T(299));var r=!1,s="",n=Tm;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(n=e.onRecoverableError)),e=Qc(t,1,!1,null,null,r,!1,s,n),t[Xt]=e.current,Ln(t.nodeType===8?t.parentNode:t),new eu(e)};ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(T(188)):(t=Object.keys(t).join(","),Error(T(268,t)));return t=Xh(e),t=t===null?null:t.stateNode,t};ht.flushSync=function(t){return Qr(t)};ht.hydrate=function(t,e,r){if(!Xi(e))throw Error(T(200));return Yi(null,t,e,!0,r)};ht.hydrateRoot=function(t,e,r){if(!tu(t))throw Error(T(405));var s=r!=null&&r.hydratedSources||null,n=!1,a="",l=Tm;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),e=jm(e,null,t,1,r??null,n,!1,a,l),t[Xt]=e.current,Ln(t),s)for(t=0;t<s.length;t++)r=s[t],n=r._getVersion,n=n(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,n]:e.mutableSourceEagerHydrationData.push(r,n);return new Ki(e)};ht.render=function(t,e,r){if(!Xi(e))throw Error(T(200));return Yi(null,t,e,!1,r)};ht.unmountComponentAtNode=function(t){if(!Xi(t))throw Error(T(40));return t._reactRootContainer?(Qr(function(){Yi(null,null,t,!1,function(){t._reactRootContainer=null,t[Xt]=null})}),!0):!1};ht.unstable_batchedUpdates=Kc;ht.unstable_renderSubtreeIntoContainer=function(t,e,r,s){if(!Xi(r))throw Error(T(200));if(t==null||t._reactInternals===void 0)throw Error(T(38));return Yi(t,e,r,!1,s)};ht.version="18.3.1-next-f1338f8080-20240426";function Cm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cm)}catch(t){console.error(t)}}Cm(),Th.exports=ht;var Jx=Th.exports,Rd=Jx;Wl.createRoot=Rd.createRoot,Wl.hydrateRoot=Rd.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wn(){return Wn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Wn.apply(this,arguments)}var fr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(fr||(fr={}));const Pd="popstate";function Qx(t){t===void 0&&(t={});function e(n,a){let{pathname:l="/",search:o="",hash:c=""}=ts(n.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Fo("",{pathname:l,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){let l=n.document.querySelector("base"),o="";if(l&&l.getAttribute("href")){let c=n.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof a=="string"?a:wi(a))}function s(n,a){Ji(n.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return ev(e,r,s,t)}function Ee(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ji(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Zx(){return Math.random().toString(36).substr(2,8)}function Ad(t,e){return{usr:t.state,key:t.key,idx:e}}function Fo(t,e,r,s){return r===void 0&&(r=null),Wn({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ts(e):e,{state:r,key:e&&e.key||s||Zx()})}function wi(t){let{pathname:e="/",search:r="",hash:s=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function ts(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function ev(t,e,r,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:a=!1}=s,l=n.history,o=fr.Pop,c=null,u=h();u==null&&(u=0,l.replaceState(Wn({},l.state,{idx:u}),""));function h(){return(l.state||{idx:null}).idx}function d(){o=fr.Pop;let w=h(),g=w==null?null:w-u;u=w,c&&c({action:o,location:y.location,delta:g})}function f(w,g){o=fr.Push;let p=Fo(y.location,w,g);r&&r(p,w),u=h()+1;let m=Ad(p,u),_=y.createHref(p);try{l.pushState(m,"",_)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;n.location.assign(_)}a&&c&&c({action:o,location:y.location,delta:1})}function x(w,g){o=fr.Replace;let p=Fo(y.location,w,g);r&&r(p,w),u=h();let m=Ad(p,u),_=y.createHref(p);l.replaceState(m,"",_),a&&c&&c({action:o,location:y.location,delta:0})}function v(w){let g=n.location.origin!=="null"?n.location.origin:n.location.href,p=typeof w=="string"?w:wi(w);return p=p.replace(/ $/,"%20"),Ee(g,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,g)}let y={get action(){return o},get location(){return t(n,l)},listen(w){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(Pd,d),c=w,()=>{n.removeEventListener(Pd,d),c=null}},createHref(w){return e(n,w)},createURL:v,encodeLocation(w){let g=v(w);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:x,go(w){return l.go(w)}};return y}var Od;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Od||(Od={}));function tv(t,e,r){return r===void 0&&(r="/"),rv(t,e,r)}function rv(t,e,r,s){let n=typeof e=="string"?ts(e):e,a=ru(n.pathname||"/",r);if(a==null)return null;let l=Rm(t);sv(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let u=pv(a);o=hv(l[c],u)}return o}function Rm(t,e,r,s){e===void 0&&(e=[]),r===void 0&&(r=[]),s===void 0&&(s="");let n=(a,l,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};c.relativePath.startsWith("/")&&(Ee(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=_r([s,c.relativePath]),h=r.concat(c);a.children&&a.children.length>0&&(Ee(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Rm(a.children,e,h,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:uv(u,a.index),routesMeta:h})};return t.forEach((a,l)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))n(a,l);else for(let c of Pm(a.path))n(a,l,c)}),e}function Pm(t){let e=t.split("/");if(e.length===0)return[];let[r,...s]=e,n=r.endsWith("?"),a=r.replace(/\?$/,"");if(s.length===0)return n?[a,""]:[a];let l=Pm(s.join("/")),o=[];return o.push(...l.map(c=>c===""?a:[a,c].join("/"))),n&&o.push(...l),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function sv(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:dv(e.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const nv=/^:[\w-]+$/,av=3,iv=2,lv=1,ov=10,cv=-2,Id=t=>t==="*";function uv(t,e){let r=t.split("/"),s=r.length;return r.some(Id)&&(s+=cv),e&&(s+=iv),r.filter(n=>!Id(n)).reduce((n,a)=>n+(nv.test(a)?av:a===""?lv:ov),s)}function dv(t,e){return t.length===e.length&&t.slice(0,-1).every((s,n)=>s===e[n])?t[t.length-1]-e[e.length-1]:0}function hv(t,e,r){let{routesMeta:s}=t,n={},a="/",l=[];for(let o=0;o<s.length;++o){let c=s[o],u=o===s.length-1,h=a==="/"?e:e.slice(a.length)||"/",d=fv({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),f=c.route;if(!d)return null;Object.assign(n,d.params),l.push({params:n,pathname:_r([a,d.pathname]),pathnameBase:wv(_r([a,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(a=_r([a,d.pathnameBase]))}return l}function fv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,s]=mv(t.path,t.caseSensitive,t.end),n=e.match(r);if(!n)return null;let a=n[0],l=a.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:s.reduce((u,h,d)=>{let{paramName:f,isOptional:x}=h;if(f==="*"){let y=o[d]||"";l=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const v=o[d];return x&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:l,pattern:t}}function mv(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Ji(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(s.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),s]}function pv(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ji(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ru(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,s=t.charAt(r);return s&&s!=="/"?null:t.slice(r)||"/"}const gv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xv=t=>gv.test(t);function vv(t,e){e===void 0&&(e="/");let{pathname:r,search:s="",hash:n=""}=typeof t=="string"?ts(t):t,a;if(r)if(xv(r))a=r;else{if(r.includes("//")){let l=r;r=r.replace(/\/\/+/g,"/"),Ji(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+r))}r.startsWith("/")?a=Ld(r.substring(1),"/"):a=Ld(r,e)}else a=e;return{pathname:a,search:bv(s),hash:_v(n)}}function Ld(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function Il(t,e,r,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yv(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function su(t,e){let r=yv(t);return e?r.map((s,n)=>n===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function nu(t,e,r,s){s===void 0&&(s=!1);let n;typeof t=="string"?n=ts(t):(n=Wn({},t),Ee(!n.pathname||!n.pathname.includes("?"),Il("?","pathname","search",n)),Ee(!n.pathname||!n.pathname.includes("#"),Il("#","pathname","hash",n)),Ee(!n.search||!n.search.includes("#"),Il("#","search","hash",n)));let a=t===""||n.pathname==="",l=a?"/":n.pathname,o;if(l==null)o=r;else{let d=e.length-1;if(!s&&l.startsWith("..")){let f=l.split("/");for(;f[0]==="..";)f.shift(),d-=1;n.pathname=f.join("/")}o=d>=0?e[d]:"/"}let c=vv(n,o),u=l&&l!=="/"&&l.endsWith("/"),h=(a||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const _r=t=>t.join("/").replace(/\/\/+/g,"/"),wv=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bv=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,_v=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Ev(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Am=["post","put","patch","delete"];new Set(Am);const kv=["get",...Am];new Set(kv);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vn(){return Vn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Vn.apply(this,arguments)}const au=b.createContext(null),Sv=b.createContext(null),Cr=b.createContext(null),Qi=b.createContext(null),er=b.createContext({outlet:null,matches:[],isDataRoute:!1}),Om=b.createContext(null);function Nv(t,e){let{relative:r}=e===void 0?{}:e;Ys()||Ee(!1);let{basename:s,navigator:n}=b.useContext(Cr),{hash:a,pathname:l,search:o}=Lm(t,{relative:r}),c=l;return s!=="/"&&(c=l==="/"?s:_r([s,l])),n.createHref({pathname:c,search:o,hash:a})}function Ys(){return b.useContext(Qi)!=null}function rs(){return Ys()||Ee(!1),b.useContext(Qi).location}function Im(t){b.useContext(Cr).static||b.useLayoutEffect(t)}function tr(){let{isDataRoute:t}=b.useContext(er);return t?Mv():jv()}function jv(){Ys()||Ee(!1);let t=b.useContext(au),{basename:e,future:r,navigator:s}=b.useContext(Cr),{matches:n}=b.useContext(er),{pathname:a}=rs(),l=JSON.stringify(su(n,r.v7_relativeSplatPath)),o=b.useRef(!1);return Im(()=>{o.current=!0}),b.useCallback(function(u,h){if(h===void 0&&(h={}),!o.current)return;if(typeof u=="number"){s.go(u);return}let d=nu(u,JSON.parse(l),a,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:_r([e,d.pathname])),(h.replace?s.replace:s.push)(d,h.state,h)},[e,s,l,a,t])}function Tv(){let{matches:t}=b.useContext(er),e=t[t.length-1];return e?e.params:{}}function Lm(t,e){let{relative:r}=e===void 0?{}:e,{future:s}=b.useContext(Cr),{matches:n}=b.useContext(er),{pathname:a}=rs(),l=JSON.stringify(su(n,s.v7_relativeSplatPath));return b.useMemo(()=>nu(t,JSON.parse(l),a,r==="path"),[t,l,a,r])}function Cv(t,e){return Rv(t,e)}function Rv(t,e,r,s){Ys()||Ee(!1);let{navigator:n}=b.useContext(Cr),{matches:a}=b.useContext(er),l=a[a.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let u=rs(),h;if(e){var d;let w=typeof e=="string"?ts(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||Ee(!1),h=w}else h=u;let f=h.pathname||"/",x=f;if(c!=="/"){let w=c.replace(/^\//,"").split("/");x="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=tv(t,{pathname:x}),y=Lv(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:_r([c,n.encodeLocation?n.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:_r([c,n.encodeLocation?n.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,r,s);return e&&y?b.createElement(Qi.Provider,{value:{location:Vn({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:fr.Pop}},y):y}function Pv(){let t=$v(),e=Ev(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),r?b.createElement("pre",{style:n},r):null,null)}const Av=b.createElement(Pv,null);class Ov extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?b.createElement(er.Provider,{value:this.props.routeContext},b.createElement(Om.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Iv(t){let{routeContext:e,match:r,children:s}=t,n=b.useContext(au);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),b.createElement(er.Provider,{value:e},s)}function Lv(t,e,r,s){var n;if(e===void 0&&(e=[]),r===void 0&&(r=null),s===void 0&&(s=null),t==null){var a;if(!r)return null;if(r.errors)t=r.matches;else if((a=s)!=null&&a.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let l=t,o=(n=r)==null?void 0:n.errors;if(o!=null){let h=l.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);h>=0||Ee(!1),l=l.slice(0,Math.min(l.length,h+1))}let c=!1,u=-1;if(r&&s&&s.v7_partialHydration)for(let h=0;h<l.length;h++){let d=l[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:x}=r,v=d.route.loader&&f[d.route.id]===void 0&&(!x||x[d.route.id]===void 0);if(d.route.lazy||v){c=!0,u>=0?l=l.slice(0,u+1):l=[l[0]];break}}}return l.reduceRight((h,d,f)=>{let x,v=!1,y=null,w=null;r&&(x=o&&d.route.id?o[d.route.id]:void 0,y=d.route.errorElement||Av,c&&(u<0&&f===0?(Bv("route-fallback"),v=!0,w=null):u===f&&(v=!0,w=d.route.hydrateFallbackElement||null)));let g=e.concat(l.slice(0,f+1)),p=()=>{let m;return x?m=y:v?m=w:d.route.Component?m=b.createElement(d.route.Component,null):d.route.element?m=d.route.element:m=h,b.createElement(Iv,{match:d,routeContext:{outlet:h,matches:g,isDataRoute:r!=null},children:m})};return r&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?b.createElement(Ov,{location:r.location,revalidation:r.revalidation,component:y,error:x,children:p(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):p()},null)}var Um=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Um||{}),Dm=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Dm||{});function Uv(t){let e=b.useContext(au);return e||Ee(!1),e}function Dv(t){let e=b.useContext(Sv);return e||Ee(!1),e}function Fv(t){let e=b.useContext(er);return e||Ee(!1),e}function Fm(t){let e=Fv(),r=e.matches[e.matches.length-1];return r.route.id||Ee(!1),r.route.id}function $v(){var t;let e=b.useContext(Om),r=Dv(),s=Fm();return e!==void 0?e:(t=r.errors)==null?void 0:t[s]}function Mv(){let{router:t}=Uv(Um.UseNavigateStable),e=Fm(Dm.UseNavigateStable),r=b.useRef(!1);return Im(()=>{r.current=!0}),b.useCallback(function(n,a){a===void 0&&(a={}),r.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,Vn({fromRouteId:e},a)))},[t,e])}const Ud={};function Bv(t,e,r){Ud[t]||(Ud[t]=!0)}function zv(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function _a(t){let{to:e,replace:r,state:s,relative:n}=t;Ys()||Ee(!1);let{future:a,static:l}=b.useContext(Cr),{matches:o}=b.useContext(er),{pathname:c}=rs(),u=tr(),h=nu(e,su(o,a.v7_relativeSplatPath),c,n==="path"),d=JSON.stringify(h);return b.useEffect(()=>u(JSON.parse(d),{replace:r,state:s,relative:n}),[u,d,n,r,s]),null}function mt(t){Ee(!1)}function qv(t){let{basename:e="/",children:r=null,location:s,navigationType:n=fr.Pop,navigator:a,static:l=!1,future:o}=t;Ys()&&Ee(!1);let c=e.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:c,navigator:a,static:l,future:Vn({v7_relativeSplatPath:!1},o)}),[c,o,a,l]);typeof s=="string"&&(s=ts(s));let{pathname:h="/",search:d="",hash:f="",state:x=null,key:v="default"}=s,y=b.useMemo(()=>{let w=ru(h,c);return w==null?null:{location:{pathname:w,search:d,hash:f,state:x,key:v},navigationType:n}},[c,h,d,f,x,v,n]);return y==null?null:b.createElement(Cr.Provider,{value:u},b.createElement(Qi.Provider,{children:r,value:y}))}function Wv(t){let{children:e,location:r}=t;return Cv($o(e),r)}new Promise(()=>{});function $o(t,e){e===void 0&&(e=[]);let r=[];return b.Children.forEach(t,(s,n)=>{if(!b.isValidElement(s))return;let a=[...e,n];if(s.type===b.Fragment){r.push.apply(r,$o(s.props.children,a));return}s.type!==mt&&Ee(!1),!s.props.index||!s.props.children||Ee(!1);let l={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=$o(s.props.children,a)),r.push(l)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mo(){return Mo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Mo.apply(this,arguments)}function Vv(t,e){if(t==null)return{};var r={},s=Object.keys(t),n,a;for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&(r[n]=t[n]);return r}function Hv(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Gv(t,e){return t.button===0&&(!e||e==="_self")&&!Hv(t)}function Bo(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let s=t[r];return e.concat(Array.isArray(s)?s.map(n=>[r,n]):[[r,s]])},[]))}function Kv(t,e){let r=Bo(t);return e&&e.forEach((s,n)=>{r.has(n)||e.getAll(n).forEach(a=>{r.append(n,a)})}),r}const Xv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Yv="6";try{window.__reactRouterVersion=Yv}catch{}const Jv="startTransition",Dd=M0[Jv];function Qv(t){let{basename:e,children:r,future:s,window:n}=t,a=b.useRef();a.current==null&&(a.current=Qx({window:n,v5Compat:!0}));let l=a.current,[o,c]=b.useState({action:l.action,location:l.location}),{v7_startTransition:u}=s||{},h=b.useCallback(d=>{u&&Dd?Dd(()=>c(d)):c(d)},[c,u]);return b.useLayoutEffect(()=>l.listen(h),[l,h]),b.useEffect(()=>zv(s),[s]),b.createElement(qv,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:l,future:s})}const Zv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ey=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ll=b.forwardRef(function(e,r){let{onClick:s,relative:n,reloadDocument:a,replace:l,state:o,target:c,to:u,preventScrollReset:h,viewTransition:d}=e,f=Vv(e,Xv),{basename:x}=b.useContext(Cr),v,y=!1;if(typeof u=="string"&&ey.test(u)&&(v=u,Zv))try{let m=new URL(window.location.href),_=u.startsWith("//")?new URL(m.protocol+u):new URL(u),N=ru(_.pathname,x);_.origin===m.origin&&N!=null?u=N+_.search+_.hash:y=!0}catch{}let w=Nv(u,{relative:n}),g=ty(u,{replace:l,state:o,target:c,preventScrollReset:h,relative:n,viewTransition:d});function p(m){s&&s(m),m.defaultPrevented||g(m)}return b.createElement("a",Mo({},f,{href:v||w,onClick:y||a?s:p,ref:r,target:c}))});var Fd;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Fd||(Fd={}));var $d;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})($d||($d={}));function ty(t,e){let{target:r,replace:s,state:n,preventScrollReset:a,relative:l,viewTransition:o}=e===void 0?{}:e,c=tr(),u=rs(),h=Lm(t,{relative:l});return b.useCallback(d=>{if(Gv(d,r)){d.preventDefault();let f=s!==void 0?s:wi(u)===wi(h);c(t,{replace:f,state:n,preventScrollReset:a,relative:l,viewTransition:o})}},[u,c,h,s,n,r,t,a,l,o])}function ry(t){let e=b.useRef(Bo(t)),r=b.useRef(!1),s=rs(),n=b.useMemo(()=>Kv(s.search,r.current?null:e.current),[s.search]),a=tr(),l=b.useCallback((o,c)=>{const u=Bo(typeof o=="function"?o(n):o);r.current=!0,a("?"+u,c)},[a,n]);return[n,l]}const X=({children:t,className:e="",...r})=>i.jsx("div",{className:`bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-sm rounded-xl p-4 md:p-6 transition-colors duration-200 ${e}`,...r,children:t}),H=({children:t,className:e="",variant:r="primary",...s})=>{let n="px-6 py-2.5 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed";const a={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 shadow-sm dark:focus:ring-offset-slate-900",secondary:"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 border border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700 focus:ring-slate-400 dark:focus:ring-offset-slate-900",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 dark:focus:ring-offset-slate-900"};return i.jsx("button",{className:`${n} ${a[r]} ${e}`,...s,children:t})},K=({className:t="",...e})=>i.jsx("input",{className:`w-full bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 border border-slate-300 dark:border-slate-600 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all ${t}`,...e}),Gr=({className:t="",children:e,...r})=>i.jsx("select",{className:`w-full bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 border border-slate-300 dark:border-slate-600 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed ${t}`,...r,children:e}),sy=()=>i.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-200 transition-colors duration-200",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 dark:border-slate-700 border-t-blue-600 dark:border-t-blue-500 rounded-full animate-spin mb-6"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Loading SchoolResult Pro..."}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Please wait while we connect securely."})]});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ny={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),M=(t,e)=>{const r=b.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:o="",children:c,...u},h)=>b.createElement("svg",{ref:h,...ny,width:n,height:n,stroke:s,strokeWidth:l?Number(a)*24/Number(n):a,className:["lucide",`lucide-${ay(t)}`,o].join(" "),...u},[...e.map(([d,f])=>b.createElement(d,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=M("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=M("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=M("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=M("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=M("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=M("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=M("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=M("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=M("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=M("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=M("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=M("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=M("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=M("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=M("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=M("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=M("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=M("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=M("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=M("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=M("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=M("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=M("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=M("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=M("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=M("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=M("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=M("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=M("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=M("PauseCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=M("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=M("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=M("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=M("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=M("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=M("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=M("School",[["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M14 22v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v4",key:"cpkuc4"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=M("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=M("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=M("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=M("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=M("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=M("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=M("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=M("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=M("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=M("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=M("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=M("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=M("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=M("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=M("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=M("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=M("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=M("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var cu={},Si={},Vo=function(t,e){return Vo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])},Vo(t,e)};function Ym(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Vo(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Ni=function(){return Ni=Object.assign||function(e){for(var r,s=1,n=arguments.length;s<n;s++){r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ni.apply(this,arguments)};function Js(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r}function Jm(t,e,r,s){var n=arguments.length,a=n<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,r):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,r,s);else for(var o=t.length-1;o>=0;o--)(l=t[o])&&(a=(n<3?l(a):n>3?l(e,r,a):l(e,r))||a);return n>3&&a&&Object.defineProperty(e,r,a),a}function Qm(t,e){return function(r,s){e(r,s,t)}}function Zm(t,e,r,s,n,a){function l(g){if(g!==void 0&&typeof g!="function")throw new TypeError("Function expected");return g}for(var o=s.kind,c=o==="getter"?"get":o==="setter"?"set":"value",u=!e&&t?s.static?t:t.prototype:null,h=e||(u?Object.getOwnPropertyDescriptor(u,s.name):{}),d,f=!1,x=r.length-1;x>=0;x--){var v={};for(var y in s)v[y]=y==="access"?{}:s[y];for(var y in s.access)v.access[y]=s.access[y];v.addInitializer=function(g){if(f)throw new TypeError("Cannot add initializers after decoration has completed");a.push(l(g||null))};var w=(0,r[x])(o==="accessor"?{get:h.get,set:h.set}:h[c],v);if(o==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(d=l(w.get))&&(h.get=d),(d=l(w.set))&&(h.set=d),(d=l(w.init))&&n.unshift(d)}else(d=l(w))&&(o==="field"?n.unshift(d):h[c]=d)}u&&Object.defineProperty(u,s.name,h),f=!0}function ep(t,e,r){for(var s=arguments.length>2,n=0;n<e.length;n++)r=s?e[n].call(t,r):e[n].call(t);return s?r:void 0}function tp(t){return typeof t=="symbol"?t:"".concat(t)}function rp(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function sp(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function U(t,e,r,s){function n(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(h){try{u(s.next(h))}catch(d){l(d)}}function c(h){try{u(s.throw(h))}catch(d){l(d)}}function u(h){h.done?a(h.value):n(h.value).then(o,c)}u((s=s.apply(t,e||[])).next())})}function np(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},s,n,a,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=o(0),l.throw=o(1),l.return=o(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(u){return function(h){return c([u,h])}}function c(u){if(s)throw new TypeError("Generator is already executing.");for(;l&&(l=0,u[0]&&(r=0)),r;)try{if(s=1,n&&(a=u[0]&2?n.return:u[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,u[1])).done)return a;switch(n=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,n=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(h){u=[6,h],n=0}finally{s=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Zi=Object.create?function(t,e,r,s){s===void 0&&(s=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,s,n)}:function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]};function ap(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Zi(e,t,r)}function ji(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],s=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function uu(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var s=r.call(t),n,a=[],l;try{for(;(e===void 0||e-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(o){l={error:o}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(l)throw l.error}}return a}function ip(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(uu(arguments[e]));return t}function lp(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var s=Array(t),n=0,e=0;e<r;e++)for(var a=arguments[e],l=0,o=a.length;l<o;l++,n++)s[n]=a[l];return s}function op(t,e,r){if(r||arguments.length===2)for(var s=0,n=e.length,a;s<n;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))}function Vs(t){return this instanceof Vs?(this.v=t,this):new Vs(t)}function cp(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(t,e||[]),n,a=[];return n=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",l),n[Symbol.asyncIterator]=function(){return this},n;function l(x){return function(v){return Promise.resolve(v).then(x,d)}}function o(x,v){s[x]&&(n[x]=function(y){return new Promise(function(w,g){a.push([x,y,w,g])>1||c(x,y)})},v&&(n[x]=v(n[x])))}function c(x,v){try{u(s[x](v))}catch(y){f(a[0][3],y)}}function u(x){x.value instanceof Vs?Promise.resolve(x.value.v).then(h,d):f(a[0][2],x)}function h(x){c("next",x)}function d(x){c("throw",x)}function f(x,v){x(v),a.shift(),a.length&&c(a[0][0],a[0][1])}}function up(t){var e,r;return e={},s("next"),s("throw",function(n){throw n}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(n,a){e[n]=t[n]?function(l){return(r=!r)?{value:Vs(t[n](l)),done:!1}:a?a(l):l}:a}}function dp(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof ji=="function"?ji(t):t[Symbol.iterator](),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(a){r[a]=t[a]&&function(l){return new Promise(function(o,c){l=t[a](l),n(o,c,l.done,l.value)})}}function n(a,l,o,c){Promise.resolve(c).then(function(u){a({value:u,done:o})},l)}}function hp(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Sy=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Ho=function(t){return Ho=Object.getOwnPropertyNames||function(e){var r=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[r.length]=s);return r},Ho(t)};function fp(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Ho(t),s=0;s<r.length;s++)r[s]!=="default"&&Zi(e,t,r[s]);return Sy(e,t),e}function mp(t){return t&&t.__esModule?t:{default:t}}function pp(t,e,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(t):s?s.value:e.get(t)}function gp(t,e,r,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(t,r):n?n.value=r:e.set(t,r),r}function xp(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function vp(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],r&&(n=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");n&&(s=function(){try{n.call(this)}catch(a){return Promise.reject(a)}}),t.stack.push({value:e,dispose:s,async:r})}else r&&t.stack.push({async:!0});return e}var Ny=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var s=new Error(r);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function yp(t){function e(a){t.error=t.hasError?new Ny(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var r,s=0;function n(){for(;r=t.stack.pop();)try{if(!r.async&&s===1)return s=0,t.stack.push(r),Promise.resolve().then(n);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(a).then(n,function(l){return e(l),n()})}else s|=1}catch(l){e(l)}if(s===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return n()}function wp(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,s,n,a,l){return s?e?".jsx":".js":n&&(!a||!l)?r:n+a+"."+l.toLowerCase()+"js"}):t}const jy={__extends:Ym,__assign:Ni,__rest:Js,__decorate:Jm,__param:Qm,__esDecorate:Zm,__runInitializers:ep,__propKey:tp,__setFunctionName:rp,__metadata:sp,__awaiter:U,__generator:np,__createBinding:Zi,__exportStar:ap,__values:ji,__read:uu,__spread:ip,__spreadArrays:lp,__spreadArray:op,__await:Vs,__asyncGenerator:cp,__asyncDelegator:up,__asyncValues:dp,__makeTemplateObject:hp,__importStar:fp,__importDefault:mp,__classPrivateFieldGet:pp,__classPrivateFieldSet:gp,__classPrivateFieldIn:xp,__addDisposableResource:vp,__disposeResources:yp,__rewriteRelativeImportExtension:wp},Ty=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:vp,get __assign(){return Ni},__asyncDelegator:up,__asyncGenerator:cp,__asyncValues:dp,__await:Vs,__awaiter:U,__classPrivateFieldGet:pp,__classPrivateFieldIn:xp,__classPrivateFieldSet:gp,__createBinding:Zi,__decorate:Jm,__disposeResources:yp,__esDecorate:Zm,__exportStar:ap,__extends:Ym,__generator:np,__importDefault:mp,__importStar:fp,__makeTemplateObject:hp,__metadata:sp,__param:Qm,__propKey:tp,__read:uu,__rest:Js,__rewriteRelativeImportExtension:wp,__runInitializers:ep,__setFunctionName:rp,__spread:ip,__spreadArray:op,__spreadArrays:lp,__values:ji,default:jy},Symbol.toStringTag,{value:"Module"})),Cy=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);let el=class extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}},bp=class extends el{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},Go=class extends el{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},Ko=class extends el{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var Ti;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ti||(Ti={}));class Ry{constructor(e,{headers:r={},customFetch:s,region:n=Ti.Any}={}){this.url=e,this.headers=r,this.region=n,this.fetch=Cy(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return U(this,arguments,void 0,function*(r,s={}){var n;let a,l;try{const{headers:o,method:c,body:u,signal:h,timeout:d}=s;let f={},{region:x}=s;x||(x=this.region);const v=new URL(`${this.url}/${r}`);x&&x!=="any"&&(f["x-region"]=x,v.searchParams.set("forceFunctionRegion",x));let y;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(f["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(f["Content-Type"]="application/json",y=JSON.stringify(u)):y=u;let w=h;d&&(l=new AbortController,a=setTimeout(()=>l.abort(),d),h?(w=l.signal,h.addEventListener("abort",()=>l.abort())):w=l.signal);const g=yield this.fetch(v.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:y,signal:w}).catch(N=>{throw new bp(N)}),p=g.headers.get("x-relay-error");if(p&&p==="true")throw new Go(g);if(!g.ok)throw new Ko(g);let m=((n=g.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),_;return m==="application/json"?_=yield g.json():m==="application/octet-stream"||m==="application/pdf"?_=yield g.blob():m==="text/event-stream"?_=g:m==="multipart/form-data"?_=yield g.formData():_=yield g.text(),{data:_,error:null,response:g}}catch(o){return{data:null,error:o,response:o instanceof Ko||o instanceof Go?o.context:void 0}}finally{a&&clearTimeout(a)}})}}const Py=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Ti},FunctionsClient:Ry,FunctionsError:el,FunctionsFetchError:bp,FunctionsHttpError:Ko,FunctionsRelayError:Go},Symbol.toStringTag,{value:"Module"})),_p=Xn(Py);var qe={};const Qs=Xn(Ty);var Ea={},ka={},Sa={},Na={},ja={},Ta={},Wd;function Ep(){if(Wd)return Ta;Wd=1,Object.defineProperty(Ta,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Ta.default=t,Ta}var Vd;function kp(){if(Vd)return ja;Vd=1,Object.defineProperty(ja,"__esModule",{value:!0});const e=Qs.__importDefault(Ep());let r=class{constructor(n){var a,l;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(a=n.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=n.signal,this.isMaybeSingle=(l=n.isMaybeSingle)!==null&&l!==void 0?l:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,a){return this.headers=new Headers(this.headers),this.headers.set(n,a),this}then(n,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let o=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,h,d,f;let x=null,v=null,y=null,w=c.status,g=c.statusText;if(c.ok){if(this.method!=="HEAD"){const N=await c.text();N===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?v=N:v=JSON.parse(N))}const m=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),_=(d=c.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");m&&_&&_.length>1&&(y=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(x={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,y=null,w=406,g="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const m=await c.text();try{x=JSON.parse(m),Array.isArray(x)&&c.status===404&&(v=[],x=null,w=200,g="OK")}catch{c.status===404&&m===""?(w=204,g="No Content"):x={message:m}}if(x&&this.isMaybeSingle&&(!((f=x==null?void 0:x.details)===null||f===void 0)&&f.includes("0 rows"))&&(x=null,w=200,g="OK"),x&&this.shouldThrowOnError)throw new e.default(x)}return{error:x,data:v,count:y,status:w,statusText:g}});return this.shouldThrowOnError||(o=o.catch(c=>{var u,h,d,f,x,v;let y="";const w=c==null?void 0:c.cause;if(w){const g=(u=w==null?void 0:w.message)!==null&&u!==void 0?u:"",p=(h=w==null?void 0:w.code)!==null&&h!==void 0?h:"";y=`${(d=c==null?void 0:c.name)!==null&&d!==void 0?d:"FetchError"}: ${c==null?void 0:c.message}`,y+=`

Caused by: ${(f=w==null?void 0:w.name)!==null&&f!==void 0?f:"Error"}: ${g}`,p&&(y+=` (${p})`),w!=null&&w.stack&&(y+=`
${w.stack}`)}else y=(x=c==null?void 0:c.stack)!==null&&x!==void 0?x:"";return{error:{message:`${(v=c==null?void 0:c.name)!==null&&v!==void 0?v:"FetchError"}: ${c==null?void 0:c.message}`,details:y,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(n,a)}returns(){return this}overrideTypes(){return this}};return ja.default=r,ja}var Hd;function Sp(){if(Hd)return Na;Hd=1,Object.defineProperty(Na,"__esModule",{value:!0});const e=Qs.__importDefault(kp());let r=class extends e.default{select(n){let a=!1;const l=(n??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:a=!0,nullsFirst:l,foreignTable:o,referencedTable:c=o}={}){const u=c?`${c}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${n}.${a?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:a,referencedTable:l=a}={}){const o=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(o,`${n}`),this}range(n,a,{foreignTable:l,referencedTable:o=l}={}){const c=typeof o>"u"?"offset":`${o}.offset`,u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${n}`),this.url.searchParams.set(u,`${a-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:a=!1,settings:l=!1,buffers:o=!1,wal:c=!1,format:u="text"}={}){var h;const d=[n?"analyze":null,a?"verbose":null,l?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),f=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${f}"; options=${d};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};return Na.default=r,Na}var Gd;function du(){if(Gd)return Sa;Gd=1,Object.defineProperty(Sa,"__esModule",{value:!0});const e=Qs.__importDefault(Sp()),r=new RegExp("[,()]");let s=class extends e.default{eq(a,l){return this.url.searchParams.append(a,`eq.${l}`),this}neq(a,l){return this.url.searchParams.append(a,`neq.${l}`),this}gt(a,l){return this.url.searchParams.append(a,`gt.${l}`),this}gte(a,l){return this.url.searchParams.append(a,`gte.${l}`),this}lt(a,l){return this.url.searchParams.append(a,`lt.${l}`),this}lte(a,l){return this.url.searchParams.append(a,`lte.${l}`),this}like(a,l){return this.url.searchParams.append(a,`like.${l}`),this}likeAllOf(a,l){return this.url.searchParams.append(a,`like(all).{${l.join(",")}}`),this}likeAnyOf(a,l){return this.url.searchParams.append(a,`like(any).{${l.join(",")}}`),this}ilike(a,l){return this.url.searchParams.append(a,`ilike.${l}`),this}ilikeAllOf(a,l){return this.url.searchParams.append(a,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(a,l){return this.url.searchParams.append(a,`ilike(any).{${l.join(",")}}`),this}regexMatch(a,l){return this.url.searchParams.append(a,`match.${l}`),this}regexIMatch(a,l){return this.url.searchParams.append(a,`imatch.${l}`),this}is(a,l){return this.url.searchParams.append(a,`is.${l}`),this}isDistinct(a,l){return this.url.searchParams.append(a,`isdistinct.${l}`),this}in(a,l){const o=Array.from(new Set(l)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(a,`in.(${o})`),this}contains(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cs.{${l.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(l)}`),this}containedBy(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cd.{${l.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(l)}`),this}rangeGt(a,l){return this.url.searchParams.append(a,`sr.${l}`),this}rangeGte(a,l){return this.url.searchParams.append(a,`nxl.${l}`),this}rangeLt(a,l){return this.url.searchParams.append(a,`sl.${l}`),this}rangeLte(a,l){return this.url.searchParams.append(a,`nxr.${l}`),this}rangeAdjacent(a,l){return this.url.searchParams.append(a,`adj.${l}`),this}overlaps(a,l){return typeof l=="string"?this.url.searchParams.append(a,`ov.${l}`):this.url.searchParams.append(a,`ov.{${l.join(",")}}`),this}textSearch(a,l,{config:o,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const h=o===void 0?"":`(${o})`;return this.url.searchParams.append(a,`${u}fts${h}.${l}`),this}match(a){return Object.entries(a).forEach(([l,o])=>{this.url.searchParams.append(l,`eq.${o}`)}),this}not(a,l,o){return this.url.searchParams.append(a,`not.${l}.${o}`),this}or(a,{foreignTable:l,referencedTable:o=l}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${a})`),this}filter(a,l,o){return this.url.searchParams.append(a,`${l}.${o}`),this}};return Sa.default=s,Sa}var Kd;function Np(){if(Kd)return ka;Kd=1,Object.defineProperty(ka,"__esModule",{value:!0});const e=Qs.__importDefault(du());let r=class{constructor(n,{headers:a={},schema:l,fetch:o}){this.url=n,this.headers=new Headers(a),this.schema=l,this.fetch=o}select(n,a){const{head:l=!1,count:o}=a??{},c=l?"HEAD":"GET";let u=!1;const h=(n??"*").split("").map(d=>/\s/.test(d)&&!u?"":(d==='"'&&(u=!u),d)).join("");return this.url.searchParams.set("select",h),o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:a,defaultToNull:l=!0}={}){var o;const c="POST";if(a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const u=n.reduce((h,d)=>h.concat(Object.keys(d)),[]);if(u.length>0){const h=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(n,{onConflict:a,ignoreDuplicates:l=!1,count:o,defaultToNull:c=!0}={}){var u;const h="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const d=n.reduce((f,x)=>f.concat(Object.keys(x)),[]);if(d.length>0){const f=[...new Set(d)].map(x=>`"${x}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(n,{count:a}={}){var l;const o="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:n}={}){var a;const l="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};return ka.default=r,ka}var Xd;function Ay(){if(Xd)return Ea;Xd=1,Object.defineProperty(Ea,"__esModule",{value:!0});const t=Qs,e=t.__importDefault(Np()),r=t.__importDefault(du());let s=class jp{constructor(a,{headers:l={},schema:o,fetch:c}={}){this.url=a,this.headers=new Headers(l),this.schemaName=o,this.fetch=c}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const l=new URL(`${this.url}/${a}`);return new e.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new jp(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,l={},{head:o=!1,get:c=!1,count:u}={}){var h;let d;const f=new URL(`${this.url}/rpc/${a}`);let x;o||c?(d=o?"HEAD":"GET",Object.entries(l).filter(([y,w])=>w!==void 0).map(([y,w])=>[y,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([y,w])=>{f.searchParams.append(y,w)})):(d="POST",x=l);const v=new Headers(this.headers);return u&&v.set("Prefer",`count=${u}`),new r.default({method:d,url:f,headers:v,schema:this.schemaName,body:x,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}};return Ea.default=s,Ea}Object.defineProperty(qe,"__esModule",{value:!0});qe.PostgrestError=qe.PostgrestBuilder=qe.PostgrestTransformBuilder=qe.PostgrestFilterBuilder=qe.PostgrestQueryBuilder=qe.PostgrestClient=void 0;const Zs=Qs,Tp=Zs.__importDefault(Ay());qe.PostgrestClient=Tp.default;const Cp=Zs.__importDefault(Np());qe.PostgrestQueryBuilder=Cp.default;const Rp=Zs.__importDefault(du());qe.PostgrestFilterBuilder=Rp.default;const Pp=Zs.__importDefault(Sp());qe.PostgrestTransformBuilder=Pp.default;const Ap=Zs.__importDefault(kp());qe.PostgrestBuilder=Ap.default;const Op=Zs.__importDefault(Ep());qe.PostgrestError=Op.default;qe.default={PostgrestClient:Tp.default,PostgrestQueryBuilder:Cp.default,PostgrestFilterBuilder:Rp.default,PostgrestTransformBuilder:Pp.default,PostgrestBuilder:Ap.default,PostgrestError:Op.default};class Ip{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,n=parseInt(s.replace(/^v/,"").split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const s=this.getWebSocketConstructor();return new s(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Oy="2.86.2",Iy=`realtime-js/${Oy}`,Lp="1.0.0",Ly="2.0.0",Yd=Lp,Xo=1e4,Uy=1e3,Dy=100;var $r;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})($r||($r={}));var ke;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ke||(ke={}));var Tt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Tt||(Tt={}));var Yo;(function(t){t.websocket="websocket"})(Yo||(Yo={}));var Mr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Mr||(Mr={}));class Fy{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,s;const n=(s=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,n)}_encodeJsonUserBroadcastPush(e){var r,s;const n=(s=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},l=new TextEncoder().encode(JSON.stringify(n)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,r,s){var n,a;const l=e.topic,o=(n=e.ref)!==null&&n!==void 0?n:"",c=(a=e.join_ref)!==null&&a!==void 0?a:"",u=e.payload.event,h=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(h).length===0?"":JSON.stringify(h);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+o.length+l.length+u.length+d.length,x=new ArrayBuffer(this.HEADER_LENGTH+f);let v=new DataView(x),y=0;v.setUint8(y++,this.KINDS.userBroadcastPush),v.setUint8(y++,c.length),v.setUint8(y++,o.length),v.setUint8(y++,l.length),v.setUint8(y++,u.length),v.setUint8(y++,d.length),v.setUint8(y++,r),Array.from(c,g=>v.setUint8(y++,g.charCodeAt(0))),Array.from(o,g=>v.setUint8(y++,g.charCodeAt(0))),Array.from(l,g=>v.setUint8(y++,g.charCodeAt(0))),Array.from(u,g=>v.setUint8(y++,g.charCodeAt(0))),Array.from(d,g=>v.setUint8(y++,g.charCodeAt(0)));var w=new Uint8Array(x.byteLength+s.byteLength);return w.set(new Uint8Array(x),0),w.set(new Uint8Array(s),x.byteLength),w.buffer}decode(e,r){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return r(s)}if(typeof e=="string"){const s=JSON.parse(e),[n,a,l,o,c]=s;return r({join_ref:n,ref:a,topic:l,event:o,payload:c})}return r({})}_binaryDecode(e){const r=new DataView(e),s=r.getUint8(0),n=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,n)}}_decodeUserBroadcast(e,r,s){const n=r.getUint8(1),a=r.getUint8(2),l=r.getUint8(3),o=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=s.decode(e.slice(c,c+n));c=c+n;const h=s.decode(e.slice(c,c+a));c=c+a;const d=s.decode(e.slice(c,c+l));c=c+l;const f=e.slice(c,e.byteLength),x=o===this.JSON_ENCODING?JSON.parse(s.decode(f)):f,v={type:this.BROADCAST_EVENT,event:h,payload:x};return l>0&&(v.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>r.includes(s)))}}class Up{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var le;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(le||(le={}));const Jd=(t,e,r={})=>{var s;const n=(s=r.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((a,l)=>(a[l]=$y(l,t,e,n),a),{}):{}},$y=(t,e,r,s)=>{const n=e.find(o=>o.name===t),a=n==null?void 0:n.type,l=r[t];return a&&!s.includes(a)?Dp(a,l):Jo(l)},Dp=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return qy(e,r)}switch(t){case le.bool:return My(e);case le.float4:case le.float8:case le.int2:case le.int4:case le.int8:case le.numeric:case le.oid:return By(e);case le.json:case le.jsonb:return zy(e);case le.timestamp:return Wy(e);case le.abstime:case le.date:case le.daterange:case le.int4range:case le.int8range:case le.money:case le.reltime:case le.text:case le.time:case le.timestamptz:case le.timetz:case le.tsrange:case le.tstzrange:return Jo(e);default:return Jo(e)}},Jo=t=>t,My=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},By=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},zy=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},qy=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let a;const l=t.slice(1,r);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(o=>Dp(e,o))}return t},Wy=t=>typeof t=="string"?t.replace(" ","T"):t,Fp=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Dl{constructor(e,r,s={},n=Xo){this.channel=e,this.event=r,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Qo;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Qo||(Qo={}));let $p=class Ha{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:a,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ha.syncState(this.state,n,a,l),this.pendingDiffs.forEach(c=>{this.state=Ha.syncDiff(this.state,c,a,l)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},n=>{const{onJoin:a,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Ha.syncDiff(this.state,n,a,l),o())}),this.onJoin((n,a,l)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:a,newPresences:l})}),this.onLeave((n,a,l)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,n){const a=this.cloneDeep(e),l=this.transformState(r),o={},c={};return this.map(a,(u,h)=>{l[u]||(c[u]=h)}),this.map(l,(u,h)=>{const d=a[u];if(d){const f=h.map(w=>w.presence_ref),x=d.map(w=>w.presence_ref),v=h.filter(w=>x.indexOf(w.presence_ref)<0),y=d.filter(w=>f.indexOf(w.presence_ref)<0);v.length>0&&(o[u]=v),y.length>0&&(c[u]=y)}else o[u]=h}),this.syncDiff(a,{joins:o,leaves:c},s,n)}static syncDiff(e,r,s,n){const{joins:a,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(a,(o,c)=>{var u;const h=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(c),h.length>0){const d=e[o].map(x=>x.presence_ref),f=h.filter(x=>d.indexOf(x.presence_ref)<0);e[o].unshift(...f)}s(o,h,c)}),this.map(l,(o,c)=>{let u=e[o];if(!u)return;const h=c.map(d=>d.presence_ref);u=u.filter(d=>h.indexOf(d.presence_ref)<0),e[o]=u,n(o,u,c),u.length===0&&delete e[o]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const n=e[s];return"metas"in n?r[s]=n.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[s]=n,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Zo;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Zo||(Zo={}));var Ls;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ls||(Ls={}));var Ut;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ut||(Ut={}));const Vy=ke;let Mp=class Bp{constructor(e,r={config:{}},s){var n,a;if(this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=ke.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Dl(this,Tt.join,this.params,this.timeout),this.rejoinTimer=new Up(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ke.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ke.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Tt.reply,{},(l,o)=>{this._trigger(this._replyEventName(o),l)}),this.presence=new $p(this),this.broadcastEndpointURL=Fp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var s,n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ke.closed){const{config:{broadcast:l,presence:o,private:c}}=this.params,u=(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(x=>x.filter))!==null&&n!==void 0?n:[],h=!!this.bindings[Ls.PRESENCE]&&this.bindings[Ls.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,d={},f={broadcast:l,presence:Object.assign(Object.assign({},o),{enabled:h}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(x=>e==null?void 0:e(Ut.CHANNEL_ERROR,x)),this._onClose(()=>e==null?void 0:e(Ut.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var v;if(this.socket.setAuth(),x===void 0){e==null||e(Ut.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,w=(v=y==null?void 0:y.length)!==null&&v!==void 0?v:0,g=[];for(let p=0;p<w;p++){const m=y[p],{filter:{event:_,schema:N,table:E,filter:S}}=m,C=x&&x[p];if(C&&C.event===_&&C.schema===N&&C.table===E&&C.filter===S)g.push(Object.assign(Object.assign({},m),{id:C.id}));else{this.unsubscribe(),this.state=ke.errored,e==null||e(Ut.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(Ut.SUBSCRIBED);return}}).receive("error",x=>{this.state=ke.errored,e==null||e(Ut.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ut.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this.state===ke.joined&&e===Ls.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,s)}async httpSend(e,r,s={}){var n;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const l={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);if(o.status===202)return{success:!0};let c=o.statusText;try{const u=await o.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(e,r={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=u.body)===null||n===void 0?void 0:n.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,o,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ke.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Tt.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new Dl(this,Tt.leave,{},e),s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ke.closed,this.bindings={}}async _fetchWithTimeout(e,r,s){const n=new AbortController,a=setTimeout(()=>n.abort(),s),l=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(a),l}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Dl(this,e,r,s);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Dy){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var n,a;const l=e.toLocaleLowerCase(),{close:o,error:c,leave:u,join:h}=Tt;if(s&&[o,c,u,h].indexOf(l)>=0&&s!==this._joinRef())return;let f=this._onMessage(l,r,s);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(x=>{var v,y,w;return((v=x.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(y=x.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===l}).map(x=>x.callback(f,s)):(a=this.bindings[l])===null||a===void 0||a.filter(x=>{var v,y,w,g,p,m;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const _=x.id,N=(v=x.filter)===null||v===void 0?void 0:v.event;return _&&((y=r.ids)===null||y===void 0?void 0:y.includes(_))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const _=(p=(g=x==null?void 0:x.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return _==="*"||_===((m=r==null?void 0:r.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:y,table:w,commit_timestamp:g,type:p,errors:m}=v;f=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:g,eventType:p,new:{},old:{},errors:m}),this._getPayloadRecords(v))}x.callback(f,s)})}_isClosed(){return this.state===ke.closed}_isJoined(){return this.state===ke.joined}_isJoining(){return this.state===ke.joining}_isLeaving(){return this.state===ke.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const n=e.toLocaleLowerCase(),a={type:n,filter:r,callback:s};return this.bindings[n]?this.bindings[n].push(a):this.bindings[n]=[a],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(n=>{var a;return!(((a=n.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&Bp.isEqual(n.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Tt.close,{},e)}_onError(e){this._on(Tt.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ke.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Jd(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Jd(e.columns,e.old_record)),r}};const Fl=()=>{},Ca={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Hy=[1e3,2e3,5e3,1e4],Gy=1e4,Ky=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let Xy=class{constructor(e,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xo,this.transport=null,this.heartbeatIntervalMs=Ca.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Fl,this.ref=0,this.reconnectTimer=null,this.vsn=Yd,this.logger=Fl,this.conn=null,this.sendBuffer=[],this.serializer=new Fy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>n?(...a)=>n(...a):(...a)=>fetch(...a),!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Yo.websocket}`,this.httpEndpoint=Fp(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ip.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case $r.connecting:return Mr.Connecting;case $r.open:return Mr.Open;case $r.closing:return Mr.Closing;default:return Mr.Closed}}isConnected(){return this.connectionState()===Mr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find(a=>a.topic===s);if(n)return n;{const a=new Mp(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:s,payload:n,ref:a}=e,l=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${s} (${a})`,n),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Uy,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ca.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:n,payload:a,ref:l}=r,o=l?`(${l})`:"",c=a.status||"";this.log("receive",`${c} ${s} ${n} ${o}`.trim(),a),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(n,a,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===$r.open||this.conn.readyState===$r.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Tt.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${e}${s}${n}`}_workerObjectUrl(e){let r;if(e)r=e;else{const s=new Blob([Ky],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const n={access_token:r,version:Iy};r&&s.updateJoinPayload(n),s.joinedOnce&&s._isJoined()&&s._push(Tt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(r)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Up(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ca.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,s,n,a,l,o,c,u,h,d,f,x;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:Xo,this.heartbeatIntervalMs=(n=e==null?void 0:e.heartbeatIntervalMs)!==null&&n!==void 0?n:Ca.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:Fl,this.vsn=(c=e==null?void 0:e.vsn)!==null&&c!==void 0?c:Yd,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:v=>Hy[v-1]||Gy,this.vsn){case Lp:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:(v,y)=>y(JSON.stringify(v)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(v,y)=>y(JSON.parse(v));break;case Ly:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(x=e==null?void 0:e.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}};const Yy=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:Vy,get REALTIME_LISTEN_TYPES(){return Ls},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Zo},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Qo},get REALTIME_SUBSCRIBE_STATES(){return Ut},RealtimeChannel:Mp,RealtimeClient:Xy,RealtimePresence:$p,WebSocketFactory:Ip},Symbol.toStringTag,{value:"Module"})),zp=Xn(Yy);class ta extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function he(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class qp extends ta{constructor(e,r,s){super(e),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ci extends ta{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const hu=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Jy=()=>Response,ec=t=>{if(Array.isArray(t))return t.map(r=>ec(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,s])=>{const n=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[n]=ec(s)}),e},Qy=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Zy=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),$l=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},ew=(t,e,r)=>U(void 0,void 0,void 0,function*(){const s=yield Jy();t instanceof s&&!(r!=null&&r.noResolveJson)?t.json().then(n=>{const a=t.status||500,l=(n==null?void 0:n.statusCode)||a+"";e(new qp($l(n),a,l))}).catch(n=>{e(new Ci($l(n),n))}):e(new Ci($l(t),t))}),tw=(t,e,r,s)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?n:(Qy(s)?(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(s)):n.body=s,e!=null&&e.duplex&&(n.duplex=e.duplex),Object.assign(Object.assign({},n),r))};function ra(t,e,r,s,n,a){return U(this,void 0,void 0,function*(){return new Promise((l,o)=>{t(r,tw(e,s,n,a)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>ew(c,o,s))})})}function Gn(t,e,r,s){return U(this,void 0,void 0,function*(){return ra(t,"GET",e,r,s)})}function Nt(t,e,r,s,n){return U(this,void 0,void 0,function*(){return ra(t,"POST",e,s,n,r)})}function tc(t,e,r,s,n){return U(this,void 0,void 0,function*(){return ra(t,"PUT",e,s,n,r)})}function rw(t,e,r,s){return U(this,void 0,void 0,function*(){return ra(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function fu(t,e,r,s,n){return U(this,void 0,void 0,function*(){return ra(t,"DELETE",e,s,n,r)})}class sw{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return U(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(he(e))return{data:null,error:e};throw e}})}}var Wp;class nw{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[Wp]="BlobDownloadBuilder",this.promise=null}asStream(){return new sw(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return U(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(he(e))return{data:null,error:e};throw e}})}}Wp=Symbol.toStringTag;const aw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Qd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class iw{constructor(e,r={},s,n){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=s,this.fetch=hu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,s,n){return U(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},Qd),n);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.has("cacheControl")||a.append("cacheControl",l.cacheControl),c&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(c))):(a=s,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!l.duplex&&(l.duplex="half")),n!=null&&n.headers&&(o=Object.assign(Object.assign({},o),n.headers));const u=this._removeEmptyFolders(r),h=this._getFinalPath(u),d=yield(e=="PUT"?tc:Nt)(this.fetch,`${this.url}/object/${h}`,a,Object.assign({headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(he(a))return{data:null,error:a};throw a}})}upload(e,r,s){return U(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,s)})}uploadToSignedUrl(e,r,s,n){return U(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),l=this._getFinalPath(a),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Qd.upsert},n),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const d=yield tc(this.fetch,o.toString(),c,{headers:h});return{data:{path:a,fullPath:d.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(he(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return U(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);r!=null&&r.upsert&&(n["x-upsert"]="true");const a=yield Nt(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),l=new URL(this.url+a.url),o=l.searchParams.get("token");if(!o)throw new ta("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:o},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(he(s))return{data:null,error:s};throw s}})}update(e,r,s){return U(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,s)})}move(e,r,s){return U(this,void 0,void 0,function*(){try{return{data:yield Nt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(he(n))return{data:null,error:n};throw n}})}copy(e,r,s){return U(this,void 0,void 0,function*(){try{return{data:{path:(yield Nt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(he(n))return{data:null,error:n};throw n}})}createSignedUrl(e,r,s){return U(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),a=yield Nt(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(he(n))return{data:null,error:n};throw n}})}createSignedUrls(e,r,s){return U(this,void 0,void 0,function*(){try{const n=yield Nt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(he(n))return{data:null,error:n};throw n}})}download(e,r){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=a?`?${a}`:"",o=this._getFinalPath(e),c=()=>Gn(this.fetch,`${this.url}/${n}/${o}${l}`,{headers:this.headers,noResolveJson:!0});return new nw(c,this.shouldThrowOnError)}info(e){return U(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const s=yield Gn(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ec(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(he(s))return{data:null,error:s};throw s}})}exists(e){return U(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield rw(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(he(s)&&s instanceof Ci){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,r){const s=this._getFinalPath(e),n=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&n.push(a);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&n.push(c);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${u}`)}}}remove(e){return U(this,void 0,void 0,function*(){try{return{data:yield fu(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}})}list(e,r,s){return U(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},aw),r),{prefix:e||""});return{data:yield Nt(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(he(n))return{data:null,error:n};throw n}})}listV2(e,r){return U(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Nt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(he(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Vp="2.86.2",Hp={"X-Client-Info":`storage-js/${Vp}`};class lw{constructor(e,r={},s,n){this.shouldThrowOnError=!1;const a=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hp),r),this.fetch=hu(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return U(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield Gn(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}})}getBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield Gn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}})}createBucket(e){return U(this,arguments,void 0,function*(r,s={public:!1}){try{return{data:yield Nt(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(he(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return U(this,void 0,void 0,function*(){try{return{data:yield tc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(he(s))return{data:null,error:s};throw s}})}emptyBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield Nt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}})}deleteBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield fu(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var Kn=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function ow(t,e,r){const s=new URL(e,t);if(r)for(const[n,a]of Object.entries(r))a!==void 0&&s.searchParams.set(n,a);return s.toString()}async function cw(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function uw(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:n,body:a,headers:l}){const o=ow(t.baseUrl,s,n),c=await cw(t.auth),u=await e(o,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...c,...l},body:a?JSON.stringify(a):void 0}),h=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),f=d&&h?JSON.parse(h):h;if(!u.ok){const x=d?f:void 0,v=x==null?void 0:x.error;throw new Kn((v==null?void 0:v.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:x})}return{status:u.status,headers:u.headers,data:f}}}}function Ra(t){return t.join("")}var dw=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Ra(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ra(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ra(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ra(t.namespace)}`}),!0}catch(e){if(e instanceof Kn&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof Kn&&r.status===409)return;throw r}}};function cs(t){return t.join("")}var hw=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${cs(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${cs(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${cs(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${cs(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${cs(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${cs(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof Kn&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof Kn&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},fw=class{constructor(t){var s;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=uw({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(s=t.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new dw(this.client,e),this.tableOps=new hw(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class Gp{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hp),r),this.fetch=hu(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield Nt(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}})}listBuckets(e){return U(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const s=r.toString(),n=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield Gn(this.fetch,n,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}})}deleteBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield fu(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}})}from(e){if(!Zy(e))throw new ta("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new fw({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>U(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const mu={"X-Client-Info":`storage-js/${Vp}`,"Content-Type":"application/json"};class pu extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ze(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Ga extends pu{constructor(e,r,s){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Kp extends pu{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var rc;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(rc||(rc={}));const tl=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),mw=()=>Response,Xp=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},pw=t=>Array.from(new Float32Array(t)),gw=(t,e)=>{if(e!==void 0&&t.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${t.float32.length}`)},Zd=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),xw=(t,e,r)=>U(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const n=t.status||500,a=t;if(typeof a.json=="function")a.json().then(l=>{const o=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||n+"";e(new Ga(Zd(l),n,o))}).catch(()=>{const l=n+"",o=a.statusText||`HTTP ${n} error`;e(new Ga(o,n,l))});else{const l=n+"",o=a.statusText||`HTTP ${n} error`;e(new Ga(o,n,l))}}else e(new Kp(Zd(t),t))}),vw=(t,e,r,s)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return s?(Xp(s)?(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(s)):n.body=s,Object.assign(Object.assign({},n),r)):n};function yw(t,e,r,s,n,a){return U(this,void 0,void 0,function*(){return new Promise((l,o)=>{t(r,vw(e,s,n,a)).then(c=>{if(!c.ok)throw c;if(s!=null&&s.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>l(c)).catch(c=>xw(c,o,s))})})}function ot(t,e,r,s,n){return U(this,void 0,void 0,function*(){return yw(t,"POST",e,s,n,r)})}class Yp{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},mu),r),this.fetch=tl(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return U(this,void 0,void 0,function*(){try{return{data:(yield ot(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}getIndex(e,r){return U(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}listIndexes(e){return U(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return U(this,void 0,void 0,function*(){try{return{data:(yield ot(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}}class Jp{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},mu),r),this.fetch=tl(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return U(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ot(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}getVectors(e){return U(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}listVectors(e){return U(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield ot(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}queryVectors(e){return U(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}deleteVectors(e){return U(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ot(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}}class Qp{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},mu),r),this.fetch=tl(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return U(this,void 0,void 0,function*(){try{return{data:(yield ot(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}getBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}listBuckets(){return U(this,arguments,void 0,function*(e={}){try{return{data:yield ot(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}deleteBucket(e){return U(this,void 0,void 0,function*(){try{return{data:(yield ot(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}}class Zp extends Qp{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new e0(this.url,this.headers,e,this.fetch)}createBucket(e){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return U(this,void 0,void 0,function*(){return r.createBucket.call(this,e)})}getBucket(e){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return U(this,void 0,void 0,function*(){return r.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return U(this,arguments,void 0,function*(r={}){return e.listBuckets.call(this,r)})}deleteBucket(e){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return U(this,void 0,void 0,function*(){return r.deleteBucket.call(this,e)})}}class e0 extends Yp{constructor(e,r,s,n){super(e,r,n),this.vectorBucketName=s}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return U(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return U(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return U(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return U(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new t0(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class t0 extends Jp{constructor(e,r,s,n,a){super(e,r,a),this.vectorBucketName=s,this.indexName=n}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return U(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return U(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return U(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return U(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return U(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class ww extends lw{constructor(e,r={},s,n){super(e,r,s,n)}from(e){return new iw(this.url,this.headers,e,this.fetch)}get vectors(){return new Zp(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Gp(this.url+"/iceberg",this.headers,this.fetch)}}const bw=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:Gp,StorageApiError:qp,StorageClient:ww,StorageError:ta,StorageUnknownError:Ci,StorageVectorsApiError:Ga,StorageVectorsClient:Zp,StorageVectorsError:pu,get StorageVectorsErrorCode(){return rc},StorageVectorsUnknownError:Kp,VectorBucketApi:Qp,VectorBucketScope:e0,VectorDataApi:Jp,VectorIndexApi:Yp,VectorIndexScope:t0,isPlainObject:Xp,isStorageError:he,isStorageVectorsError:Ze,normalizeToFloat32:pw,resolveFetch:tl,resolveResponse:mw,validateVectorDimension:gw},Symbol.toStringTag,{value:"Module"})),_w=Xn(bw);var r0={},rl={};Object.defineProperty(rl,"__esModule",{value:!0});rl.version=void 0;rl.version="2.86.2";(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const e=rl;let r="";typeof Deno<"u"?r="deno":typeof document<"u"?r="web":typeof navigator<"u"&&navigator.product==="ReactNative"?r="react-native":r="node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${r}/${e.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}})(r0);var s0={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const e=n=>n?(...a)=>n(...a):(...a)=>fetch(...a);t.resolveFetch=e;const r=()=>Headers;t.resolveHeadersConstructor=r;const s=(n,a,l)=>{const o=(0,t.resolveFetch)(l),c=(0,t.resolveHeadersConstructor)();return async(u,h)=>{var d;const f=(d=await a())!==null&&d!==void 0?d:n;let x=new c(h==null?void 0:h.headers);return x.has("apikey")||x.set("apikey",n),x.has("Authorization")||x.set("Authorization",`Bearer ${f}`),o(u,Object.assign(Object.assign({},h),{headers:x}))}};t.fetchWithAuth=s})(s0);var Rr={};Object.defineProperty(Rr,"__esModule",{value:!0});Rr.isBrowser=void 0;Rr.uuid=Ew;Rr.ensureTrailingSlash=n0;Rr.applySettingDefaults=Sw;Rr.validateSupabaseUrl=Nw;function Ew(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,r=t=="x"?e:e&3|8;return r.toString(16)})}function n0(t){return t.endsWith("/")?t:t+"/"}const kw=()=>typeof window<"u";Rr.isBrowser=kw;function Sw(t,e){var r,s;const{db:n,auth:a,realtime:l,global:o}=t,{db:c,auth:u,realtime:h,global:d}=e,f={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},h),l),storage:{},global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(s=o==null?void 0:o.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function Nw(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(n0(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var sl={};const a0="2.86.2",ms=30*1e3,sc=3,Ml=sc*ms,jw="http://localhost:9999",Tw="supabase.auth.token",Cw={"X-Client-Info":`gotrue-js/${a0}`},nc="X-Supabase-Api-Version",i0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Rw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Pw=10*60*1e3;let Hs=class extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}};function F(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}let l0=class extends Hs{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}};function o0(t){return F(t)&&t.name==="AuthApiError"}let cr=class extends Hs{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}},rr=class extends Hs{constructor(e,r,s,n){super(e,s,n),this.name=r,this.status=s}},Je=class extends rr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function c0(t){return F(t)&&t.name==="AuthSessionMissingError"}let Ur=class extends rr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},pn=class extends rr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},gn=class extends rr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function u0(t){return F(t)&&t.name==="AuthImplicitGrantRedirectError"}let ac=class extends rr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Ri=class extends rr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}};function Ka(t){return F(t)&&t.name==="AuthRetryableFetchError"}let ic=class extends rr{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}};function Aw(t){return F(t)&&t.name==="AuthWeakPasswordError"}let Pi=class extends rr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const Ai="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),eh=` 	
\r=`.split(""),Ow=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<eh.length;e+=1)t[eh[e].charCodeAt(0)]=-2;for(let e=0;e<Ai.length;e+=1)t[Ai[e].charCodeAt(0)]=e;return t})();function th(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Ai[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Ai[s]),e.queuedBits-=6}}function d0(t,e,r){const s=Ow[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function rh(t){const e=[],r=l=>{e.push(String.fromCodePoint(l))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},a=l=>{Uw(l,s,r)};for(let l=0;l<t.length;l+=1)d0(t.charCodeAt(l),n,a);return e.join("")}function Iw(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Lw(t,e){for(let r=0;r<t.length;r+=1){let s=t.charCodeAt(r);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(t.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}Iw(s,e)}}function Uw(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Us(t){const e=[],r={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<t.length;n+=1)d0(t.charCodeAt(n),r,s);return new Uint8Array(e)}function Dw(t){const e=[];return Lw(t,r=>e.push(r)),new Uint8Array(e)}function Wr(t){const e=[],r={queue:0,queuedBits:0},s=n=>{e.push(n)};return t.forEach(n=>th(n,r,s)),th(null,r,s),e.join("")}function Fw(t){return Math.round(Date.now()/1e3)+t}function $w(){return Symbol("auth-callback")}const Ie=()=>typeof window<"u"&&typeof document<"u",Ar={tested:!1,writable:!1},h0=()=>{if(!Ie())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ar.tested)return Ar.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ar.tested=!0,Ar.writable=!0}catch{Ar.tested=!0,Ar.writable=!1}return Ar.writable};function Mw(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,a)=>{e[a]=n})}catch{}return r.searchParams.forEach((s,n)=>{e[n]=s}),e}const f0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Bw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ps=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Or=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Oe=async(t,e)=>{await t.removeItem(e)};class nl{constructor(){this.promise=new nl.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}nl.promiseConstructor=Promise;function Bl(t){const e=t.split(".");if(e.length!==3)throw new Pi("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Rw.test(e[s]))throw new Pi("JWT not in base64url format");return{header:JSON.parse(rh(e[0])),payload:JSON.parse(rh(e[1])),signature:Us(e[2]),raw:{header:e[0],payload:e[1]}}}async function zw(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function qw(t,e){return new Promise((s,n)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await t(a);if(!e(a,null,l)){s(l);return}}catch(l){if(!e(a,l)){n(l);return}}})()})}function Ww(t){return("0"+t.toString(16)).substr(-2)}function Vw(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let n="";for(let a=0;a<56;a++)n+=r.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,Ww).join("")}async function Hw(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(s);return Array.from(n).map(a=>String.fromCharCode(a)).join("")}async function Gw(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Hw(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function us(t,e,r=!1){const s=Vw();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await ps(t,`${e}-code-verifier`,n);const a=await Gw(s);return[a,s===a?"plain":"s256"]}const Kw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Xw(t){const e=t.headers.get(nc);if(!e||!e.match(Kw))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Yw(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Jw(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Qw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ds(t){if(!Qw.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function zl(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Zw(t,e){return new Proxy(t,{get:(r,s,n)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const a=s.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,n)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,s,n)}})}function sh(t){return JSON.parse(JSON.stringify(t))}const Dr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),eb=[502,503,504];async function nh(t){var e;if(!Bw(t))throw new Ri(Dr(t),0);if(eb.includes(t.status))throw new Ri(Dr(t),t.status);let r;try{r=await t.json()}catch(a){throw new cr(Dr(a),a)}let s;const n=Xw(t);if(n&&n.getTime()>=i0["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new ic(Dr(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Je}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new ic(Dr(r),t.status,r.weak_password.reasons);throw new l0(Dr(r),t.status||500,s)}const tb=(t,e,r,s)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))};async function z(t,e,r,s){var n;const a=Object.assign({},s==null?void 0:s.headers);a[nc]||(a[nc]=i0["2024-01-01"].name),s!=null&&s.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const l=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(l.redirect_to=s.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await rb(t,e,r+o,{headers:a,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function rb(t,e,r,s,n,a){const l=tb(e,s,n,a);let o;try{o=await t(r,Object.assign({},l))}catch(c){throw console.error(c),new Ri(Dr(c),0)}if(o.ok||await nh(o),s!=null&&s.noResolveJson)return o;try{return await o.json()}catch(c){await nh(c)}}function kt(t){var e;let r=null;ab(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Fw(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function ah(t){const e=kt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ur(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function sb(t){return{data:t,error:null}}function nb(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:n,verification_type:a}=t,l=Js(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:r,hashed_token:s,redirect_to:n,verification_type:a},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function ih(t){return t}function ab(t){return t.access_token&&t.refresh_token&&t.expires_in}const Xa=["global","local","others"];let gu=class{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=f0(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Xa[0]){if(Xa.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Xa.join(", ")}`);try{return await z(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(F(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await z(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ur})}catch(s){if(F(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=Js(e,["options"]),n=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:nb,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(F(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await z(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ur})}catch(r){if(F(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,n,a,l,o,c;try{const u={nextPage:null,lastPage:0,total:0},h=await z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(a=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:""},xform:ih});if(h.error)throw h.error;const d=await h.json(),f=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(c=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(F(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){ds(e);try{return await z(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ur})}catch(r){if(F(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){ds(e);try{return await z(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:ur})}catch(s){if(F(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){ds(e);try{return await z(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:ur})}catch(s){if(F(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){ds(e.userId);try{const{data:r,error:s}=await z(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:s}}catch(r){if(F(r))return{data:null,error:r};throw r}}async _deleteFactor(e){ds(e.userId),ds(e.id);try{return{data:await z(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(F(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,s,n,a,l,o,c;try{const u={nextPage:null,lastPage:0,total:0},h=await z(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(a=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:""},xform:ih});if(h.error)throw h.error;const d=await h.json(),f=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(c=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(F(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await z(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(F(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await z(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(F(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await z(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(F(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await z(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(F(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await z(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(F(r))return{data:null,error:r};throw r}}};function lh(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const Fr={debug:!!(globalThis&&h0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class xu extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let m0=class extends xu{};class ib extends xu{}async function p0(t,e,r){Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await r()}finally{Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new m0(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Fr.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const oh={};async function lb(t,e,r){var s;const n=(s=oh[t])!==null&&s!==void 0?s:Promise.resolve(),a=Promise.race([n.catch(()=>null),e>=0?new Promise((l,o)=>{setTimeout(()=>{o(new ib(`Acquring process lock with name "${t}" timed out`))},e)}):null].filter(l=>l)).catch(l=>{if(l&&l.isAcquireTimeout)throw l;return null}).then(async()=>await r());return oh[t]=a.catch(async l=>{if(l&&l.isAcquireTimeout)return await n,null;throw l}),await a}function ob(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function g0(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function cb(t){return parseInt(t,16)}function ub(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function db(t){var e;const{chainId:r,domain:s,expirationTime:n,issuedAt:a=new Date,nonce:l,notBefore:o,requestId:c,resources:u,scheme:h,uri:d,version:f}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const x=g0(t.address),v=h?`${h}://${s}`:s,y=t.statement?`${t.statement}
`:"",w=`${v} wants you to sign in with your Ethereum account:
${x}

${y}`;let g=`URI: ${d}
Version: ${f}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(n&&(g+=`
Expiration Time: ${n.toISOString()}`),o&&(g+=`
Not Before: ${o.toISOString()}`),c&&(g+=`
Request ID: ${c}`),u){let p=`
Resources:`;for(const m of u){if(!m||typeof m!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${m}`);p+=`
- ${m}`}g+=p}return`${w}
${g}`}class Se extends Error{constructor({message:e,code:r,cause:s,name:n}){var a;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(a=n??(s instanceof Error?s.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class Oi extends Se{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function hb({error:t,options:e}){var r,s,n;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Se({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Se({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Se({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Se({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Se({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Se({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new Se({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Se({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(x0(l)){if(a.rp.id!==l)return new Se({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Se({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Se({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Se({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Se({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function fb({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Se({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Se({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(x0(s)){if(r.rpId!==s)return new Se({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Se({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Se({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Se({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class mb{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const pb=new mb;function gb(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:s}=t,n=Js(t,["challenge","user","excludeCredentials"]),a=Us(e).buffer,l=Object.assign(Object.assign({},r),{id:Us(r.id).buffer}),o=Object.assign(Object.assign({},n),{challenge:a,user:l});if(s&&s.length>0){o.excludeCredentials=new Array(s.length);for(let c=0;c<s.length;c++){const u=s[c];o.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Us(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function xb(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,s=Js(t,["challenge","allowCredentials"]),n=Us(e).buffer,a=Object.assign(Object.assign({},s),{challenge:n});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const o=r[l];a.allowCredentials[l]=Object.assign(Object.assign({},o),{id:Us(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return a}function vb(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Wr(new Uint8Array(t.response.attestationObject)),clientDataJSON:Wr(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function yb(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,s=t.getClientExtensionResults(),n=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Wr(new Uint8Array(n.authenticatorData)),clientDataJSON:Wr(new Uint8Array(n.clientDataJSON)),signature:Wr(new Uint8Array(n.signature)),userHandle:n.userHandle?Wr(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function x0(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function ch(){var t,e;return!!(Ie()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function wb(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Oi("Browser returned unexpected credential type",e)}:{data:null,error:new Oi("Empty credential response",e)}}catch(e){return{data:null,error:hb({error:e,options:t})}}}async function bb(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Oi("Browser returned unexpected credential type",e)}:{data:null,error:new Oi("Empty credential response",e)}}catch(e){return{data:null,error:fb({error:e,options:t})}}}const _b={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Eb={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ii(...t){const e=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),r=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),s={};for(const n of t)if(n)for(const a in n){const l=n[a];if(l!==void 0)if(Array.isArray(l))s[a]=l;else if(r(l))s[a]=l;else if(e(l)){const o=s[a];e(o)?s[a]=Ii(o,l):s[a]=Ii(l)}else s[a]=l}return s}function kb(t,e){return Ii(_b,t,e||{})}function Sb(t,e){return Ii(Eb,t,e||{})}class Nb{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:s,signal:n},a){try{const{data:l,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!l)return{data:null,error:o};const c=n??pb.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:u}=l.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${s}`),u.displayName||(u.displayName=u.name)}switch(l.webauthn.type){case"create":{const u=kb(l.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:h,error:d}=await wb({publicKey:u,signal:c});return h?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}case"request":{const u=Sb(l.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:h,error:d}=await bb(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:u,signal:c}));return h?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}}}catch(l){return F(l)?{data:null,error:l}:{data:null,error:new cr("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},a){if(!r)return{data:null,error:new Hs("rpId is required for WebAuthn authentication")};try{if(!ch())return{data:null,error:new cr("Browser does not support WebAuthn",null)};const{data:l,error:o}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:s},signal:n},{request:a});if(!l)return{data:null,error:o};const{webauthn:c}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:s,credential_response:c.credential_response}})}catch(l){return F(l)?{data:null,error:l}:{data:null,error:new cr("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},a){if(!r)return{data:null,error:new Hs("rpId is required for WebAuthn registration")};try{if(!ch())return{data:null,error:new cr("Browser does not support WebAuthn",null)};const{data:l,error:o}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(h=>{var d;return(d=h.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:o};const{data:c,error:u}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:n},{create:a});return c?this._verify({factorId:l.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:s,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(l){return F(l)?{data:null,error:l}:{data:null,error:new cr("Unexpected error in register",l)}}}}ob();const jb={url:jw,storageKey:Tw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Cw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function uh(t,e,r){return await r()}const hs={};let vu=class lc{get jwks(){var e,r;return(r=(e=hs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){hs[this.storageKey]=Object.assign(Object.assign({},hs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=hs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){hs[this.storageKey]=Object.assign(Object.assign({},hs[this.storageKey]),{cachedAt:e})}constructor(e){var r,s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},jb),e);if(this.storageKey=a.storageKey,this.instanceID=(r=lc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,lc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Ie()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new gu({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=f0(a.fetch),this.lock=a.lock||uh,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:Ie()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=p0:this.lock=uh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Nb(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:h0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=lh(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=lh(this.memoryStorage)),Ie()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${a0}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},s="none";if(Ie()&&(r=Mw(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),Ie()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:a}=await this._getSessionFromURL(r,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),u0(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return F(r)?this._returnResult({error:r}):this._returnResult({error:new cr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,n;try{const a=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:kt}),{data:l,error:o}=a;if(o||!l)return this._returnResult({data:{user:null,session:null},error:o});const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(F(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var r,s,n;try{let a;if("email"in e){const{email:h,password:d,options:f}=e;let x=null,v=null;this.flowType==="pkce"&&([x,v]=await us(this.storage,this.storageKey)),a=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:h,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:x,code_challenge_method:v},xform:kt})}else if("phone"in e){const{phone:h,password:d,options:f}=e;a=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:kt})}else throw new pn("You must provide either an email or phone number and a password");const{data:l,error:o}=a;if(o||!l)return await Oe(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),F(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:l,options:o}=e;r=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ah})}else if("phone"in e){const{phone:a,password:l,options:o}=e;r=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ah})}else throw new pn("You must provide either an email or phone number and a password");const{data:s,error:n}=r;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!s||!s.session||!s.user){const a=new Ur;return this._returnResult({data:{user:null,session:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(r){if(F(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,s,n,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,s,n,a,l,o,c,u,h,d,f;let x,v;if("message"in e)x=e.message,v=e.signature;else{const{chain:y,wallet:w,statement:g,options:p}=e;let m;if(Ie())if(typeof w=="object")m=w;else{const W=window;if("ethereum"in W&&typeof W.ethereum=="object"&&"request"in W.ethereum&&typeof W.ethereum.request=="function")m=W.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");m=w}const _=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href),N=await m.request({method:"eth_requestAccounts"}).then(W=>W).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=g0(N[0]);let S=(s=p==null?void 0:p.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!S){const W=await m.request({method:"eth_chainId"});S=cb(W)}const C={domain:_.host,address:E,statement:g,uri:_.href,version:"1",chainId:S,nonce:(n=p==null?void 0:p.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(l=(a=p==null?void 0:p.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(o=p==null?void 0:p.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=p==null?void 0:p.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=p==null?void 0:p.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=p==null?void 0:p.signInWithEthereum)===null||h===void 0?void 0:h.resources};x=db(C),v=await m.request({method:"personal_sign",params:[ub(x),E]})}try{const{data:y,error:w}=await z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:v},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:kt});if(w)throw w;if(!y||!y.session||!y.user){const g=new Ur;return this._returnResult({data:{user:null,session:null},error:g})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:w})}catch(y){if(F(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(e){var r,s,n,a,l,o,c,u,h,d,f,x;let v,y;if("message"in e)v=e.message,y=e.signature;else{const{chain:w,wallet:g,statement:p,options:m}=e;let _;if(Ie())if(typeof g=="object")_=g;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))_=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=g}const N=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const E=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),p?{statement:p}:null));let S;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")S=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)S=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)v=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),y=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${N.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(n=(s=m==null?void 0:m.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((a=m==null?void 0:m.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((o=m==null?void 0:m.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((c=m==null?void 0:m.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((u=m==null?void 0:m.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((d=(h=m==null?void 0:m.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||d===void 0)&&d.length?["Resources",...m.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const E=await _.signMessage(new TextEncoder().encode(v),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=E}}try{const{data:w,error:g}=await z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Wr(y)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:kt});if(g)throw g;if(!w||!w.session||!w.user){const p=new Ur;return this._returnResult({data:{user:null,session:null},error:p})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:g})}catch(w){if(F(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(e){const r=await Or(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(r??"").split("/");try{const{data:a,error:l}=await z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:kt});if(await Oe(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!a||!a.session||!a.user){const o=new Ur;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:n??null}),error:l})}catch(a){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),F(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:r,provider:s,token:n,access_token:a,nonce:l}=e,o=await z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:kt}),{data:c,error:u}=o;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const h=new Ur;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(F(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,s,n,a,l;try{if("email"in e){const{email:o,options:c}=e;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await us(this.storage,this.storageKey));const{error:d}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:o,options:c}=e,{data:u,error:h}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new pn("You must provide either an email or phone number.")}catch(o){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),F(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(e){var r,s;try{let n,a;"options"in e&&(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:l,error:o}=await z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:n,xform:kt});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,u=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(n){if(F(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(e){var r,s,n,a,l;try{let o=null,c=null;this.flowType==="pkce"&&([o,c]=await us(this.storage,this.storageKey));const u=await z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:sb});return!((a=u.data)===null||a===void 0)&&a.url&&Ie()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(o){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),F(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new Je;const{error:n}=await z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(e){if(F(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:a}=e,{error:l}=await z(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:s,type:n,options:a}=e,{data:l,error:o}=await z(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o})}throw new pn("You must provide either an email or phone number and a type")}catch(r){if(F(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Or(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Ml:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const l=await Or(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=zl()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=Zw(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ur}):await this._useSession(async r=>{var s,n,a;const{data:l,error:o}=r;if(o)throw o;return!(!((s=l.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Je}:await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0,xform:ur})})}catch(r){if(F(r))return c0(r)&&(await this._removeSession(),await Oe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:n,error:a}=s;if(a)throw a;if(!n.session)throw new Je;const l=n.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await us(this.storage,this.storageKey));const{data:u,error:h}=await z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:ur});if(h)throw h;return l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(s){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),F(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Je;const r=Date.now()/1e3;let s=r,n=!0,a=null;const{payload:l}=Bl(e.access_token);if(l.exp&&(s=l.exp,n=s<=r),n){const{data:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(F(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:l,error:o}=r;if(o)throw o;e=(s=l.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Je;const{data:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(F(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Ie())throw new gn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new gn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ac("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new gn("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ac("No code detected.");const{data:p,error:m}=await this._exchangeCodeForSession(e.code);if(m)throw m;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:a,refresh_token:l,expires_in:o,expires_at:c,token_type:u}=e;if(!a||!o||!l||!u)throw new gn("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(o);let f=h+d;c&&(f=parseInt(c));const x=f-h;x*1e3<=ms&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${d}s`);const v=f-d;h-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,h):h-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,h);const{data:y,error:w}=await this._getUser(a);if(w)throw w;const g={provider_token:s,provider_refresh_token:n,access_token:a,expires_in:d,expires_at:f,refresh_token:l,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(s){if(F(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Or(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:n,error:a}=r;if(a)return this._returnResult({error:a});const l=(s=n.session)===null||s===void 0?void 0:s.access_token;if(l){const{error:o}=await this.admin.signOut(l,e);if(o&&!(o0(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return e!=="others"&&(await this._removeSession(),await Oe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=$w(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,n;try{const{data:{session:a},error:l}=r;if(l)throw l;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await us(this.storage,this.storageKey,!0));try{return await z(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),F(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(F(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:s,error:n}=await this._useSession(async a=>{var l,o,c,u,h;const{data:d,error:f}=a;if(f)throw f;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await z(this.fetch,"GET",x,{headers:this.headers,jwt:(h=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(n)throw n;return Ie()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(F(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var s;try{const{error:n,data:{session:a}}=r;if(n)throw n;const{options:l,provider:o,token:c,access_token:u,nonce:h}=e,d=await z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=a==null?void 0:a.access_token)!==null&&s!==void 0?s:void 0,body:{provider:o,id_token:c,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:kt}),{data:f,error:x}=d;return x?this._returnResult({data:{user:null,session:null},error:x}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Ur}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:x}))}catch(n){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),F(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,n;const{data:a,error:l}=r;if(l)throw l;return await z(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(F(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await qw(async n=>(n>0&&await zw(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:kt})),(n,a)=>{const l=200*Math.pow(2,n);return a&&Ka(a)&&Date.now()+l-s<ms})}catch(s){if(this._debug(r,"error",s),F(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),Ie()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await Or(this.storage,this.storageKey);if(n&&this.userStorage){let l=await Or(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:n.user},await ps(this.userStorage,this.storageKey+"-user",l)),n.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:zl()}else if(n&&!n.user&&!n.user){const l=await Or(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(n.user=l.user,await Oe(this.storage,this.storageKey+"-user"),await ps(this.storage,this.storageKey,n)):n.user=zl()}if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const a=((r=n.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ml;if(this._debug(s,`session has${a?"":" not"} expired with margin of ${Ml}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:l}=await this._callRefreshToken(n.refresh_token);l&&(console.error(l),Ka(l)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:o}=await this._getUser(n.access_token);!o&&(l!=null&&l.user)?(n.user=l.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(s,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new Je;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new nl;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new Je;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={data:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(n,"error",a),F(a)){const l={data:null,error:a};return Ka(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,r,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,r)}catch(c){a.push(c)}});if(await Promise.all(l),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Oe(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await ps(this.userStorage,this.storageKey+"-user",{user:r.user});const n=Object.assign({},r);delete n.user;const a=sh(n);await ps(this.storage,this.storageKey,a)}else{const n=sh(r);await ps(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Oe(this.storage,this.storageKey),await Oe(this.storage,this.storageKey+"-code-verifier"),await Oe(this.storage,this.storageKey+"-user"),this.userStorage&&await Oe(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ie()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ms);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/ms);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${ms}ms, refresh threshold is ${sc} ticks`),n<=sc&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof xu)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ie()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const n=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,l]=await us(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});n.push(o.toString())}if(s!=null&&s.queryParams){const a=new URLSearchParams(s.queryParams);n.push(a.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:n,error:a}=r;return a?this._returnResult({data:null,error:a}):await z(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(F(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,n;const{data:a,error:l}=r;if(l)return this._returnResult({data:null,error:l});const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await z(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&c.type==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(F(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:a}=r;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?vb(e.webauthn.credential_response):yb(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:c}=await z(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:c}))})}catch(r){if(F(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:a}=r;if(a)return this._returnResult({data:null,error:a});const l=await z(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});if(l.error)return l;const{data:o}=l;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:gb(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:xb(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(F(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const n={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])n.all.push(a),a.status==="verified"&&n[a.factor_type].push(a);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:s},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Bl(s.access_token);let l=null;a.aal&&(l=a.aal);let o=l;((r=(e=s.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const u=a.amr||[];return{data:{currentLevel:l,nextLevel:o,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:s},error:n}=r;return n?this._returnResult({data:null,error:n}):s?await z(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Je})})}catch(r){if(F(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async s=>{const{data:{session:n},error:a}=s;if(a)return this._returnResult({data:null,error:a});if(!n)return this._returnResult({data:null,error:new Je});const l=await z(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return l.data&&l.data.redirect_url&&Ie()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(s){if(F(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,r){try{return await this._useSession(async s=>{const{data:{session:n},error:a}=s;if(a)return this._returnResult({data:null,error:a});if(!n)return this._returnResult({data:null,error:new Je});const l=await z(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return l.data&&l.data.redirect_url&&Ie()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(s){if(F(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;return s?this._returnResult({data:null,error:s}):r?await z(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:n=>({data:n,error:null})}):this._returnResult({data:null,error:new Je})})}catch(e){if(F(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:s},error:n}=r;return n?this._returnResult({data:null,error:n}):s?(await z(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Je})})}catch(r){if(F(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let s=r.keys.find(o=>o.kid===e);if(s)return s;const n=Date.now();if(s=this.jwks.keys.find(o=>o.kid===e),s&&this.jwks_cached_at+Pw>n)return s;const{data:a,error:l}=await z(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=n,s=a.keys.find(o=>o.kid===e),!s)?null:s}async getClaims(e,r={}){try{let s=e;if(!s){const{data:x,error:v}=await this.getSession();if(v||!x.session)return this._returnResult({data:null,error:v});s=x.session.access_token}const{header:n,payload:a,signature:l,raw:{header:o,payload:c}}=Bl(s);r!=null&&r.allowExpired||Yw(a.exp);const u=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:x}=await this.getUser(s);if(x)throw x;return{data:{claims:a,header:n,signature:l},error:null}}const h=Jw(n.alg),d=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,l,Dw(`${o}.${c}`)))throw new Pi("Invalid JWT signature");return{data:{claims:a,header:n,signature:l},error:null}}catch(s){if(F(s))return this._returnResult({data:null,error:s});throw s}}};vu.nextInstanceID={};const Tb=gu,Cb=vu,Rb=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:Tb,AuthApiError:l0,AuthClient:Cb,AuthError:Hs,AuthImplicitGrantRedirectError:gn,AuthInvalidCredentialsError:pn,AuthInvalidJwtError:Pi,AuthInvalidTokenResponseError:Ur,AuthPKCEGrantCodeExchangeError:ac,AuthRetryableFetchError:Ri,AuthSessionMissingError:Je,AuthUnknownError:cr,AuthWeakPasswordError:ic,CustomAuthError:rr,GoTrueAdminApi:gu,GoTrueClient:vu,NavigatorLockAcquireTimeoutError:m0,SIGN_OUT_SCOPES:Xa,isAuthApiError:o0,isAuthError:F,isAuthImplicitGrantRedirectError:u0,isAuthRetryableFetchError:Ka,isAuthSessionMissingError:c0,isAuthWeakPasswordError:Aw,lockInternals:Fr,navigatorLock:p0,processLock:lb},Symbol.toStringTag,{value:"Module"})),v0=Xn(Rb);Object.defineProperty(sl,"__esModule",{value:!0});sl.SupabaseAuthClient=void 0;const Pb=v0;class Ab extends Pb.AuthClient{constructor(e){super(e)}}sl.SupabaseAuthClient=Ab;Object.defineProperty(Si,"__esModule",{value:!0});const Ob=_p,Ib=qe,Lb=zp,Ub=_w,Pa=r0,Db=s0,dh=Rr,Fb=sl;let $b=class{constructor(e,r,s){var n,a,l;this.supabaseUrl=e,this.supabaseKey=r;const o=(0,dh.validateSupabaseUrl)(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:Pa.DEFAULT_DB_OPTIONS,realtime:Pa.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},Pa.DEFAULT_AUTH_OPTIONS),{storageKey:c}),global:Pa.DEFAULT_GLOBAL_OPTIONS},h=(0,dh.applySettingDefaults)(s??{},u);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=h.auth)!==null&&l!==void 0?l:{},this.headers,h.global.fetch),this.fetch=(0,Db.fetchWithAuth)(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new Ib.PostgrestClient(new URL("rest/v1",o).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new Ub.StorageClient(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Ob.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,s)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(r=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:n,userStorage:a,storageKey:l,flowType:o,lock:c,debug:u,throwOnError:h},d,f){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Fb.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),d),storageKey:l,autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:n,userStorage:a,flowType:o,lock:c,debug:u,throwOnError:h,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Lb.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,r,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};Si.default=$b;(function(t){var e=ls&&ls.__createBinding||(Object.create?function(h,d,f,x){x===void 0&&(x=f);var v=Object.getOwnPropertyDescriptor(d,f);(!v||("get"in v?!d.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return d[f]}}),Object.defineProperty(h,x,v)}:function(h,d,f,x){x===void 0&&(x=f),h[x]=d[f]}),r=ls&&ls.__exportStar||function(h,d){for(var f in h)f!=="default"&&!Object.prototype.hasOwnProperty.call(d,f)&&e(d,h,f)},s=ls&&ls.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const n=s(Si);r(v0,t);var a=qe;Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return a.PostgrestError}});var l=_p;Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return l.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return l.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return l.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return l.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return l.FunctionRegion}}),r(zp,t);var o=Si;Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return s(o).default}});const c=(h,d,f)=>new n.default(h,d,f);t.createClient=c;function u(){if(typeof window<"u"||typeof process>"u")return!1;const h=process.version;if(h==null)return!1;const d=h.match(/^v(\d+)\./);return d?parseInt(d[1],10)<=18:!1}u()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(cu);const y0=ph(cu),Mb=mh({__proto__:null,default:y0},[cu]),{PostgrestError:A_,FunctionsHttpError:O_,FunctionsFetchError:I_,FunctionsRelayError:L_,FunctionsError:U_,FunctionRegion:D_,SupabaseClient:F_,createClient:Bb,GoTrueAdminApi:$_,GoTrueClient:M_,AuthAdminApi:B_,AuthClient:z_,navigatorLock:q_,NavigatorLockAcquireTimeoutError:W_,lockInternals:V_,processLock:H_,SIGN_OUT_SCOPES:G_,AuthError:K_,AuthApiError:X_,AuthUnknownError:Y_,CustomAuthError:J_,AuthSessionMissingError:Q_,AuthInvalidTokenResponseError:Z_,AuthInvalidCredentialsError:eE,AuthImplicitGrantRedirectError:tE,AuthPKCEGrantCodeExchangeError:rE,AuthRetryableFetchError:sE,AuthWeakPasswordError:nE,AuthInvalidJwtError:aE,isAuthError:iE,isAuthApiError:lE,isAuthSessionMissingError:oE,isAuthImplicitGrantRedirectError:cE,isAuthRetryableFetchError:uE,isAuthWeakPasswordError:dE,RealtimePresence:hE,RealtimeChannel:fE,RealtimeClient:mE,REALTIME_LISTEN_TYPES:pE,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:gE,REALTIME_PRESENCE_LISTEN_EVENTS:xE,REALTIME_SUBSCRIBE_STATES:vE,REALTIME_CHANNEL_STATES:yE}=y0||Mb,zb="https://eannpgaknjctmcrhhnqw.supabase.co",qb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVhbm5wZ2FrbmpjdG1jcmhobnF3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ2NTk4MjYsImV4cCI6MjA4MDIzNTgyNn0.zPI39Lr7vAgfs9J6FEC8SiQ1fyWdE9bvnVb674dpbeE",w0=()=>localStorage.getItem("sb_url")||zb,b0=()=>localStorage.getItem("sb_key")||qb,P=Bb(w0(),b0()),Wb=()=>({url:w0(),key:b0()});var G=(t=>(t.SUPER_ADMIN="SUPER_ADMIN",t.ADMIN="ADMIN",t.TEACHER="TEACHER",t.STUDENT="STUDENT",t.PUBLIC="PUBLIC",t.GUEST="GUEST",t))(G||{});const Be=()=>localStorage.getItem("school_id"),hh=t=>{if(!t)return[];let e=typeof t=="string"?JSON.parse(t):t;return Array.isArray(e)?e.length===0?[]:typeof e[0]=="string"?e.map(r=>({name:r,maxMarks:50,passMarks:18})):e.map(r=>({name:r.name,maxMarks:r.maxMarks||50,passMarks:r.passMarks||(r.maxMarks?Math.floor(r.maxMarks*.3):18)})):[]},re=t=>{if(console.error("API Error:",t),typeof t=="string")return t;if(t!=null&&t.message)return typeof t.message=="object"?JSON.stringify(t.message):String(t.message);if(t!=null&&t.error_description)return String(t.error_description);try{const e=JSON.stringify(t);if(e!=="{}")return e}catch{}return"An unexpected error occurred."},Vb=t=>new Promise((e,r)=>{const s=new FileReader;s.readAsDataURL(t),s.onload=n=>{var l;const a=new Image;a.src=(l=n.target)==null?void 0:l.result,a.onload=()=>{const o=document.createElement("canvas"),c=500,u=c/a.width;o.width=c,o.height=a.height*u;const h=o.getContext("2d");h==null||h.drawImage(a,0,0,o.width,o.height),o.toBlob(d=>{d?e(d):r(new Error("Canvas is empty"))},"image/jpeg",.8)}},s.onerror=n=>r(n)}),D={generateRecoveryCode:()=>{const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",e=new Uint32Array(16);window.crypto.getRandomValues(e);let r="REC";for(let s=0;s<16;s++)s%4===0&&(r+="-"),r+=t[e[s]%t.length];return r},registerSchool:async(t,e,r,s,n,a)=>{try{const l=e.trim().toLowerCase(),{data:o,error:c}=await P.auth.signUp({email:l,password:r.toLowerCase(),options:{data:{school_name:t,phone:s,place:n,recovery_code:a}}});if(c)throw c;if(o.user&&!o.session)return{success:!1,message:"Registration blocked. Please confirm email settings."};if(o.user){let u=null;for(let h=0;h<5;h++){const{data:d}=await P.from("schools").select("id").eq("auth_id",o.user.id).single();if(d){u=d;break}await new Promise(f=>setTimeout(f,500))}return u?{success:!0,schoolId:u.id}:{success:!1,message:"School creation failed."}}return{success:!1,message:"User creation failed"}}catch(l){return{success:!1,message:re(l)}}},recoverPassword:async t=>{try{const{error:e}=await P.auth.resetPasswordForEmail(t.trim(),{redirectTo:window.location.origin+"/#/login?reset=true"});if(e)throw e;return{success:!0,message:"Password reset link sent."}}catch(e){return{success:!1,message:re(e)}}},resetPasswordWithRecoveryCode:async(t,e,r)=>{try{const{data:s,error:n}=await P.rpc("reset_password_with_code",{email_input:t.trim(),code_input:e.trim(),new_password_input:r.toLowerCase()});if(n)throw n;return s===!0?{success:!0,message:"Password reset successfully!"}:{success:!1,message:"Invalid Email or Recovery Code."}}catch(s){return{success:!1,message:re(s)}}},updateUserPassword:async t=>{const{error:e}=await P.auth.updateUser({password:t.toLowerCase()});return{success:!e,message:e?re(e):void 0}},getSchoolByIdOrSlug:async t=>{if(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t)){const{data:r}=await P.from("schools").select("id, name").eq("id",t).maybeSingle();if(r)return r}return await D.getSchoolBySlug(t)},getSchoolBySlug:async t=>{try{const{data:e,error:r}=await P.from("schools").select("id, name").eq("slug",t.trim().toLowerCase()).maybeSingle();return r?null:e}catch{return null}},getSchoolByAdmissionToken:async t=>{try{const{data:e,error:r}=await P.from("schools").select("id, name, allow_public_admission").eq("admission_token",t.trim()).maybeSingle();return r?null:e}catch{return null}},regenerateAdmissionToken:async()=>{const t=Be();if(!t)return{success:!1,message:"Session expired"};const e=new Uint32Array(4);window.crypto.getRandomValues(e);const r=Array.from(e,n=>n.toString(36)).join(""),{error:s}=await P.from("schools").update({admission_token:r}).eq("id",t);return s?{success:!1,message:re(s)}:{success:!0,token:r}},updateSchoolSlug:async t=>{const e=Be();if(!e)return{success:!1,message:"Session expired"};const r=t.trim().toLowerCase().replace(/[^a-z0-9-]/g,"");if(r.length<3)return{success:!1,message:"Code too short"};const{data:s}=await P.from("schools").select("id").eq("slug",r).maybeSingle();if(s&&s.id!==e)return{success:!1,message:"Code taken."};const{error:n}=await P.from("schools").update({slug:r}).eq("id",e);return{success:!n,message:n?re(n):void 0}},findSchoolByEmailOrName:async t=>{const{data:e}=await P.from("schools").select("id, name, slug").eq("slug",t.toLowerCase()).maybeSingle();if(e)return[e];const{data:r}=await P.from("schools").select("id, name, slug").eq("admin_email",t.toLowerCase()).maybeSingle();if(r)return[r];const{data:s}=await P.from("schools").select("id, name, slug").ilike("name",`%${t}%`).limit(5);return s||[]},login:async(t,e)=>{var r;try{if(t===G.ADMIN){const s=e.email.trim(),{data:n,error:a}=await P.auth.signInWithPassword({email:s,password:e.password.toLowerCase()});if(a)return{success:!1,message:re(a)};const{data:l}=await P.from("schools").select("*").eq("auth_id",(r=n.user)==null?void 0:r.id).single();if(l)return await P.from("schools").update({last_active_at:new Date().toISOString()}).eq("id",l.id),localStorage.setItem("school_id",l.id),{success:!0,user:{...l,logoUrl:l.logo_url,themeColor:l.theme_color||"blue"}}}if(t===G.TEACHER){const{data:s}=await P.from("classes").select("name").eq("id",e.classId).single();if(!s)return{success:!1,message:"Class not found"};const{data:n,error:a}=await P.rpc("teacher_login",{cls_name:s.name,pass:e.password.toLowerCase(),schl_id:Be()});if(n&&!a){const l=n;localStorage.setItem("school_id",l.school_id);const{data:o}=await P.from("schools").select("name, place, logo_url, theme_color, is_pro").eq("id",l.school_id).single();return{success:!0,user:{...l,name:l.name,teacherName:l.teacher_name,teacherPhoto:l.teacher_photo,submissionStatus:l.status||"DRAFT",subjects:hh(l.subjects),schoolName:o==null?void 0:o.name,schoolPlace:o==null?void 0:o.place,schoolLogoUrl:o==null?void 0:o.logo_url,schoolThemeColor:o==null?void 0:o.theme_color,isPro:o==null?void 0:o.is_pro}}}}if(t===G.STUDENT){const{data:s,error:n}=await P.rpc("student_login",{reg_no_in:e.id,pass_in:e.password.toLowerCase(),schl_id:Be()});if(s&&!n){const a=s;localStorage.setItem("school_id",a.school_id);const{data:l}=await P.from("schools").select("logo_url, theme_color").eq("id",a.school_id).single();return{success:!0,user:{...fs(a),schoolLogoUrl:l==null?void 0:l.logo_url,schoolThemeColor:l==null?void 0:l.theme_color}}}}}catch(s){console.error("Login error",s)}return{success:!1,message:"Invalid Credentials"}},createClass:async(t,e,r,s)=>{const n=Be();if(!n)return{success:!1,message:"Session expired"};try{const{error:a}=await P.from("classes").insert([{school_id:n,name:t.trim().toUpperCase(),teacher_password:e.toLowerCase(),teacher_name:r||"Class Teacher",subjects:s,status:"DRAFT"}]);if(a){if(a.code==="23505")return{success:!1,message:"Class name exists."};throw a}return{success:!0}}catch(a){return{success:!1,message:re(a)}}},getClasses:async()=>{const t=Be();if(!t)return[];const{data:e}=await P.from("classes").select("*, students(count)").eq("school_id",t).order("name",{ascending:!0});return(e==null?void 0:e.map(r=>{var s;return{...r,teacherName:r.teacher_name,teacherPhoto:r.teacher_photo,submissionStatus:r.status||"DRAFT",subjects:hh(r.subjects),studentCount:r.students?(s=r.students[0])==null?void 0:s.count:0}}))||[]},updateClassDetails:async(t,e)=>{const r={};e.teacherName!==void 0&&(r.teacher_name=e.teacherName),e.teacherPhoto!==void 0&&(r.teacher_photo=e.teacherPhoto);const{error:s}=await P.from("classes").update(r).eq("id",t);return{success:!s,message:s?re(s):void 0}},changeClassPassword:async(t,e)=>{const{error:r}=await P.from("classes").update({teacher_password:e.toLowerCase()}).eq("id",t);return{success:!r,message:r?re(r):void 0}},getClassesForLogin:async()=>{const t=Be();if(!t)return[];const{data:e}=await P.from("classes").select("id, name").eq("school_id",t).order("name",{ascending:!0});return e||[]},getClassesForPublic:async t=>{const{data:e}=await P.from("classes").select("id, name").eq("school_id",t).order("name",{ascending:!0});return e||[]},getSchoolProgress:async()=>{const t=Be();if(!t)return[];const{data:e}=await P.from("classes").select("id, name, status, students(count)").eq("school_id",t).order("name",{ascending:!0});return e?await Promise.all(e.map(async r=>{var a,l;const s=((l=(a=r.students)==null?void 0:a[0])==null?void 0:l.count)||0;let n=0;if(s>0){const{data:o}=await P.from("students").select("id").eq("class_id",r.id);if(o&&o.length>0){const{count:c}=await P.from("marks").select("student_id",{count:"exact",head:!0}).in("student_id",o.map(u=>u.id)).neq("total",0);n=c||0}}return{id:r.id,name:r.name,status:r.status||"DRAFT",totalStudents:s,gradedCount:n}})):[]},updateClassSubjects:async(t,e)=>{const{error:r}=await P.from("classes").update({subjects:e}).eq("id",t);return{success:!r,message:r?re(r):void 0}},toggleClassSubmission:async(t,e)=>{const{error:r}=await P.from("classes").update({status:e?"SUBMITTED":"DRAFT"}).eq("id",t);return{success:!r,message:r?re(r):void 0}},deleteClass:async t=>{try{const{data:e}=await P.from("students").select("id").eq("class_id",t),r=(e==null?void 0:e.map(n=>n.id))||[];r.length>0&&(await P.from("marks").delete().in("student_id",r),await P.from("profile_requests").delete().in("student_id",r),await P.from("students").delete().eq("class_id",t));const{error:s}=await P.from("classes").delete().eq("id",t);if(s)throw s;return{success:!0}}catch(e){return{success:!1,message:re(e)}}},createStudent:async(t,e)=>{const r=Be();if(!r)return{success:!1,message:"Session expired"};try{const s={school_id:r,class_id:t,reg_no:e.regNo,name:e.name.toUpperCase(),dob:e.dob,gender:e.gender,father_name:e.fatherName,mother_name:e.motherName,photo_url:e.photoUrl,is_verified:!0};e.rollNo&&(s.roll_no=parseInt(e.rollNo));const{error:n}=await P.from("students").insert([s]);if(n){if(n.code==="23505")return{success:!1,message:"Register Number exists."};throw n}return{success:!0}}catch(s){return{success:!1,message:re(s)}}},deleteStudent:async t=>{const{error:e}=await P.from("students").delete().eq("id",t);return{success:!e,message:e?re(e):void 0}},publicRegisterStudent:async(t,e,r)=>{const{data:s}=await P.from("schools").select("allow_public_admission").eq("id",t).single();if(s&&s.allow_public_admission===!1)return{success:!1,message:"Admissions closed."};const n={school_id:t,class_id:e,reg_no:r.regNo,name:r.name.toUpperCase(),dob:r.dob,gender:r.gender,father_name:r.fatherName,mother_name:r.motherName,is_verified:!1};r.rollNo&&(n.roll_no=parseInt(r.rollNo));const{error:a}=await P.from("students").insert([n]);return a&&a.code==="23505"?{success:!1,message:"Register Number exists."}:{success:!a,message:a?re(a):void 0}},publicSearch:async(t,e)=>{try{const{data:r,error:s}=await P.from("students").select("*").eq("reg_no",t).eq("dob",e).eq("is_verified",!0).limit(1);if(s||!r||r.length===0)return null;const n=fs(r[0]),{data:a}=await P.from("marks").select("*").eq("student_id",n.id).limit(1);return{student:n,marks:a&&a.length>0?ql(a[0]):{studentId:n.id,subjects:{},total:0,grade:"N/A",term:"N/A"}}}catch{return null}},getStudentsByClass:async t=>{const{data:e,error:r}=await P.rpc("get_class_students",{cls_id:t});if(!r&&e)return e.map(fs);const{data:s}=await P.from("students").select("*").eq("class_id",t).eq("is_verified",!0).order("roll_no",{ascending:!0,nullsFirst:!1});return(s==null?void 0:s.map(fs))||[]},getStudentNamesForLogin:async t=>{const{data:e,error:r}=await P.rpc("get_class_student_names",{cls_id:t});return!r&&e?e:[]},getPendingAdmissions:async t=>{const{data:e,error:r}=await P.rpc("get_pending_admissions",{cls_id:t});if(!r&&e)return e.map(fs);const{data:s}=await P.from("students").select("*").eq("class_id",t).eq("is_verified",!1).order("created_at",{ascending:!1});return(s==null?void 0:s.map(fs))||[]},verifyStudent:async t=>{const{error:e}=await P.from("students").update({is_verified:!0}).eq("id",t);return{success:!e,message:e?re(e):void 0}},rejectAdmission:async t=>{const{error:e}=await P.from("students").delete().eq("id",t);return{success:!e,message:e?re(e):void 0}},getMarks:async(t,e)=>{const{data:r,error:s}=await P.rpc("get_student_marks",{stu_id:t,term_in:e});if(!s&&r&&r.length>0)return ql(r[0]);const{data:n}=await P.from("marks").select("*").eq("student_id",t).eq("term",e).single();return n?ql(n):null},saveMarks:async t=>{const{error:e}=await P.rpc("save_marks",{stu_id:t.studentId,term_in:t.term,sub_json:t.subjects,tot:t.total,grd:t.grade});return{success:!e,message:e?re(e):void 0}},createProfileRequest:async(t,e,r)=>{const s=Be(),{error:n}=await P.from("profile_requests").insert([{school_id:s,student_id:t,field:e,new_value:r,status:"PENDING"}]);return{success:!n,message:n?re(n):void 0}},getStudentRequests:async t=>{const{data:e}=await P.from("profile_requests").select("*").eq("student_id",t).order("created_at",{ascending:!1});return(e||[]).map(r=>({id:r.id,studentId:r.student_id,field:r.field,newValue:r.new_value,status:r.status,createdAt:r.created_at}))},getPendingRequestsForClass:async t=>{const{data:e}=await D.getStudentsByClass(t);if(!e||e.length===0)return[];const{data:r}=await P.from("profile_requests").select("*").in("student_id",e.map(s=>s.id)).eq("status","PENDING");return r?r.map(s=>{const n=e.find(a=>a.id===s.student_id);return{id:s.id,studentId:s.student_id,studentName:n==null?void 0:n.name,regNo:n==null?void 0:n.regNo,field:s.field,newValue:s.new_value,status:s.status,createdAt:s.created_at}}):[]},resolveProfileRequest:async(t,e)=>{const{error:r}=await P.from("profile_requests").update({status:e}).eq("id",t.id);if(r)return{success:!1,message:r.message};if(e==="APPROVED"){const s=t.field==="fatherName"?"father_name":t.field==="motherName"?"mother_name":t.field==="dob"?"dob":t.field==="photoUrl"?"photo_url":"name",{error:n}=await P.from("students").update({[s]:t.newValue}).eq("id",t.studentId);if(n)return{success:!1,message:n.message}}return{success:!0}},getSchoolConfig:async()=>{const t=Be();if(!t)return null;const{data:e}=await P.from("schools").select("*").eq("id",t).single();return e?{id:e.id,schoolName:e.name,slug:e.slug,sheetUrl:"",licenseKey:e.license_key||"FREE",isPro:e.is_pro||!1,themeColor:e.theme_color||"blue",logoUrl:e.logo_url,expiryDate:e.expiry_date,adminEmail:e.admin_email,phone:e.phone,place:e.place,paymentStatus:e.payment_status||"FREE",transactionRef:e.transaction_ref,allowTeacherSubjectEdit:e.allow_teacher_edit||!1,allowPublicAdmission:e.allow_public_admission??!0,admissionToken:e.admission_token,resultPublishDate:e.result_publish_date,examName:e.exam_name,showPassFailStatus:e.show_pass_fail_status??!0,showGrades:e.show_grades??!0,resultDisplayType:e.result_display_type||"PASS_FAIL",academicYear:e.academic_year||new Date().getFullYear().toString(),sortingMethod:e.sorting_method||"GENDER_ROLL",showRank:e.show_rank??!1,lastActiveAt:e.last_active_at,isPaused:e.is_paused}:null},updateSchoolSettings:async t=>{const e=Be();if(!e)return{success:!1,message:"Session expired"};const r={};t.allowTeacherSubjectEdit!==void 0&&(r.allow_teacher_edit=t.allowTeacherSubjectEdit),t.allowPublicAdmission!==void 0&&(r.allow_public_admission=t.allowPublicAdmission),t.resultPublishDate!==void 0&&(r.result_publish_date=t.resultPublishDate),t.schoolName!==void 0&&(r.name=t.schoolName),t.phone!==void 0&&(r.phone=t.phone),t.place!==void 0&&(r.place=t.place),t.themeColor!==void 0&&(r.theme_color=t.themeColor),t.logoUrl!==void 0&&(r.logo_url=t.logoUrl),t.examName!==void 0&&(r.exam_name=t.examName),t.showPassFailStatus!==void 0&&(r.show_pass_fail_status=t.showPassFailStatus),t.resultDisplayType!==void 0&&(r.result_display_type=t.resultDisplayType),t.academicYear!==void 0&&(r.academic_year=t.academicYear),t.sortingMethod!==void 0&&(r.sorting_method=t.sortingMethod),t.showRank!==void 0&&(r.show_rank=t.showRank);const{error:s}=await P.from("schools").update(r).eq("id",e);return{success:!s,message:s?re(s):void 0}},uploadImage:async(t,e)=>{const r=Be();if(!r)return{success:!1,message:"Session expired"};try{const s=await Vb(t),n=`${r}/${e}/${Date.now()}.jpg`,{error:a}=await P.storage.from("school-branding").upload(n,s,{contentType:"image/jpeg",upsert:!0});if(a)throw a;const{data:l}=P.storage.from("school-branding").getPublicUrl(n);return{success:!0,publicUrl:l.publicUrl}}catch(s){return{success:!1,message:re(s)}}},uploadSchoolLogo:async t=>D.uploadImage(t,"logos"),changePassword:async(t,e)=>{const{error:r}=await P.from("students").update({password:e.toLowerCase()}).eq("id",t);return{success:!r,message:r?re(r):void 0}},resetStudentPassword:async t=>{const{error:e}=await P.from("students").update({password:null}).eq("id",t);return{success:!e,message:e?re(e):void 0}},getSchoolDetailsPublic:async t=>{const{data:e}=await P.from("schools").select("name").eq("id",t).single();return e},activateSchoolProLicenseAuto:async t=>{const e=Be();if(!e)return{success:!1};const r=new Date;r.setFullYear(r.getFullYear()+1);const{error:s}=await P.from("schools").update({is_pro:!0,license_key:`PRO-AUTO-${t.slice(0,6)}`,expiry_date:r.toISOString(),payment_status:"PAID",transaction_ref:t}).eq("id",e);return{success:!s,message:s?re(s):"Pro License Activated!"}},activateStudentPremium:async(t,e)=>{const r=new Date;r.setFullYear(r.getFullYear()+1);const{error:s}=await P.from("students").update({is_premium:!0,premium_expiry:r.toISOString()}).eq("id",t);return{success:!s,message:s?re(s):"Student Premium Unlocked!"}},requestProUpgrade:async(t,e)=>{const{error:r}=await P.rpc("request_pro_upgrade",{school_id_in:t,trans_ref_in:e});return{success:!r,message:r?re(r):void 0}},approveUpgradeRequest:async t=>{const{error:e}=await P.rpc("sa_approve_upgrade",{school_id_in:t});return{success:!e,message:e?re(e):void 0}},rejectUpgradeRequest:async t=>{const{error:e}=await P.rpc("sa_reject_upgrade",{school_id_in:t});return{success:!e,message:e?re(e):void 0}},activateLicense:async t=>{const e=Be();if(!e)return{success:!1};if(t.startsWith("PRO-")){const r=new Date;return r.setFullYear(r.getFullYear()+1),await P.from("schools").update({is_pro:!0,license_key:t,expiry_date:r.toISOString()}).eq("id",e),{success:!0,message:"Pro License Activated"}}return{success:!1,message:"Invalid Key"}},toggleSchoolStatus:async(t,e)=>{const{error:r}=await P.from("schools").update({is_pro:!e}).eq("id",t);return{success:!r}},getAllSchools:async()=>{const{data:t}=await P.from("schools").select("*").order("created_at",{ascending:!1});return(t||[]).map(e=>({id:e.id,schoolName:e.name,adminEmail:e.admin_email,isPro:e.is_pro,paymentStatus:e.payment_status||"FREE",transactionRef:e.transaction_ref,phone:e.phone,place:e.place,createdAt:e.created_at,sheetUrl:"",licenseKey:e.license_key||"FREE",themeColor:e.theme_color||"indigo",logoUrl:e.logo_url,lastActiveAt:e.last_active_at,isPaused:e.is_paused}))},deleteSchool:async t=>{const{error:e}=await P.from("schools").delete().eq("id",t);return{success:!e,message:e?re(e):void 0}},getSystemStats:async()=>{const{data:t,error:e}=await P.rpc("get_system_stats");return e?(console.error(e),null):t},getInactiveSchools:async()=>{const{data:t,error:e}=await P.rpc("get_inactive_schools");return e?[]:t},sendWarningToSchool:async t=>(await new Promise(e=>setTimeout(e,800)),{success:!0}),pauseSchool:async(t,e)=>{const{error:r}=await P.from("schools").update({is_paused:!e}).eq("id",t);return{success:!r}},getSystemFeedback:async()=>{const{data:t}=await P.from("system_feedback").select("*").order("created_at",{ascending:!1});return(t||[]).map(e=>({id:e.id,schoolId:e.school_id,schoolName:e.school_name,message:e.message,type:e.type,status:e.status,createdAt:e.created_at}))},createSystemFeedback:async(t,e,r)=>{const s=Be(),{error:n}=await P.from("system_feedback").insert([{school_id:s,school_name:r,message:t,type:e,status:"OPEN"}]);return{success:!n}},resolveFeedback:async t=>{const{error:e}=await P.from("system_feedback").update({status:"RESOLVED"}).eq("id",t);return{success:!e}},getPricingPlans:async()=>{const{data:t}=await P.from("pricing_plans").select("*").order("selling_price",{ascending:!0});return t?t.map(e=>({id:e.id,name:e.name,originalPrice:e.original_price,sellingPrice:e.selling_price,discountPercent:e.discount_percent,features:e.features,isPopular:e.is_popular,seatsLeft:e.seats_left,offerEndsAt:e.offer_ends_at})):[]},updatePricingPlan:async t=>{const{error:e}=await P.from("pricing_plans").update({name:t.name,original_price:t.originalPrice,selling_price:t.sellingPrice,discount_percent:t.discountPercent,seats_left:t.seatsLeft,is_popular:t.isPopular,offer_ends_at:t.offerEndsAt}).eq("id",t.id);return{success:!e,message:e?re(e):void 0}}},fs=t=>({id:t.id,regNo:t.reg_no,rollNo:t.roll_no,name:t.name,classId:t.class_id,dob:t.dob,gender:t.gender,fatherName:t.father_name,motherName:t.mother_name,isVerified:t.is_verified,photoUrl:t.photo_url,isPremium:t.is_premium||!1,premiumExpiry:t.premium_expiry}),ql=t=>({studentId:t.student_id,term:t.term,subjects:typeof t.subjects=="string"?JSON.parse(t.subjects):t.subjects,total:t.total,grade:t.grade}),Hb=()=>{const t=tr(),[e,r]=b.useState([]),[s,n]=b.useState({days:0,hours:0,mins:0,secs:0}),[a,l]=b.useState(""),[o,c]=b.useState(!1),[u,h]=b.useState(0),[d,f]=b.useState(150),[x,v]=b.useState("Al-Manar Madrassa just joined!"),y=["1 Week","3 Days","5 Hours","60 Seconds"],w=[{id:"FREE",name:"Madrassa / Tuition",originalPrice:999,sellingPrice:0,discountPercent:100,features:["Unlimited Students","Basic Result","Public Portal","Community Support"],isPopular:!1,seatsLeft:58},{id:"PLUS",name:"Smart School Plus",originalPrice:4999,sellingPrice:1999,discountPercent:60,features:["Everything in Free","Verified Badges","Priority Support","Student Photos","No Ads"],isPopular:!0,seatsLeft:42},{id:"ELITE",name:"Campus Elite Pro",originalPrice:14999,sellingPrice:4999,discountPercent:66,features:["Everything in Plus","Custom Domain","White Label","API Access","Dedicated Manager"],isPopular:!1,seatsLeft:14}];b.useEffect(()=>{(async()=>{var S;const E=await D.getPricingPlans();if(E&&E.length>0){r(E);const C=(S=E.find(W=>W.offerEndsAt))==null?void 0:S.offerEndsAt;C&&g(new Date(C))}else{r(w);const C=new Date;C.setDate(C.getDate()+2),g(C)}})();const m=["Darul Huda just joined","Oxford School published results","Excel Tuition created portal","Hidayath Madrassa activated Pro"];let _=0;const N=setInterval(()=>{_=(_+1)%m.length,v(m[_])},4e3);return()=>clearInterval(N)},[]),b.useEffect(()=>{const m=setTimeout(()=>{const _=u%y.length,N=y[_];l(o?N.substring(0,a.length-1):N.substring(0,a.length+1)),f(o?50:150),!o&&a===N?_===y.length-1?(f(3e3),c(!0)):setTimeout(()=>c(!0),1e3):o&&a===""&&(c(!1),h(u+1),f(500))},d);return()=>clearTimeout(m)},[a,o,u,d]);const g=p=>{const m=setInterval(()=>{const _=new Date().getTime(),N=p.getTime()-_;N<0?clearInterval(m):n({days:Math.floor(N/864e5),hours:Math.floor(N%864e5/36e5),mins:Math.floor(N%36e5/6e4),secs:Math.floor(N%6e4/1e3)})},1e3);return()=>clearInterval(m)};return i.jsxs("div",{className:"pb-20 text-slate-900 dark:text-slate-100 overflow-x-hidden relative",children:[i.jsxs("div",{className:"fixed top-0 left-0 w-full h-full overflow-hidden -z-10 pointer-events-none",children:[i.jsx("div",{className:"absolute -top-[20%] -left-[10%] w-[50%] h-[50%] bg-blue-500/10 rounded-full blur-[100px] animate-pulse"}),i.jsx("div",{className:"absolute top-[40%] -right-[10%] w-[40%] h-[40%] bg-purple-500/10 rounded-full blur-[100px] animate-pulse"})]}),i.jsx("div",{className:"fixed bottom-4 left-4 z-50 animate-fade-in-up hidden md:block",children:i.jsxs("div",{className:"bg-white/90 dark:bg-slate-800/90 backdrop-blur border border-slate-200 dark:border-slate-700 shadow-xl rounded-full px-4 py-2 flex items-center gap-3",children:[i.jsxs("span",{className:"relative flex h-3 w-3",children:[i.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),i.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]}),i.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:x})]})}),i.jsxs("div",{className:"bg-gradient-to-r from-red-600 via-orange-600 to-red-600 bg-[length:200%_auto] animate-gradient text-white p-2 text-center text-sm font-bold flex justify-center items-center gap-4 shadow-lg relative z-20",children:[i.jsxs("span",{className:"flex items-center gap-1 uppercase tracking-wider text-xs md:text-sm",children:[i.jsx(Va,{className:"w-4 h-4 fill-yellow-300 text-yellow-300 animate-bounce"}),"Launch Offer Ends In:"]}),i.jsxs("div",{className:"flex gap-1 font-mono text-base",children:[i.jsxs("span",{className:"bg-black/20 px-1.5 rounded",children:[s.days,"d"]}),":",i.jsxs("span",{className:"bg-black/20 px-1.5 rounded",children:[s.hours,"h"]}),":",i.jsxs("span",{className:"bg-black/20 px-1.5 rounded",children:[s.mins,"m"]}),":",i.jsxs("span",{className:"bg-black/20 px-1.5 rounded",children:[s.secs,"s"]})]})]}),i.jsxs("header",{className:"text-center py-20 md:py-32 max-w-5xl mx-auto px-4 relative",children:[i.jsx("div",{className:"inline-block px-4 py-1.5 mb-8 rounded-full bg-blue-50 dark:bg-blue-900/30 border border-blue-100 dark:border-blue-800 text-blue-700 dark:text-blue-300 text-xs font-bold tracking-widest uppercase shadow-sm",children:" Trusted by 500+ Institutions"}),i.jsxs("h1",{className:"text-5xl md:text-8xl font-black mb-8 text-slate-900 dark:text-white tracking-tighter leading-none",children:["Publish Results in ",i.jsx("br",{}),i.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 inline-block min-w-[300px] md:min-w-[600px] border-b-4 border-blue-500/30 pb-2",children:[a,i.jsx("span",{className:"animate-pulse text-slate-400",children:"|"})]})]}),i.jsxs("p",{className:"text-xl md:text-2xl text-slate-500 dark:text-slate-400 mb-12 max-w-2xl mx-auto leading-relaxed",children:["The world's fastest result publishing platform. ",i.jsx("br",{}),i.jsx("span",{className:"text-slate-800 dark:text-slate-200 font-bold",children:"Zero Maintenance. No Technical Skills Needed."})]}),i.jsxs("div",{className:"flex flex-col md:flex-row justify-center gap-4",children:[i.jsxs("button",{onClick:()=>t("/setup"),className:"group relative overflow-hidden bg-blue-600 hover:bg-blue-700 text-white text-lg font-bold px-10 py-5 rounded-xl shadow-2xl shadow-blue-500/40 transition-all transform hover:scale-105",children:[i.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Create Free Portal ",i.jsx(Bm,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),i.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"})]}),i.jsx("button",{onClick:()=>t("/login"),className:"px-10 py-5 rounded-xl text-lg font-bold text-slate-600 dark:text-slate-300 border-2 border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800 transition-all",children:"Staff Login"})]}),i.jsxs("p",{className:"mt-6 text-xs text-slate-400 font-medium",children:[i.jsx(ou,{className:"w-3 h-3 inline mr-1 text-green-500"})," No credit card required.",i.jsx("span",{className:"mx-2",children:""}),i.jsx(Qt,{className:"w-3 h-3 inline mr-1 text-green-500"})," 2-Minute Setup"]})]}),i.jsxs("section",{className:"py-12 px-4 max-w-7xl mx-auto relative z-10",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl font-black text-slate-900 dark:text-white mb-4",children:"Choose Your Plan"}),i.jsx("p",{className:"text-lg text-slate-500 dark:text-slate-400",children:"Fair pricing for schools of all sizes."})]}),i.jsx("div",{className:"grid md:grid-cols-3 gap-8 items-end",children:e.map(p=>{const m=p.sellingPrice===0;return i.jsxs("div",{className:`relative bg-white dark:bg-slate-800 rounded-3xl p-8 border transition-all duration-500 group ${p.isPopular?"border-blue-500 shadow-2xl shadow-blue-500/20 scale-105 z-10":m?"border-emerald-500/50 shadow-xl shadow-emerald-500/10 hover:border-emerald-500 hover:shadow-emerald-500/20":"border-slate-200 dark:border-slate-700 shadow-lg hover:border-purple-500/50 hover:shadow-purple-500/10"}`,children:[p.isPopular&&i.jsxs("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-1.5 rounded-full text-xs font-bold uppercase tracking-wider shadow-lg flex items-center gap-2",children:[i.jsx(by,{className:"w-3 h-3 fill-white"})," Most Popular"]}),m&&i.jsxs("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-emerald-100 text-emerald-800 border border-emerald-200 px-6 py-1.5 rounded-full text-xs font-bold uppercase tracking-wider shadow-sm flex items-center gap-2 animate-pulse",children:[i.jsx(Va,{className:"w-3 h-3 fill-emerald-600"})," High Demand"]}),i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h3",{className:`text-xl font-black mb-4 ${m?"text-emerald-600 dark:text-emerald-400":"text-slate-800 dark:text-white"}`,children:p.name}),i.jsxs("div",{className:"flex justify-center items-baseline gap-2 mb-2",children:[i.jsx("span",{className:"text-5xl font-black text-slate-900 dark:text-white tracking-tight",children:p.sellingPrice===0?"Free":`${p.sellingPrice}`}),p.originalPrice>0&&i.jsxs("span",{className:"text-lg text-slate-400 line-through font-bold",children:["",p.originalPrice]})]}),p.discountPercent>0&&i.jsxs("div",{className:"inline-block bg-red-100 text-red-600 px-3 py-1 rounded-full text-xs font-black uppercase",children:[p.discountPercent,"% OFF"]}),m&&i.jsx("p",{className:"text-xs text-slate-400 mt-2 font-medium",children:"Lifetime License"})]}),m&&p.seatsLeft<100&&i.jsxs("div",{className:"mb-8 bg-red-50 dark:bg-red-900/10 p-3 rounded-xl border border-red-100 dark:border-red-900/30",children:[i.jsxs("div",{className:"flex justify-between text-xs font-bold mb-2",children:[i.jsxs("span",{className:"text-red-600 flex items-center gap-1",children:[i.jsx(Km,{className:"w-3 h-3"})," Limited Slots"]}),i.jsxs("span",{className:"text-red-600",children:[p.seatsLeft," left"]})]}),i.jsx("div",{className:"w-full bg-red-200 dark:bg-red-900/50 h-2.5 rounded-full overflow-hidden",children:i.jsx("div",{className:"bg-red-500 h-full rounded-full animate-pulse",style:{width:`${Math.max(15,p.seatsLeft/1e3*100)}%`}})}),i.jsx("p",{className:"text-[10px] text-red-500 mt-2 text-center font-medium",children:"Once filled, free tier may be closed forever."})]}),i.jsx("ul",{className:"space-y-4 mb-8",children:Array.isArray(p.features)&&p.features.map((_,N)=>i.jsxs("li",{className:"flex items-start gap-3 text-sm font-medium text-slate-600 dark:text-slate-300",children:[i.jsx(Qt,{className:`w-5 h-5 shrink-0 ${m?"text-emerald-500":"text-blue-500"}`}),_]},N))}),i.jsx(H,{onClick:()=>t("/setup"),className:`w-full py-4 text-lg font-bold rounded-xl transition-all shadow-lg ${m?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-500/30":p.isPopular?"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 shadow-blue-500/30":"bg-slate-800 hover:bg-slate-900"}`,children:m?"Claim Free License":"Get Started Now"})]},p.id)})})]}),i.jsx("section",{className:"py-20 max-w-6xl mx-auto px-4",children:i.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[i.jsxs(X,{className:"text-center p-8 hover:-translate-y-2 transition-transform duration-300 border-t-4 border-t-purple-500",children:[i.jsx("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900/30 rounded-2xl flex items-center justify-center mx-auto mb-6",children:i.jsx(qm,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"})}),i.jsx("h3",{className:"text-xl font-bold mb-3 text-slate-800 dark:text-slate-100",children:"Secure Database"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 leading-relaxed",children:"Enterprise-grade security. Your student data is encrypted and backed up daily."})]}),i.jsxs(X,{className:"text-center p-8 hover:-translate-y-2 transition-transform duration-300 border-t-4 border-t-pink-500",children:[i.jsx("div",{className:"w-16 h-16 bg-pink-100 dark:bg-pink-900/30 rounded-2xl flex items-center justify-center mx-auto mb-6",children:i.jsx(Gm,{className:"w-8 h-8 text-pink-600 dark:text-pink-400"})}),i.jsx("h3",{className:"text-xl font-bold mb-3 text-slate-800 dark:text-slate-100",children:"Mobile First"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 leading-relaxed",children:"Designed for phones. Teachers can enter marks and students can check results from any device."})]}),i.jsxs(X,{className:"text-center p-8 hover:-translate-y-2 transition-transform duration-300 border-t-4 border-t-yellow-500",children:[i.jsx("div",{className:"w-16 h-16 bg-yellow-100 dark:bg-yellow-900/30 rounded-2xl flex items-center justify-center mx-auto mb-6",children:i.jsx(Va,{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400"})}),i.jsx("h3",{className:"text-xl font-bold mb-3 text-slate-800 dark:text-slate-100",children:"Instant Setup"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 leading-relaxed",children:"No coding required. Just register your school name and start publishing results in 2 minutes."})]})]})}),i.jsx("section",{className:"py-20 text-center px-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto bg-gradient-to-br from-blue-900 to-slate-900 rounded-3xl p-10 md:p-20 text-white relative overflow-hidden shadow-2xl",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/20 rounded-full blur-3xl -mr-16 -mt-16"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-purple-500/20 rounded-full blur-3xl -ml-16 -mb-16"}),i.jsx("h2",{className:"text-3xl md:text-5xl font-black mb-6 relative z-10",children:"Ready to modernize your institution?"}),i.jsx("p",{className:"text-lg text-blue-200 mb-10 max-w-2xl mx-auto relative z-10",children:"Join 500+ other Madrassas and Schools using SchoolResult Pro today."}),i.jsx("button",{onClick:()=>t("/setup"),className:"bg-white text-blue-900 px-10 py-4 rounded-xl text-lg font-bold hover:bg-blue-50 transition-colors shadow-xl relative z-10",children:"Start For Free"})]})})]})},Gb=()=>{const t=tr(),[e,r]=b.useState(!1),[s,n]=b.useState(""),[a,l]=b.useState(""),[o,c]=b.useState(!1),[u,h]=b.useState(null),[d,f]=b.useState({schoolName:"",email:"",password:"",confirmPassword:"",phone:"",place:""});b.useEffect(()=>{l(D.generateRecoveryCode())},[]);const x=async w=>{if(w.preventDefault(),n(""),d.password!==d.confirmPassword){n("Passwords do not match!");return}if(!o){n("Please copy the Recovery Code and check the box to proceed.");return}const g=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,p=d.email.trim();if(!g.test(p)){n("Please enter a valid email address (e.g., admin@school.com)");return}r(!0);const m=await D.registerSchool(d.schoolName.trim(),p,d.password,d.phone.trim(),d.place.trim(),a);r(!1),m.success&&m.schoolId?h({schoolId:m.schoolId,name:d.schoolName}):n("Registration Failed: "+(m.message||"Unknown error"))},v=()=>{navigator.clipboard.writeText(a),alert("Code Copied! Save it somewhere safe.")},y=()=>{if(!u)return;const{url:w,key:g}=Wb();localStorage.setItem("sb_url",w),localStorage.setItem("sb_key",g),localStorage.setItem("school_id",u.schoolId),t("/login")};return u?i.jsx("div",{className:"flex items-center justify-center min-h-[80vh] p-4",children:i.jsxs(X,{className:"max-w-lg w-full text-center py-12 px-6 border-green-200 dark:border-green-900 shadow-2xl animate-fade-in-up",children:[i.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(Qt,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),i.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Registration Successful!"}),i.jsxs("p",{className:"text-lg text-slate-600 dark:text-slate-300 mb-8",children:["Welcome to ",i.jsx("b",{children:u.name})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-6 rounded-xl border border-blue-100 dark:border-blue-800 mb-8",children:[i.jsx("h3",{className:"font-bold text-blue-900 dark:text-blue-300 mb-2",children:"What happens next?"}),i.jsxs("p",{className:"text-sm text-blue-800/80 dark:text-blue-300/80",children:["Click below to enter your dedicated School Portal. Your unique link will be generated automatically.",i.jsx("b",{children:"Bookmark it"})," when you land on the login page!"]})]}),i.jsxs(H,{onClick:y,className:"w-full text-lg py-4 shadow-xl shadow-blue-200 dark:shadow-none",children:["Enter My School Portal ",i.jsx(Bm,{className:"w-5 h-5 ml-2"})]})]})}):i.jsx("div",{className:"flex items-center justify-center p-4 py-12",children:i.jsxs(X,{className:"max-w-md w-full shadow-xl border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(zm,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Register Your School"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Create your result portal in seconds."})]}),s&&i.jsxs("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-3 rounded-lg text-sm border border-red-100 dark:border-red-800 text-center flex items-center justify-center gap-2",children:[i.jsx("span",{className:"font-bold",children:"Error:"})," ",s]}),i.jsxs("form",{onSubmit:x,className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"School Name"}),i.jsx(K,{placeholder:"e.g. Govt HSS Trivandrum",value:d.schoolName,onChange:w=>f({...d,schoolName:w.target.value}),required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Place / City"}),i.jsx(K,{placeholder:"e.g. Kochi",value:d.place,onChange:w=>f({...d,place:w.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Phone Number"}),i.jsx(K,{placeholder:"e.g. 9846...",value:d.phone,onChange:w=>f({...d,phone:w.target.value}),required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Admin Email"}),i.jsx(K,{type:"email",placeholder:"admin@school.com",value:d.email,onChange:w=>f({...d,email:w.target.value.trim()}),required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Password"}),i.jsx(K,{type:"password",placeholder:"",value:d.password,onChange:w=>f({...d,password:w.target.value}),required:!0,minLength:6})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Confirm"}),i.jsx(K,{type:"password",placeholder:"",value:d.confirmPassword,onChange:w=>f({...d,confirmPassword:w.target.value}),required:!0,minLength:6})]})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/10 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2 text-yellow-800 dark:text-yellow-300 font-bold text-sm",children:[i.jsx(ou,{className:"w-4 h-4"})," Save this Recovery Code"]}),i.jsxs("div",{className:"flex gap-2 mb-2",children:[i.jsx("div",{className:"flex-1 bg-white dark:bg-slate-800 border border-yellow-300 dark:border-yellow-700 p-2 rounded text-center font-mono font-bold tracking-wider text-slate-800 dark:text-slate-200 break-all text-xs md:text-sm",children:a}),i.jsx("button",{type:"button",onClick:v,className:"p-2 bg-yellow-200 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-200 rounded hover:bg-yellow-300 dark:hover:bg-yellow-700 transition-colors flex-shrink-0",title:"Copy Code",children:i.jsx(Ei,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"copiedCheck",className:"w-4 h-4 accent-blue-600 rounded",checked:o,onChange:w=>c(w.target.checked)}),i.jsx("label",{htmlFor:"copiedCheck",className:"text-xs text-slate-600 dark:text-slate-400 cursor-pointer select-none",children:"I have copied and saved this code securely."})]})]}),i.jsx(H,{type:"submit",className:"w-full",disabled:e,children:e?i.jsxs("span",{className:"flex items-center justify-center gap-2",children:[i.jsx(Gt,{className:"animate-spin w-4 h-4"})," Registering..."]}):"Register School"})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:["Already have an account? ",i.jsx("span",{onClick:()=>t("/login"),className:"text-blue-600 dark:text-blue-400 font-semibold cursor-pointer hover:underline",children:"Login here"})]})})]})})},Kb=({onLogin:t})=>{const[e,r]=b.useState(G.STUDENT),[s,n]=b.useState(!1),[a,l]=b.useState(""),[o,c]=b.useState({id:"",password:"",classId:""}),[u,h]=b.useState(!1),[d,f]=b.useState("EMAIL"),[x,v]=b.useState(""),[y,w]=b.useState(""),[g,p]=b.useState(""),[m,_]=b.useState(!1),[N,E]=b.useState({type:"",text:""}),[S,C]=b.useState(!1),[W,R]=b.useState(""),[Q,de]=b.useState(!1),[me,bt]=b.useState(""),[J,Ce]=b.useState([]),[nt,A]=b.useState(!1),[$,V]=b.useState([]),[te,ae]=b.useState([]),[Xe,be]=b.useState(!1),pe=tr(),Ae=rs();b.useEffect(()=>{const L=Ae.state;L!=null&&L.email&&(r(G.ADMIN),c(ss=>({...ss,id:L.email}))),(L==null?void 0:L.role)==="ADMIN"&&r(G.ADMIN);const ie=new URLSearchParams(Ae.search);(Ae.hash.includes("type=recovery")||ie.get("reset")==="true")&&C(!0);const _t=ie.get("s");_t?Ot(_t):localStorage.getItem("school_id")||de(!0)},[Ae]),b.useEffect(()=>{!!!localStorage.getItem("school_id")&&(e===G.STUDENT||e===G.TEACHER)&&de(!0)},[e]),b.useEffect(()=>{(e===G.STUDENT||e===G.TEACHER)&&!Q&&Mt()},[e,Q]);const Ot=async L=>{n(!0);const ie=await D.getSchoolByIdOrSlug(L);n(!1),ie?(localStorage.setItem("school_id",ie.id),de(!1)):de(!0)},Mt=async()=>{be(!0);const L=await D.getClassesForLogin();V(L),be(!1)},at=async L=>{const ie=L.target.value;if(c({...o,classId:ie,id:""}),ae([]),ie&&e===G.STUDENT){be(!0);const _t=await D.getStudentNamesForLogin(ie);ae(_t),be(!1)}},Bt=async L=>{L.preventDefault(),A(!0);const ie=await D.findSchoolByEmailOrName(me);Ce(ie),A(!1)},Pr=L=>{localStorage.setItem("school_id",L),de(!1),r(G.STUDENT),Mt()},j=async L=>{if(L.preventDefault(),n(!0),l(""),e===G.ADMIN&&o.id.trim()==="owner@admin.com"&&o.password==="master123"){n(!1),t(G.SUPER_ADMIN,{name:"Super Admin",id:"owner"}),pe("/dashboard/superadmin");return}let ie={};if(e===G.ADMIN)ie={email:o.id.trim(),password:o.password};else if(e===G.TEACHER)ie={classId:o.classId,password:o.password};else if(e===G.STUDENT){const ss=te.find(al=>al.id===o.id);ie={id:ss?ss.reg_no:o.id,password:o.password}}const _t=await D.login(e,ie);n(!1),_t.success?(t(e,_t.user),e===G.TEACHER?pe("/dashboard/teacher"):e===G.STUDENT?pe("/dashboard/student"):pe("/dashboard/admin")):l(_t.message||"Invalid Login Credentials.")},ge=async L=>{L.preventDefault(),E({type:"",text:""}),_(!0);let ie;if(d==="EMAIL"){if(!x){_(!1);return}ie=await D.recoverPassword(x)}else{if(!x||!y||!g){E({type:"error",text:"All fields are required"}),_(!1);return}ie=await D.resetPasswordWithRecoveryCode(x,y,g)}_(!1),ie.success?(E({type:"success",text:ie.message||"Success!"}),d==="CODE"&&setTimeout(()=>{h(!1),c({...o,id:x,password:g})},2e3)):E({type:"error",text:"Error: "+ie.message})},it=async L=>{L.preventDefault(),_(!0);const ie=await D.updateUserPassword(W);_(!1),ie.success?(alert("Password updated! Please login with your new password."),C(!1),pe("/login")):alert("Failed: "+ie.message)},Ye=L=>`flex-1 py-2 rounded-md text-xs md:text-sm font-medium transition-all flex items-center justify-center gap-2 ${L?"bg-white dark:bg-slate-700 text-blue-600 dark:text-blue-400 shadow-sm ring-1 ring-slate-200 dark:ring-slate-600":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"}`;return S?i.jsx("div",{className:"flex items-center justify-center py-12 px-4",children:i.jsxs(X,{className:"w-full max-w-md shadow-lg border-slate-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-bold text-center mb-4 text-slate-900 dark:text-white",children:"Set New Password"}),i.jsxs("form",{onSubmit:it,className:"space-y-4",children:[i.jsx(K,{type:"password",placeholder:"New Password",value:W,onChange:L=>R(L.target.value),required:!0,minLength:6}),i.jsx(H,{type:"submit",className:"w-full",disabled:m,children:m?"Updating...":"Update Password"})]})]})}):Q?i.jsx("div",{className:"flex items-center justify-center py-12 px-4",children:i.jsxs(X,{className:"w-full max-w-md shadow-lg border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Md,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Find Your School"}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:["Enter your ",i.jsx("b",{children:"School Name"}),", ",i.jsx("b",{children:"Short Code"}),", or Admin Email."]})]}),i.jsxs("form",{onSubmit:Bt,className:"space-y-4",children:[i.jsx(K,{placeholder:"e.g. Oxford Public School or ghss-tvm",value:me,onChange:L=>bt(L.target.value),autoFocus:!0}),i.jsx(H,{type:"submit",className:"w-full flex items-center justify-center gap-2",disabled:nt,children:nt?"Searching...":i.jsxs(i.Fragment,{children:[i.jsx(Hm,{className:"w-4 h-4"})," Search School"]})})]}),J.length>0&&i.jsxs("div",{className:"mt-4 space-y-2 max-h-48 overflow-y-auto",children:[i.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Search Results:"}),J.map(L=>i.jsxs("div",{onClick:()=>Pr(L.id),className:"p-3 bg-slate-50 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-white text-sm",children:L.name}),L.slug&&i.jsxs("span",{className:"text-xs bg-slate-200 dark:bg-slate-700 px-1 rounded text-slate-600 dark:text-slate-300",children:["Code: ",L.slug]})]},L.id))]}),J.length===0&&!nt&&me&&i.jsx("p",{className:"text-center text-sm text-slate-400 mt-4",children:"No schools found."}),i.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-100 dark:border-slate-700 text-center",children:[i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"Are you the School Admin?"}),i.jsxs(H,{variant:"secondary",onClick:()=>{de(!1),r(G.ADMIN)},className:"w-full flex items-center justify-center gap-2",children:[i.jsx(Ws,{className:"w-4 h-4"})," Login as Admin"]})]})]})}):u?i.jsx("div",{className:"flex items-center justify-center py-12 px-4",children:i.jsxs(X,{className:"w-full max-w-md shadow-lg border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Is,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Reset Password"}),i.jsxs("div",{className:"flex justify-center gap-4 mt-4 text-sm font-medium border-b border-slate-200 dark:border-slate-700 pb-2",children:[i.jsx("button",{onClick:()=>{f("EMAIL"),E({type:"",text:""})},className:`pb-2 px-2 transition-colors ${d==="EMAIL"?"text-blue-600 border-b-2 border-blue-600":"text-slate-500"}`,children:"Via Email Link"}),i.jsx("button",{onClick:()=>{f("CODE"),E({type:"",text:""})},className:`pb-2 px-2 transition-colors ${d==="CODE"?"text-blue-600 border-b-2 border-blue-600":"text-slate-500"}`,children:"Via Recovery Code"})]})]}),i.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[d==="EMAIL"?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center",children:"We will send a reset link to your registered email."}),i.jsx(K,{type:"email",placeholder:"admin@school.com",value:x,onChange:L=>v(L.target.value),required:!0})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center",children:"Enter your email and the recovery code you saved during registration."}),i.jsx(K,{type:"email",placeholder:"admin@school.com",value:x,onChange:L=>v(L.target.value),required:!0}),i.jsx(K,{placeholder:"Recovery Code (e.g. REC-XXXX-XXXX)",value:y,onChange:L=>w(L.target.value),required:!0}),i.jsx(K,{type:"password",placeholder:"New Password",value:g,onChange:L=>p(L.target.value),required:!0,minLength:6})]}),N.text&&i.jsx("div",{className:`p-3 rounded text-sm text-center ${N.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:N.text}),i.jsx(H,{type:"submit",className:"w-full",disabled:m,children:m?"Processing...":d==="EMAIL"?"Send Recovery Link":"Reset Password"}),i.jsxs("button",{type:"button",onClick:()=>h(!1),className:"w-full text-center text-sm text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 mt-4 flex items-center justify-center gap-2",children:[i.jsx(Mm,{className:"w-4 h-4"})," Back to Login"]})]})]})}):i.jsx("div",{className:"flex items-center justify-center py-12 px-4",children:i.jsxs(X,{className:"w-full max-w-md shadow-lg border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"text-center mb-8 relative",children:[localStorage.getItem("school_id")&&i.jsx("button",{onClick:()=>{localStorage.removeItem("school_id"),de(!0)},className:"absolute right-0 top-0 text-xs text-blue-600 hover:underline",children:"Switch School"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Portal Login"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Access your school dashboard"})]}),i.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-800 p-1 rounded-lg mb-6 border border-slate-200 dark:border-slate-700",children:[i.jsxs("button",{onClick:()=>r(G.STUDENT),className:Ye(e===G.STUDENT),children:[i.jsx(lu,{className:"w-4 h-4"})," Student"]}),i.jsxs("button",{onClick:()=>r(G.TEACHER),className:Ye(e===G.TEACHER),children:[i.jsx(Er,{className:"w-4 h-4"})," Teacher"]}),i.jsxs("button",{onClick:()=>r(G.ADMIN),className:Ye(e===G.ADMIN),children:[i.jsx(Md,{className:"w-4 h-4"})," Admin"]})]}),a&&i.jsx("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-3 rounded-lg text-sm border border-red-100 dark:border-red-800 text-center",children:a}),i.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e===G.TEACHER&&i.jsxs("div",{children:[i.jsx("label",{className:"text-slate-700 dark:text-slate-300 font-medium text-sm mb-1 block",children:"Select Class"}),Xe&&$.length===0?i.jsx("div",{className:"text-xs text-slate-500",children:"Loading classes..."}):$.length===0?i.jsx("div",{className:"text-xs text-red-500",children:"No classes found. Please use valid School Link."}):i.jsxs(Gr,{value:o.classId,onChange:at,required:!0,children:[i.jsx("option",{value:"",children:"-- Choose Class --"}),$.map(L=>i.jsx("option",{value:L.id,children:L.name},L.id))]})]}),e===G.STUDENT&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-slate-700 dark:text-slate-300 font-medium text-sm mb-1 block",children:"1. Select Class"}),Xe&&$.length===0?i.jsx("div",{className:"text-xs text-slate-500",children:"Loading classes..."}):$.length===0?i.jsx("div",{className:"text-xs text-red-500",children:"No classes found. Please use valid School Link."}):i.jsxs(Gr,{value:o.classId,onChange:at,required:!0,children:[i.jsx("option",{value:"",children:"-- Choose --"}),$.map(L=>i.jsx("option",{value:L.id,children:L.name},L.id))]})]}),o.classId&&i.jsxs("div",{className:"animate-fade-in-up",children:[i.jsx("label",{className:"text-slate-700 dark:text-slate-300 font-medium text-sm mb-1 block",children:"2. Select Your Name"}),Xe?i.jsx("div",{className:"text-xs text-slate-500",children:"Loading names..."}):i.jsxs(Gr,{value:o.id,onChange:L=>c({...o,id:L.target.value}),required:!0,children:[i.jsx("option",{value:"",children:"-- Choose Name --"}),te.map(L=>i.jsxs("option",{value:L.id,children:[L.name," (",L.reg_no,")"]},L.id))]})]})]}),e===G.ADMIN&&i.jsxs("div",{children:[i.jsx("label",{className:"text-slate-700 dark:text-slate-300 font-medium text-sm mb-1 block",children:"Admin Email"}),i.jsx(K,{type:"email",placeholder:"admin@school.com",value:o.id,onChange:L=>c({...o,id:L.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-slate-700 dark:text-slate-300 font-medium text-sm mb-1 block",children:e===G.STUDENT?"3. Date of Birth":"Password"}),i.jsx(K,{type:e===G.STUDENT?"date":"password",placeholder:e===G.STUDENT?"YYYY-MM-DD":"",value:o.password,onChange:L=>c({...o,password:L.target.value})}),e===G.ADMIN&&i.jsx("div",{className:"text-right mt-1",children:i.jsxs("button",{type:"button",onClick:()=>h(!0),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1 justify-end ml-auto",children:[i.jsx(wy,{className:"w-3 h-3"})," Forgot Password?"]})})]}),i.jsx(H,{type:"submit",className:"w-full mt-2",disabled:s,children:s?"Authenticating...":"Login"})]}),e===G.ADMIN&&i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["New School? ",i.jsx("span",{onClick:()=>pe("/setup"),className:"text-blue-600 dark:text-blue-400 cursor-pointer font-bold hover:underline",children:"Register Here"})]})})]})})},Xb=({user:t})=>{const[e,r]=b.useState("students"),[s,n]=b.useState([]),[a,l]=b.useState([]),[o,c]=b.useState({}),[u,h]=b.useState(!1),[d,f]=b.useState(t.subjects),[x,v]=b.useState(t.submissionStatus==="SUBMITTED"),[y,w]=b.useState(!1),[g,p]=b.useState({name:t.teacherName||"",photo:t.teacherPhoto||""}),[m,_]=b.useState(!1),[N,E]=b.useState(!1),[S,C]=b.useState(null),[W,R]=b.useState(!1),[Q,de]=b.useState(""),[me,bt]=b.useState({name:"",max:"50",pass:"18"}),[J,Ce]=b.useState({regNo:"",rollNo:"",name:"",dob:"",gender:"",fatherName:"",motherName:"",photoUrl:""}),[nt,A]=b.useState(!1),[$,V]=b.useState(""),[te,ae]=b.useState(""),[Xe,be]=b.useState({name:!1,dob:!1,gender:!1}),[pe,Ae]=b.useState(null),[Ot,Mt]=b.useState(!1);b.useEffect(()=>{at()},[]),b.useEffect(()=>{if(te){const k=setTimeout(()=>ae(""),3e3);return()=>clearTimeout(k)}},[te]),b.useEffect(()=>{const k=O=>{e==="marks"&&!x&&(O.preventDefault(),O.returnValue="")};return window.addEventListener("beforeunload",k),()=>window.removeEventListener("beforeunload",k)},[e,x]);const at=async()=>{h(!0);const k=await D.getSchoolConfig();C(k),w((k==null?void 0:k.allowTeacherSubjectEdit)??!1);const O=await D.getStudentsByClass(t.id);n(O);const B={};for(const Z of O){const Fe=await D.getMarks(Z.id,"Term 1");Fe?B[Z.id]=Fe:B[Z.id]={studentId:Z.id,subjects:d.reduce((se,sr)=>({...se,[sr.name]:0}),{}),total:0,grade:"F",term:"Term 1"}}c(B);const q=await D.getPendingAdmissions(t.id);l(q),q.length>0&&r("students"),h(!1)},Bt=k=>{J[k]?be(O=>({...O,[k]:!1})):be(O=>({...O,[k]:!0}))},Pr=(k,O,B)=>{if(x)return;if(B===""){c(Fe=>{const se={...Fe[k]};return se.subjects={...se.subjects,[O]:""},{...Fe,[k]:se}});return}const q=parseInt(B);if(isNaN(q)&&B.toUpperCase()!=="AB")return;const Z=B.toUpperCase()==="AB"?"AB":q;c(Fe=>{const se={...Fe[k]};se.subjects={...se.subjects,[O]:Z};const sr=Object.values(se.subjects).reduce((na,is)=>na+(typeof is=="number"?is:0),0);se.total=sr;let ll=0,bu=!1;Object.keys(se.subjects).forEach(na=>{const is=d.find(en=>en.name===na);if(is){ll+=is.maxMarks;const en=se.subjects[na];(typeof en=="number"?en:0)<is.passMarks&&(bu=!0)}});const as=ll>0?sr/ll*100:0;return as>=90?se.grade="A+":as>=80?se.grade="A":as>=70?se.grade="B+":as>=60?se.grade="B":as>=50?se.grade="C+":as>=40?se.grade="C":se.grade="D",se.resultStatus=bu?"FAILED":"PASS",(se.grade==="D"||se.grade==="F")&&(se.resultStatus="FAILED"),{...Fe,[k]:se}})},j=async()=>{h(!0);for(const k of Object.values(o))await D.saveMarks(k);h(!1),alert("All marks saved successfully!")},ge=async(k,O)=>{if(O==="APPROVE"){const B=await D.verifyStudent(k);B.success?(at(),l(q=>q.filter(Z=>Z.id!==k))):alert(B.message)}else{if(!window.confirm("Reject this admission?"))return;(await D.rejectAdmission(k)).success&&l(q=>q.filter(Z=>Z.id!==k))}},it=async()=>{if(!me.name)return;const k=parseInt(me.max)||50,O=parseInt(me.pass)||18,B=[...d,{name:me.name,maxMarks:k,passMarks:O}];(await D.updateClassSubjects(t.id,B)).success?(f(B),bt({name:"",max:"50",pass:"18"}),at()):alert("Failed to add subject")},Ye=async k=>{if(!window.confirm("Delete this subject? Existing marks for this subject will be hidden."))return;const O=[...d];O.splice(k,1),(await D.updateClassSubjects(t.id,O)).success&&(f(O),at())},L=async()=>{(await D.updateClassDetails(t.id,{teacherName:g.name,teacherPhoto:g.photo})).success?_(!1):alert("Failed update")},ie=async()=>{if(!Q||Q.length<4){alert("Password too short");return}const k=await D.changeClassPassword(t.id,Q);k.success?(alert("Password updated!"),R(!1),de("")):alert("Failed: "+k.message)},_t=async(k,O)=>{if(!k.target.files||k.target.files.length===0)return;if(!t.isPro){alert("Photo upload is an Elite/Pro feature.");return}E(!0);const B=k.target.files[0],q=await D.uploadImage(B,O==="TEACHER"?"teachers":"students");E(!1),q.success&&q.publicUrl?O==="TEACHER"?p(Z=>({...Z,photo:q.publicUrl})):Ce(Z=>({...Z,photoUrl:q.publicUrl})):alert("Upload failed: "+q.message)},ss=async k=>{k.preventDefault(),V(""),ae(""),be({name:!1,dob:!1,gender:!1});let O=!1;if(J.name||(be(q=>({...q,name:!0})),O=!0),J.dob||(be(q=>({...q,dob:!0})),O=!0),J.gender||(be(q=>({...q,gender:!0})),O=!0),O){V(" Please fill Name, DOB & Gender!");return}A(!0);const B=await D.createStudent(t.id,J);if(A(!1),B.success){const q=J.name;ae(` ${q} Added Successfully! Ready for next.`),Ce({regNo:"",rollNo:"",name:"",dob:"",gender:"",fatherName:"",motherName:"",photoUrl:""}),at()}else alert("Failed: "+B.message)},yu=async(k,O)=>{if(!window.confirm(`Delete ${O}?`))return;const B=await D.deleteStudent(k);B.success?at():alert("Failed: "+B.message)},al=async()=>{if(x){if(!window.confirm("Unlock results?"))return;(await D.toggleClassSubmission(t.id,!1)).success&&v(!1)}else{if(!window.confirm("Verify & Submit to Admin?"))return;(await D.toggleClassSubmission(t.id,!0)).success&&(v(!0),alert("Submitted!"))}},ns={total:s.length,male:s.filter(k=>k.gender==="Male").length,female:s.filter(k=>k.gender==="Female").length},E0=()=>{const k=(S==null?void 0:S.sortingMethod)||"GENDER_ROLL";return[...s].sort((O,B)=>k==="GENDER_ROLL"?O.gender==="Male"&&B.gender!=="Male"?-1:O.gender!=="Male"&&B.gender==="Male"?1:(O.rollNo||9999)-(B.rollNo||9999):k==="ROLL_ONLY"?(O.rollNo||9999)-(B.rollNo||9999):k==="NAME_ONLY"?O.name.localeCompare(B.name):0)},wu=(k,O)=>{if(O)return"FAILED";const B=(S==null?void 0:S.resultDisplayType)||"PASS_FAIL";if(B==="PASS_FAIL")return"PASSED";if(B==="CLASS_DISTINCTION"){let q=0;Object.keys(k.subjects).forEach(Fe=>{const se=d.find(sr=>sr.name===Fe);se&&(q+=se.maxMarks)});const Z=q>0?k.total/q*100:0;return Z>=80?"DISTINCTION":Z>=60?"FIRST CLASS":Z>=50?"SECOND CLASS":"PASSED"}if(B==="GRADE_ONLY")return`GRADE: ${k.grade}`;if(B==="PERCENTAGE"){let q=0;return Object.keys(k.subjects).forEach(Fe=>{const se=d.find(sr=>sr.name===Fe);se&&(q+=se.maxMarks)}),`${(q>0?k.total/q*100:0).toFixed(1)}%`}return"PASSED"},il=b.useMemo(()=>{if(!(S!=null&&S.showRank))return{};const k=s.map(B=>{const q=o[B.id];return{id:B.id,total:(q==null?void 0:q.total)||0}}).sort((B,q)=>q.total-B.total),O={};return k.forEach((B,q)=>{O[B.id]=q+1}),O},[s,o,S==null?void 0:S.showRank]),k0=()=>{if(e==="students")return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-1 bg-blue-50 dark:bg-blue-900/40 px-2 py-1 rounded",title:"Boys",children:[i.jsx("img",{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=Felix&gender=male",className:"w-4 h-4 rounded-full",alt:"B"}),i.jsx("span",{className:"text-xs font-bold text-blue-700 dark:text-blue-300",children:ns.male})]}),i.jsxs("div",{className:"flex items-center gap-1 bg-pink-50 dark:bg-pink-900/40 px-2 py-1 rounded",title:"Girls",children:[i.jsx("img",{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=Aneka&gender=female",className:"w-4 h-4 rounded-full",alt:"G"}),i.jsx("span",{className:"text-xs font-bold text-pink-700 dark:text-pink-300",children:ns.female})]}),i.jsxs("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded",title:"Total",children:[i.jsx(ki,{className:"w-3 h-3 text-slate-600 dark:text-slate-400"}),i.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:ns.total})]})]});if(e==="marks"){const k=Object.values(o).filter(O=>O.total>0).length;return i.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-700 px-3 py-1 rounded text-xs",children:[i.jsx("span",{className:"text-slate-500 font-bold uppercase",children:"Progress:"}),i.jsxs("span",{className:`font-bold ${k===ns.total?"text-green-600":"text-slate-800 dark:text-slate-200"}`,children:[k," / ",ns.total]})]})}else if(e==="subjects")return i.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-700 px-3 py-1 rounded text-xs",children:[i.jsx(ly,{className:"w-3 h-3 text-slate-500"}),i.jsxs("span",{className:"font-bold",children:[d.length," Subjects"]})]});return null},sa=E0();if(Ot)return i.jsxs("div",{className:"fixed inset-0 z-50 bg-white overflow-auto",children:[i.jsx("style",{children:`
                @media print {
                  @page {
                    size: A4;
                    margin: 1cm;
                  }
                  body {
                    -webkit-print-color-adjust: exact;
                  }
                }
              `}),i.jsxs("div",{className:"p-8 max-w-[210mm] mx-auto min-h-screen",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6 print:hidden",children:[i.jsxs(H,{variant:"secondary",onClick:()=>Mt(!1),children:[i.jsx(Mm,{className:"w-4 h-4 mr-2"})," Back to Dashboard"]}),i.jsx("div",{className:"flex gap-2",children:i.jsxs(H,{onClick:()=>window.print(),className:"bg-blue-600",children:[i.jsx(Ul,{className:"w-4 h-4 mr-2"})," Print / Save PDF"]})})]}),i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold uppercase tracking-wide",children:t.schoolName||"SCHOOL NAME"}),i.jsx("p",{className:"text-lg font-medium",children:t.schoolPlace||"Place"}),i.jsx("div",{className:"mt-4 border-b-2 border-black inline-block px-4",children:i.jsxs("h2",{className:"text-xl font-bold uppercase",children:["Class Register: ",t.name]})}),i.jsxs("p",{className:"text-sm mt-2",children:["Class Teacher: ",g.name," | Year: ",(S==null?void 0:S.academicYear)||new Date().getFullYear()]})]}),i.jsxs("table",{className:"w-full text-left border-collapse border border-black text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-100",children:[i.jsx("th",{className:"border border-black p-2 w-10 text-center",children:"No."}),i.jsx("th",{className:"border border-black p-2 w-12 text-center",children:"Roll"}),i.jsx("th",{className:"border border-black p-2 w-16",children:"Reg No"}),i.jsx("th",{className:"border border-black p-2",children:"Student Name"}),i.jsx("th",{className:"border border-black p-2 w-20",children:"Gender"}),i.jsx("th",{className:"border border-black p-2 w-24",children:"DOB"}),i.jsx("th",{className:"border border-black p-2",children:"Parent's Name"}),i.jsx("th",{className:"border border-black p-2 w-24",children:"Signature"}),i.jsx("th",{className:"border border-black p-2 w-32",children:"Remarks"})]})}),i.jsx("tbody",{children:sa.map((k,O)=>i.jsxs("tr",{children:[i.jsx("td",{className:"border border-black p-2 text-center",children:O+1}),i.jsx("td",{className:"border border-black p-2 text-center font-bold",children:k.rollNo||"-"}),i.jsx("td",{className:"border border-black p-2 font-mono",children:k.regNo||"-"}),i.jsx("td",{className:"border border-black p-2 font-bold uppercase",children:k.name}),i.jsx("td",{className:"border border-black p-2",children:k.gender}),i.jsx("td",{className:"border border-black p-2",children:k.dob}),i.jsx("td",{className:"border border-black p-2",children:k.fatherName}),i.jsx("td",{className:"border border-black p-2"}),i.jsx("td",{className:"border border-black p-2"})]},k.id))})]}),i.jsxs("div",{className:"mt-12 flex justify-between pt-12",children:[i.jsx("div",{className:"border-t border-black px-8 pt-2",children:"Class Teacher Signature"}),i.jsx("div",{className:"border-t border-black px-8 pt-2",children:"Headmaster Signature"})]})]})]});if(pe){const k=o[pe.id],O=(k==null?void 0:k.resultStatus)==="FAILED",B=wu(k,O),q=il[pe.id];return i.jsxs("div",{className:"fixed inset-0 z-50 bg-white flex flex-col items-center justify-center p-4",children:[i.jsxs("div",{className:"w-full max-w-sm border-2 border-slate-800 p-6 rounded-xl text-center print:border-2 print:max-w-full",children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("h2",{className:"text-xl font-bold uppercase tracking-widest",children:[t.name," Report Card"]}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Academic Year ",(S==null?void 0:S.academicYear)||new Date().getFullYear()]})]}),pe.photoUrl?i.jsx("img",{src:pe.photoUrl,alt:"Student",className:"w-24 h-24 rounded-full mx-auto mb-4 object-cover border-2 border-slate-200"}):i.jsx("div",{className:`w-20 h-20 ${pe.gender==="Male"?"bg-blue-50":"bg-pink-50"} rounded-full mx-auto mb-4 flex items-center justify-center`,children:pe.gender==="Male"?i.jsx(Er,{className:"w-8 h-8 text-blue-500"}):i.jsx(Er,{className:"w-8 h-8 text-pink-500"})}),i.jsx("h1",{className:"text-2xl font-bold mb-1",children:pe.name}),i.jsxs("div",{className:"flex justify-center gap-2 mb-6",children:[i.jsxs("span",{className:"font-mono text-sm bg-slate-100 inline-block px-2 rounded",children:["Reg: ",pe.regNo]}),i.jsxs("span",{className:"font-mono text-sm bg-slate-100 inline-block px-2 rounded",children:["Roll: ",pe.rollNo||"-"]})]}),i.jsx("table",{className:"w-full text-left text-sm mb-6 border-t border-b border-slate-200",children:i.jsxs("tbody",{children:[d.map(Z=>i.jsxs("tr",{className:"border-b border-slate-100 last:border-0",children:[i.jsxs("td",{className:"py-2 font-medium",children:[Z.name," ",i.jsxs("span",{className:"text-[10px] text-slate-400",children:["/ ",Z.maxMarks]})]}),i.jsx("td",{className:"py-2 text-right font-bold",children:(k==null?void 0:k.subjects[Z.name])||0})]},Z.name)),i.jsxs("tr",{className:"bg-slate-50 font-bold",children:[i.jsx("td",{className:"py-2 pl-2",children:"Total"}),i.jsx("td",{className:"py-2 text-right pr-2",children:k==null?void 0:k.total})]}),(S==null?void 0:S.showRank)&&q&&i.jsxs("tr",{className:"bg-yellow-50 font-bold text-yellow-800",children:[i.jsx("td",{className:"py-2 pl-2",children:"Class Rank"}),i.jsxs("td",{className:"py-2 text-right pr-2",children:["#",q]})]})]})}),(S==null?void 0:S.showPassFailStatus)!==!1&&i.jsxs("div",{className:`mt-4 p-2 rounded font-bold text-white ${O?"bg-red-500":"bg-green-500"}`,children:["RESULT: ",B]}),i.jsx("div",{className:"text-xs text-slate-400 mt-8",children:"Generated by SchoolResult Pro"})]}),i.jsxs("div",{className:"mt-6 flex gap-4 print:hidden",children:[i.jsxs(H,{onClick:()=>window.print(),className:"flex items-center gap-2",children:[i.jsx(Ul,{className:"w-4 h-4"})," Print / Save PDF"]}),i.jsx(H,{variant:"secondary",onClick:()=>Ae(null),children:"Close"})]})]})}return W?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 animate-fade-in-up",children:i.jsxs(X,{className:"max-w-xs w-full",children:[i.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[i.jsx(Is,{className:"w-5 h-5"})," Change Password"]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 block mb-1",children:"New Password"}),i.jsx(K,{type:"password",value:Q,onChange:k=>de(k.target.value)})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(H,{onClick:ie,className:"flex-1",children:"Update"}),i.jsx(H,{variant:"secondary",onClick:()=>R(!1),className:"flex-1",children:"Cancel"})]})]})}):i.jsxs("div",{className:"pb-20 relative animate-fade-in-up",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 p-3 mb-4 flex flex-col sm:flex-row items-center justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3 w-full",children:[i.jsxs("div",{className:"relative group shrink-0",children:[g.photo?i.jsx("img",{src:g.photo,alt:"Teacher",className:"w-12 h-12 rounded-lg object-cover border border-slate-200 dark:border-slate-600"}):i.jsx("div",{className:"w-12 h-12 bg-blue-50 dark:bg-blue-900 rounded-lg flex items-center justify-center text-blue-600 dark:text-blue-300 border border-slate-200 dark:border-slate-600",children:i.jsx(Ey,{className:"w-6 h-6"})}),m&&i.jsx("label",{className:`absolute inset-0 bg-black/50 rounded-lg flex items-center justify-center transition-opacity ${t.isPro?"cursor-pointer hover:bg-black/60":"cursor-not-allowed"}`,children:t.isPro?i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:k=>_t(k,"TEACHER")}),i.jsx(Wa,{className:"w-4 h-4 text-white"})]}):i.jsx(Ws,{className:"w-4 h-4 text-slate-300"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-baseline gap-2 mb-0.5",children:[i.jsx("h1",{className:"text-lg font-black text-blue-600 dark:text-blue-400 tracking-tight leading-none",children:t.name}),x?i.jsxs("span",{className:"text-[10px] font-bold text-green-600 bg-green-50 px-1.5 py-0.5 rounded flex items-center gap-0.5",children:[i.jsx(mn,{className:"w-2.5 h-2.5"})," Submitted"]}):i.jsxs("span",{className:"text-[10px] font-bold text-orange-600 bg-orange-50 px-1.5 py-0.5 rounded flex items-center gap-0.5",children:[i.jsx(_i,{className:"w-2.5 h-2.5"})," Draft"]})]}),m?i.jsxs("div",{className:"space-y-1",children:[i.jsx("input",{className:"bg-slate-50 border rounded px-1.5 py-0.5 text-xs font-bold w-32",value:g.name,onChange:k=>p({...g,name:k.target.value})}),i.jsxs("div",{className:"flex gap-1 mt-1",children:[i.jsx("button",{onClick:L,className:"text-[10px] bg-green-100 text-green-700 px-2 py-0.5 rounded font-bold",children:"Save"}),i.jsxs("button",{onClick:()=>R(!0),className:"text-[10px] bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded font-bold flex items-center gap-1",children:[i.jsx(Is,{className:"w-3 h-3"})," Pass"]})]})]}):i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 truncate",children:g.name||"Class Teacher"}),i.jsx("button",{onClick:()=>_(!0),className:"text-slate-400 hover:text-blue-500",children:i.jsx(zo,{className:"w-3 h-3"})})]})]})]}),i.jsxs("div",{className:"flex-shrink-0",children:[k0(),!["students","marks","subjects"].includes(e)&&i.jsxs("div",{className:"flex items-center gap-1 bg-slate-100 px-2 py-1 rounded text-xs",children:[i.jsx(ki,{className:"w-3 h-3 text-slate-400"}),i.jsx("span",{className:"font-bold",children:ns.total})]})]})]}),i.jsx("div",{className:"flex justify-between items-center mb-6 overflow-x-auto pb-2",children:i.jsxs("div",{className:"flex bg-slate-200 dark:bg-slate-700 p-1 rounded-lg",children:[i.jsx("button",{onClick:()=>r("students"),className:`px-4 py-2 rounded-md text-sm font-bold transition-all ${e==="students"?"bg-white dark:bg-slate-800 text-blue-600 shadow-sm":"text-slate-600 dark:text-slate-300 hover:text-slate-900"}`,children:"Students"}),i.jsx("button",{onClick:()=>r("subjects"),className:`px-4 py-2 rounded-md text-sm font-bold transition-all ${e==="subjects"?"bg-white dark:bg-slate-800 text-blue-600 shadow-sm":"text-slate-600 dark:text-slate-300 hover:text-slate-900"}`,children:"Subjects"}),i.jsx("button",{onClick:()=>r("marks"),className:`px-4 py-2 rounded-md text-sm font-bold transition-all ${e==="marks"?"bg-white dark:bg-slate-800 text-blue-600 shadow-sm":"text-slate-600 dark:text-slate-300 hover:text-slate-900"}`,children:"Marks"}),i.jsx("button",{onClick:()=>r("reports"),className:`px-4 py-2 rounded-md text-sm font-bold transition-all ${e==="reports"?"bg-white dark:bg-slate-800 text-blue-600 shadow-sm":"text-slate-600 dark:text-slate-300 hover:text-slate-900"}`,children:"Reports"})]})}),e==="students"&&i.jsxs("div",{className:"grid md:grid-cols-3 gap-6 animate-fade-in-up",children:[i.jsxs("div",{className:"md:col-span-1",children:[i.jsxs(X,{className:"border-t-4 border-t-blue-500 relative",children:[te&&i.jsxs("div",{className:"absolute inset-0 z-20 bg-emerald-500 rounded-xl flex flex-col items-center justify-center p-6 text-center animate-fade-in-up",children:[i.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center mb-2 shadow-lg animate-bounce",children:i.jsx(mn,{className:"w-8 h-8 text-emerald-600"})}),i.jsx("h3",{className:"text-white font-bold text-lg leading-tight",children:te})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[i.jsx(Xm,{className:"w-5 h-5 text-blue-600"})," Add Student"]}),i.jsxs("p",{className:"text-xs text-blue-600 font-bold bg-blue-50 dark:bg-blue-900/30 inline-block px-2 py-1 rounded mt-1",children:["Adding Student #",s.length+1]})]}),$&&i.jsxs("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded text-sm font-bold border border-red-200 dark:border-red-800 flex items-center gap-2",children:[i.jsx($m,{className:"w-4 h-4"})," ",$]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsxs("label",{className:`w-24 h-24 rounded-full flex items-center justify-center relative overflow-hidden shadow-inner transition-all group ${J.gender==="Male"?"bg-blue-50 border-4 border-blue-100":J.gender==="Female"?"bg-pink-50 border-4 border-pink-100":"bg-slate-100 border-4 border-slate-200"} ${t.isPro?"cursor-pointer hover:border-blue-400":"cursor-not-allowed opacity-80"}`,children:[J.photoUrl?i.jsx("img",{src:J.photoUrl,className:"w-full h-full object-cover",alt:"prev"}):J.gender==="Male"?i.jsx("img",{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=Felix&gender=male",className:"w-16 h-16 opacity-80",alt:"M"}):J.gender==="Female"?i.jsx("img",{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=Aneka&gender=female",className:"w-16 h-16 opacity-80",alt:"F"}):i.jsx(Wa,{className:"w-8 h-8 text-slate-400"}),t.isPro?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:i.jsx(Wa,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),i.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:k=>_t(k,"STUDENT"),disabled:N})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/40 z-10 backdrop-blur-[1px]",children:i.jsx(Ws,{className:"w-6 h-6 text-slate-600 drop-shadow-md"})}),i.jsx("div",{className:"absolute bottom-2 bg-yellow-400 text-yellow-900 text-[9px] font-black px-2 py-0.5 rounded-full z-20 shadow-sm border border-yellow-500",children:"UNLOCK PRO"})]})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-slate-500 ml-1 font-bold uppercase",children:"FULL NAME *"}),i.jsx("input",{value:J.name,onChange:k=>Ce({...J,name:k.target.value.toUpperCase()}),onBlur:()=>Bt("name"),className:`w-full bg-white dark:bg-slate-800 font-bold rounded-lg px-4 py-2.5 outline-none border-2 transition-all ${Xe.name?"border-red-500 focus:border-red-500":"border-slate-300 dark:border-slate-600 focus:border-blue-500"}`})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-slate-500 ml-1 font-bold uppercase",children:"Gender *"}),i.jsx("div",{className:`rounded-lg border-2 ${Xe.gender?"border-red-500":"border-slate-300 dark:border-slate-600"} overflow-hidden`,children:i.jsxs("select",{className:"w-full bg-white dark:bg-slate-800 px-3 py-2.5 outline-none",value:J.gender,onChange:k=>Ce({...J,gender:k.target.value}),onBlur:()=>Bt("gender"),children:[i.jsx("option",{value:"",children:"Select"}),i.jsx("option",{value:"Male",children:"Male"}),i.jsx("option",{value:"Female",children:"Female"})]})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-slate-500 ml-1 font-bold uppercase",children:"DOB *"}),i.jsx("input",{type:"date",className:`w-full bg-white dark:bg-slate-800 rounded-lg px-3 py-2.5 outline-none border-2 transition-all ${Xe.dob?"border-red-500 focus:border-red-500":"border-slate-300 dark:border-slate-600 focus:border-blue-500"}`,value:J.dob,onChange:k=>Ce({...J,dob:k.target.value}),onBlur:()=>Bt("dob")})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx(K,{placeholder:"Reg No (Opt)",value:J.regNo,onChange:k=>Ce({...J,regNo:k.target.value})}),i.jsx(K,{type:"text",placeholder:"Roll No (Opt)",value:J.rollNo,onChange:k=>{const O=k.target.value;(O===""||/^\d+$/.test(O))&&Ce({...J,rollNo:O})}})]}),i.jsx(K,{placeholder:"Father's Name",value:J.fatherName,onChange:k=>Ce({...J,fatherName:k.target.value})}),i.jsx(K,{placeholder:"Mother's Name",value:J.motherName,onChange:k=>Ce({...J,motherName:k.target.value})}),i.jsx(H,{onClick:ss,disabled:nt,className:"w-full bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-200 dark:shadow-none",children:nt?"Saving...":"Save & Add Next"})]})]}),a.length>0&&i.jsxs(X,{className:"mt-4 border-l-4 border-l-yellow-500",children:[i.jsxs("h4",{className:"font-bold text-sm mb-3",children:["Pending Admissions (",a.length,")"]}),i.jsx("div",{className:"space-y-2",children:a.map(k=>i.jsxs("div",{className:"bg-slate-50 p-2 rounded flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-xs",children:k.name}),i.jsxs("p",{className:"text-[10px] text-slate-500",children:["Reg: ",k.regNo]})]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:()=>ge(k.id,"APPROVE"),className:"p-1 bg-green-100 text-green-600 rounded",children:i.jsx(mn,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>ge(k.id,"REJECT"),className:"p-1 bg-red-100 text-red-600 rounded",children:i.jsx(ky,{className:"w-3 h-3"})})]})]},k.id))})]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsxs(X,{className:"min-h-[400px]",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white",children:["Student List (",s.length,")"]}),i.jsxs(H,{onClick:()=>Mt(!0),className:"flex items-center gap-2 text-xs py-1.5 px-3 bg-slate-800 text-white",children:[i.jsx(Ul,{className:"w-3 h-3"})," Class Register"]})]}),i.jsx("div",{className:"space-y-2",children:s.length===0?i.jsx("p",{className:"text-slate-400 text-center py-10",children:"No students added yet."}):sa.map((k,O)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-slate-100 rounded-lg hover:shadow-sm transition-shadow",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-xs font-mono text-slate-400 w-8",children:["#",k.rollNo||"-"]}),k.photoUrl?i.jsx("img",{src:k.photoUrl,className:"w-10 h-10 rounded-full object-cover bg-slate-100",alt:"s"}):i.jsx("div",{className:`w-10 h-10 rounded-full ${k.gender==="Male"?"bg-blue-50":k.gender==="Female"?"bg-pink-50":"bg-slate-100"} flex items-center justify-center font-bold text-xs border-2 border-white shadow-sm`,children:k.gender==="Male"?i.jsx("img",{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=Felix&gender=male",className:"w-8 h-8 rounded-full",alt:"B"}):k.gender==="Female"?i.jsx("img",{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=Aneka&gender=female",className:"w-8 h-8 rounded-full",alt:"G"}):i.jsx(Er,{className:"w-6 h-6 text-slate-400"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-sm text-slate-800",children:k.name}),i.jsxs("p",{className:"text-xs text-slate-500 font-mono",children:[k.gender?k.gender:"-"," | DOB: ",k.dob," | Reg: ",k.regNo||"-"]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>Ae(k),className:"p-2 text-slate-400 hover:text-blue-600 bg-slate-50 rounded-lg",title:"Print Card",children:i.jsx(iu,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>yu(k.id,k.name),className:"p-2 text-slate-400 hover:text-red-600 bg-slate-50 rounded-lg",title:"Delete",children:i.jsx(Wo,{className:"w-4 h-4"})})]})]},k.id))})]})})]}),e==="subjects"&&i.jsxs("div",{className:"max-w-2xl mx-auto animate-fade-in-up",children:[!y&&i.jsx("div",{className:"mb-4 p-3 bg-yellow-50 text-yellow-800 text-sm rounded border border-yellow-200",children:"Admin has disabled subject editing. You can only view subjects."}),i.jsxs(X,{className:"mb-6",children:[i.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Add New Subject"}),i.jsxs("div",{className:"flex gap-2 items-end",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"text-xs text-slate-500 ml-1",children:"Subject Name"}),i.jsx(K,{placeholder:"e.g. English",value:me.name,onChange:k=>bt({...me,name:k.target.value}),disabled:!y})]}),i.jsxs("div",{className:"w-20",children:[i.jsx("label",{className:"text-xs text-slate-500 ml-1",children:"Max"}),i.jsx(K,{value:me.max,onChange:k=>bt({...me,max:k.target.value}),disabled:!y})]}),i.jsxs("div",{className:"w-20",children:[i.jsx("label",{className:"text-xs text-slate-500 ml-1",children:"Pass"}),i.jsx(K,{value:me.pass,onChange:k=>bt({...me,pass:k.target.value}),disabled:!y})]}),i.jsx(H,{onClick:it,disabled:!y,className:"h-[42px] px-4",children:i.jsx(Wm,{className:"w-5 h-5"})})]})]}),i.jsxs(X,{children:[i.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Current Subjects"}),i.jsx("div",{className:"space-y-2",children:d.map((k,O)=>i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded border border-slate-200",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800",children:k.name}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Max: ",k.maxMarks," | Pass: ",k.passMarks]})]}),y&&i.jsx("button",{onClick:()=>Ye(O),className:"text-red-400 hover:text-red-600",children:i.jsx(Wo,{className:"w-4 h-4"})})]},O))})]})]}),e==="marks"&&i.jsxs("div",{className:"animate-fade-in-up",children:[i.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[i.jsxs("p",{className:"text-sm text-slate-500",children:["Enter marks for ",i.jsx("span",{className:"font-bold",children:s.length})," students."]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(H,{onClick:at,variant:"secondary",className:"p-2",children:i.jsx(Vm,{className:`w-4 h-4 ${u?"animate-spin":""}`})}),i.jsxs(H,{onClick:j,disabled:x,className:"flex items-center gap-2",children:[i.jsx(qo,{className:"w-4 h-4"})," Save All"]})]})]}),i.jsxs("div",{className:"md:hidden space-y-4",children:[sa.map(k=>{const O=o[k.id],B=(O==null?void 0:O.resultStatus)==="FAILED",q=il[k.id];return i.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl p-4 shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4 border-b border-slate-100 dark:border-slate-700 pb-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"w-10 h-10 bg-slate-100 rounded-full flex items-center justify-center font-bold text-slate-500",children:["#",k.rollNo||"-"]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg leading-tight",children:k.name}),(S==null?void 0:S.showRank)&&q&&i.jsxs("span",{className:"text-xs font-bold text-yellow-600 bg-yellow-50 px-2 py-0.5 rounded mt-1 inline-block",children:["Rank: ",q]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"block text-2xl font-black text-slate-800 dark:text-white",children:(O==null?void 0:O.total)||0}),(S==null?void 0:S.showPassFailStatus)!==!1&&i.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded uppercase ${B?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:B?"Failed":"Passed"})]})]}),i.jsx("div",{className:"grid grid-cols-2 gap-3",children:d.map(Z=>i.jsxs("div",{className:"relative",children:[i.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400 absolute left-2 top-1.5",children:Z.name}),i.jsx("input",{type:"text",inputMode:"numeric",disabled:x,className:"w-full pt-5 pb-1 px-2 text-center bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-lg font-bold",value:(O==null?void 0:O.subjects[Z.name])??"",onChange:Fe=>Pr(k.id,Z.name,Fe.target.value)})]},Z.name))})]},k.id)}),!x&&i.jsx("button",{onClick:j,className:"fixed bottom-6 right-6 w-14 h-14 bg-blue-600 rounded-full shadow-xl flex items-center justify-center text-white z-50",children:i.jsx(qo,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"hidden md:block overflow-x-auto rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 shadow-sm",children:i.jsxs("table",{className:"w-full text-left border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-800 text-slate-500 text-xs uppercase font-bold",children:[i.jsx("th",{className:"p-3 border-r border-slate-100 dark:border-slate-700 sticky left-0 bg-slate-50 dark:bg-slate-800 z-10 w-16",children:"Roll"}),i.jsx("th",{className:"p-3 border-r border-slate-100 dark:border-slate-700 sticky left-16 bg-slate-50 dark:bg-slate-800 z-10 w-40",children:"Name"}),d.map(k=>i.jsx("th",{className:"p-3 text-center min-w-[80px]",children:i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{children:k.name}),i.jsxs("span",{className:"text-[9px] text-slate-400",children:["Max: ",k.maxMarks]})]})},k.name)),i.jsx("th",{className:"p-3 text-center bg-slate-100 dark:bg-slate-700/50",children:"Total"}),(S==null?void 0:S.showRank)&&i.jsx("th",{className:"p-3 text-center bg-yellow-50 dark:bg-yellow-900/10",children:"Rank"}),(S==null?void 0:S.showPassFailStatus)!==!1&&i.jsx("th",{className:"p-3 text-center bg-slate-100 dark:bg-slate-700/50",children:"Status"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:sa.map(k=>{const O=o[k.id],B=(O==null?void 0:O.resultStatus)==="FAILED",q=il[k.id];return i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50",children:[i.jsx("td",{className:"p-3 font-mono text-xs sticky left-0 bg-inherit z-10 border-r border-slate-100 dark:border-slate-700",children:k.rollNo||"-"}),i.jsx("td",{className:"p-3 font-medium text-sm sticky left-16 bg-inherit z-10 border-r border-slate-100 dark:border-slate-700 truncate max-w-[150px]",children:k.name}),d.map(Z=>i.jsx("td",{className:"p-2 text-center",children:i.jsx("input",{type:"text",disabled:x,className:"w-12 h-8 text-center bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded focus:ring-2 focus:ring-blue-500 outline-none text-sm",value:(O==null?void 0:O.subjects[Z.name])??"",onChange:Fe=>Pr(k.id,Z.name,Fe.target.value)})},Z.name)),i.jsx("td",{className:"p-3 text-center font-bold bg-slate-50 dark:bg-slate-800/30",children:(O==null?void 0:O.total)||0}),(S==null?void 0:S.showRank)&&i.jsx("td",{className:"p-3 text-center font-bold text-yellow-600 bg-yellow-50/50",children:q?`#${q}`:"-"}),(S==null?void 0:S.showPassFailStatus)!==!1&&i.jsx("td",{className:"p-3 text-center bg-slate-50 dark:bg-slate-800/30",children:i.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${B?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:wu(O||{},B)})})]},k.id)})})]})})]}),e==="reports"&&i.jsx("div",{className:"max-w-2xl mx-auto animate-fade-in-up",children:i.jsxs(X,{className:"text-center py-10",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Submission Status"}),i.jsx("div",{className:"flex justify-center mb-6",children:x?i.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center text-green-600",children:i.jsx(mn,{className:"w-12 h-12"})}):i.jsx("div",{className:"w-24 h-24 bg-orange-100 rounded-full flex items-center justify-center text-orange-600",children:i.jsx(_i,{className:"w-12 h-12"})})}),i.jsx("p",{className:"text-slate-500 mb-8 max-w-md mx-auto",children:x?"Results submitted to Admin. To make changes, click Unlock.":"Once you finish entering marks for all students, Submit here to notify Admin."}),i.jsx(H,{onClick:al,className:`px-8 py-3 ${x?"bg-slate-800":"bg-green-600"}`,children:x?"Unlock Results":"Verify & Submit"})]})})]})},Yb=()=>{const[t,e]=b.useState(!1),[r,s]=b.useState(null),[n,a]=b.useState(""),[l,o]=b.useState(!1),[c,u]=b.useState([]),[h,d]=b.useState(!1),[f,x]=b.useState(1),[v,y]=b.useState(""),[w,g]=b.useState(""),[p,m]=b.useState(null),[_,N]=b.useState(""),[E,S]=b.useState({name:"",phone:"",place:"",examName:"",showPassFail:!0,academicYear:"",resultDisplayType:"PASS_FAIL",sortingMethod:"GENDER_ROLL",showRank:!1}),[C,W]=b.useState(""),[R,Q]=b.useState(!1),[de,me]=b.useState([]),[bt,J]=b.useState(!1),[Ce,nt]=b.useState(!1);b.useEffect(()=>{A(),$()},[]),b.useEffect(()=>{f===3&&V()},[f]),b.useEffect(()=>{if(n){const j=setTimeout(()=>a(""),4e3);return()=>clearTimeout(j)}},[n]);const A=async()=>{const j=await D.getSchoolConfig();s(j),j&&(S({name:j.schoolName,phone:j.phone||"",place:j.place||"",examName:j.examName||"",showPassFail:j.showPassFailStatus!==!1,academicYear:j.academicYear||new Date().getFullYear().toString(),resultDisplayType:j.resultDisplayType||"PASS_FAIL",sortingMethod:j.sortingMethod||"GENDER_ROLL",showRank:j.showRank||!1}),j.resultPublishDate?(W(j.resultPublishDate.slice(0,16)),new Date(j.resultPublishDate)<=new Date&&Q(!0)):(Q(!1),W("")))},$=async()=>{d(!0);const j=await D.getClasses();u(j),d(!1)},V=async()=>{J(!0);const j=await D.getSchoolProgress();me(j),J(!1)},te=async j=>{j.preventDefault();const ge=v.trim().toUpperCase();if(!ge||!w){alert("Please enter both Class Name and Password");return}if(c.some(Ye=>Ye.name.toUpperCase()===ge)){alert(`Class "${ge}" already exists!`);return}o(!0);const it=await D.createClass(v,w,"Class Teacher",[]);it.success?(r&&!r.allowTeacherSubjectEdit&&(await D.updateSchoolSettings({allowTeacherSubjectEdit:!0}),s({...r,allowTeacherSubjectEdit:!0})),a(`Class ${v} Created!`),y(""),g(""),$()):alert("Failed: "+it.message),o(!1)},ae=async(j,ge,it=0)=>{if(!window.confirm(`Delete Class "${ge}"?`))return;if(it>0){if(!window.confirm(` CRITICAL WARNING 

This class has ${it} students.
Deleting it will PERMANENTLY DELETE all student data and marks.

Type 'DELETE' to confirm, or click OK to proceed.`))return}else if(!window.confirm(`Are you absolutely sure you want to delete "${ge}"? This action cannot be undone.`))return;const Ye=await D.deleteClass(j);Ye.success?(a("Class deleted successfully."),$()):alert("Delete failed: "+Ye.message)},Xe=async()=>{if(!p||!_||!window.confirm(`Are you sure you want to reset the password for Class ${p.name}?

The teacher will need the new password to login.`))return;const j=await D.changeClassPassword(p.id,_);j.success?(a(`Password for ${p.name} updated!`),m(null),N("")):alert("Failed: "+j.message)},be=async()=>{if(!r)return;(await D.updateSchoolSettings({resultPublishDate:C})).success?(a("Schedule Updated!"),A()):alert("Failed to update schedule")},pe=async()=>{if(!r)return;const j=de.filter(Ye=>Ye.status!=="SUBMITTED");if(j.length>0){if(!window.confirm(` WAIT! Teachers haven't submitted results!

${j.length} classes (e.g., ${j[0].name}) are marked as 'Not Verified' by the teacher.

This means the teacher hasn't confirmed that all students are added. Publish anyway?`))return}else if(!window.confirm("All classes are verified. Publish results now?"))return;const ge=new Date().toISOString();(await D.updateSchoolSettings({resultPublishDate:ge})).success?(a("Results Published Successfully!"),A(),W(ge.slice(0,16))):alert("Failed to publish")},Ae=async()=>{if(!window.confirm("Hide results from students? This will close the public portal."))return;(await D.updateSchoolSettings({resultPublishDate:null})).success&&(a("Results Unpublished."),W(""),A())},Ot=async()=>{window.confirm("This will simulate a payment gateway (Cashfree/Razorpay). Proceed to Pay?")&&(nt(!0),setTimeout(async()=>{const j="TXN"+Date.now(),ge=await D.activateSchoolProLicenseAuto(j);nt(!1),ge.success?(a("Payment Successful! Pro Activated."),A()):alert("Payment Failed.")},2e3))},Mt=()=>`${window.location.href.split("#")[0].replace(/\/$/,"")}/#/login`,at=()=>`${window.location.href.split("#")[0].replace(/\/$/,"")}/#/login?s=${r==null?void 0:r.id}`,Bt=j=>{navigator.clipboard.writeText(j),a("Link Copied!")},Pr=async(j,ge)=>{if(navigator.share)try{await navigator.share({title:j,text:`Access ${j} here:`,url:ge})}catch{console.log("Share cancelled")}else Bt(ge)};return r?i.jsxs("div",{className:"animate-fade-in-up pb-20",children:[p&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:i.jsxs(X,{className:"max-w-xs w-full",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4 text-slate-800 dark:text-white",children:[i.jsx(Is,{className:"w-5 h-5 text-blue-600"}),i.jsx("h3",{className:"font-bold",children:"Reset Password"})]}),i.jsxs("p",{className:"text-sm text-slate-500 mb-4",children:["Set new password for ",i.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.name}),"."]}),i.jsx("div",{className:"mb-4",children:i.jsx(K,{type:"password",autoFocus:!0,placeholder:"New Password",value:_,onChange:j=>N(j.target.value)})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(H,{onClick:Xe,className:"flex-1",children:"Save"}),i.jsx(H,{variant:"secondary",onClick:()=>{m(null),N("")},className:"flex-1",children:"Cancel"})]})]})}),t&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 overflow-y-auto",children:i.jsx("div",{className:"w-full max-w-2xl my-auto",children:i.jsxs(X,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"School Settings"}),i.jsx(H,{variant:"secondary",onClick:()=>e(!1),children:"Close"})]}),i.jsxs("div",{className:"space-y-4",children:[r.isPro?i.jsxs("div",{className:"bg-green-100 dark:bg-green-900/30 p-4 rounded-xl border border-green-200 dark:border-green-800 mb-6 flex items-center gap-3",children:[i.jsx("div",{className:"bg-green-200 dark:bg-green-800 p-2 rounded-full",children:i.jsx(Nn,{className:"w-6 h-6 text-green-700 dark:text-green-300"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Pro License Active"}),i.jsxs("p",{className:"text-xs text-green-700 dark:text-green-300",children:["Valid until ",new Date(r.expiryDate||"").toLocaleDateString()]})]})]}):i.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 rounded-xl p-4 text-white mb-6 shadow-lg transform hover:scale-[1.01] transition-transform cursor-pointer",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[i.jsx(Nn,{className:"w-5 h-5"})," Upgrade to School Pro"]}),i.jsx("p",{className:"text-white/90 text-sm mt-1",children:"Unlock Student Photos, Teacher Photos & Custom Themes."})]}),i.jsx("button",{onClick:Ot,disabled:Ce,className:"bg-white text-orange-600 px-4 py-2 rounded-lg font-bold text-sm shadow-sm hover:bg-slate-50 disabled:opacity-75",children:Ce?"Processing...":"Pay 199 (Simulated)"})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"School Name"}),i.jsx(K,{value:E.name,onChange:j=>S({...E,name:j.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Exam Name (e.g. Onam Exam 2024)"}),i.jsx(K,{placeholder:"Enter Exam Name to show on Result",value:E.examName,onChange:j=>S({...E,examName:j.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone"}),i.jsx(K,{value:E.phone,onChange:j=>S({...E,phone:j.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Place"}),i.jsx(K,{value:E.place,onChange:j=>S({...E,place:j.target.value})})]})]}),i.jsxs("div",{className:"border-t border-slate-200 pt-4 mt-2",children:[i.jsx("h4",{className:"font-bold text-sm mb-3",children:"Result & Data Display"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Academic Year"}),i.jsx(K,{placeholder:"e.g. 2024-25",value:E.academicYear,onChange:j=>S({...E,academicYear:j.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Sorting Method"}),i.jsxs(Gr,{value:E.sortingMethod,onChange:j=>S({...E,sortingMethod:j.target.value}),children:[i.jsx("option",{value:"GENDER_ROLL",children:"Boys (Roll) then Girls (Roll)"}),i.jsx("option",{value:"ROLL_ONLY",children:"Roll No Only"}),i.jsx("option",{value:"NAME_ONLY",children:"Name Only"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Result Status Display"}),i.jsxs(Gr,{value:E.resultDisplayType,onChange:j=>S({...E,resultDisplayType:j.target.value}),children:[i.jsx("option",{value:"PASS_FAIL",children:"Pass / Fail Only"}),i.jsx("option",{value:"CLASS_DISTINCTION",children:"Distinction / First Class / Failed"}),i.jsx("option",{value:"GRADE_ONLY",children:"Grade Only (A+, B...)"}),i.jsx("option",{value:"PERCENTAGE",children:"Percentage Only"})]})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-2 rounded",children:[i.jsx("input",{type:"checkbox",id:"showPassFail",className:"w-4 h-4",checked:E.showPassFail,onChange:j=>S({...E,showPassFail:j.target.checked})}),i.jsx("label",{htmlFor:"showPassFail",className:"text-sm cursor-pointer select-none",children:"Show Status Badge (e.g. PASSED) on Result Card"})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-2 rounded",children:[i.jsx("input",{type:"checkbox",id:"showRank",className:"w-4 h-4",checked:E.showRank,onChange:j=>S({...E,showRank:j.target.checked})}),i.jsx("label",{htmlFor:"showRank",className:"text-sm cursor-pointer select-none",children:"Calculate and Show Class Rank"})]})]})]}),i.jsx(H,{onClick:async()=>{await D.updateSchoolSettings({schoolName:E.name,phone:E.phone,place:E.place,examName:E.examName,showPassFailStatus:E.showPassFail,academicYear:E.academicYear,resultDisplayType:E.resultDisplayType,sortingMethod:E.sortingMethod,showRank:E.showRank}),alert("Settings Saved!"),e(!1),A()},children:"Save Advanced Settings"})]})]})})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Admin Console"}),i.jsx("p",{className:"text-slate-500 text-sm",children:"Manage your school result portal."})]}),i.jsxs(H,{variant:"secondary",onClick:()=>e(!0),className:"flex items-center gap-2 text-sm",children:[i.jsx(yy,{className:"w-4 h-4"})," Advanced"]})]}),n&&i.jsx("div",{className:"fixed top-20 right-4 z-50 bg-green-600 text-white px-6 py-3 rounded-lg shadow-xl animate-bounce",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Qt,{className:"w-5 h-5"})," ",n]})}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 md:gap-4 mb-4",children:[i.jsxs("button",{onClick:()=>x(1),className:`p-3 rounded-xl border transition-all duration-200 flex flex-col items-center justify-center gap-1 ${f===1?"bg-blue-600 text-white border-blue-600 shadow-lg shadow-blue-200 dark:shadow-none":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[i.jsx("div",{className:"bg-white/20 px-2 py-0.5 rounded text-[10px] uppercase font-bold mb-1",children:"Step 1"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Wm,{className:"w-4 h-4"}),i.jsx("span",{className:"text-xs md:text-sm font-bold",children:"Add Class"})]})]}),i.jsxs("button",{onClick:()=>x(2),className:`p-3 rounded-xl border transition-all duration-200 flex flex-col items-center justify-center gap-1 ${f===2?"bg-purple-600 text-white border-purple-600 shadow-lg shadow-purple-200 dark:shadow-none":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[i.jsx("div",{className:"bg-white/20 px-2 py-0.5 rounded text-[10px] uppercase font-bold mb-1",children:"Step 2"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Is,{className:"w-4 h-4"}),i.jsx("span",{className:"text-xs md:text-sm font-bold",children:"Staff Link"})]})]}),i.jsxs("button",{onClick:()=>x(3),className:`p-3 rounded-xl border transition-all duration-200 flex flex-col items-center justify-center gap-1 ${f===3?"bg-green-600 text-white border-green-600 shadow-lg shadow-green-200 dark:shadow-none":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[i.jsx("div",{className:"bg-white/20 px-2 py-0.5 rounded text-[10px] uppercase font-bold mb-1",children:"Step 3"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(bi,{className:"w-4 h-4"}),i.jsx("span",{className:"text-xs md:text-sm font-bold",children:"Publish"})]})]})]}),i.jsxs("div",{className:"mb-6 animate-fade-in-up",children:[f===1&&i.jsxs(X,{className:"border-t-4 border-t-blue-500 ring-1 ring-blue-100 dark:ring-blue-900",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:"Create New Class"}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[i.jsx("div",{className:"md:col-span-1",children:i.jsx("input",{className:"w-full h-full min-h-[42px] bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg px-3 py-2 text-sm font-bold uppercase placeholder:font-normal outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Class Name (e.g. 10 A)",value:v,onChange:j=>y(j.target.value)})}),i.jsx("div",{className:"md:col-span-1",children:i.jsx("input",{className:"w-full h-full min-h-[42px] bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Set Password",value:w,onChange:j=>g(j.target.value)})}),i.jsx("div",{className:"md:col-span-1",children:i.jsx(H,{type:"submit",disabled:l,onClick:te,className:"w-full h-full min-h-[42px] flex justify-center items-center gap-2 py-2",children:l?i.jsx(Gt,{className:"animate-spin w-4 h-4"}):"Create Class"})})]})]}),f===2&&i.jsxs(X,{className:"border-t-4 border-t-purple-500 ring-1 ring-purple-100 dark:ring-purple-900",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Share Staff Login"}),i.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Teachers use this link to login with their Class Name & Password."}),i.jsx("div",{className:"bg-slate-100 dark:bg-slate-800 p-3 rounded-lg mb-4 text-xs font-mono text-slate-600 dark:text-slate-300 break-all border border-slate-200 dark:border-slate-700",children:Mt()}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs(H,{onClick:()=>Bt(Mt()),variant:"secondary",className:"flex-1",title:"Copy Link",children:[i.jsx(Ei,{className:"w-4 h-4 inline mr-2"})," Copy Link"]}),i.jsxs(H,{onClick:()=>Pr("Staff Login",Mt()),className:"flex-1 bg-purple-600 hover:bg-purple-700",children:[i.jsx(zd,{className:"w-4 h-4 inline mr-2"})," Share Link"]})]})]}),f===3&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs(X,{className:`border-t-4 ${R?"border-t-green-500 ring-1 ring-green-100 dark:ring-green-900":"border-t-slate-400"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1",children:R?"Result is LIVE ":"Publish Results"}),i.jsx("p",{className:"text-sm text-slate-500",children:R?`Results are visible since ${new Date(C).toLocaleDateString()}`:"Control when students can see their marks."})]}),R&&i.jsx("button",{onClick:Ae,className:"text-xs text-red-500 hover:underline font-bold",children:"Unpublish / Hide"})]}),R?i.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-300 p-3 rounded-lg text-sm text-center font-bold border border-green-200 dark:border-green-800",children:"Public Portal is Active"}):i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 block",children:"Option A: Schedule for Later"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"datetime-local",className:"w-full bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded px-2 py-1 text-sm",value:C,onChange:j=>W(j.target.value)}),i.jsx("button",{onClick:be,className:"bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 px-3 rounded text-slate-700 dark:text-slate-200 text-xs font-bold",children:"Save"})]})]}),i.jsx("div",{className:"flex items-center",children:i.jsxs(H,{onClick:pe,className:"w-full h-full bg-green-600 hover:bg-green-700 flex flex-col justify-center items-center py-2",children:[i.jsx(Va,{className:"w-5 h-5 mb-1"}),i.jsx("span",{children:"Publish Now (Instant)"})]})})]})]}),i.jsxs(X,{children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("h4",{className:"font-bold text-slate-700 dark:text-slate-200 flex items-center gap-2",children:[i.jsx(bi,{className:"w-4 h-4"})," Data Entry Status"]}),i.jsxs("button",{onClick:V,className:"text-xs text-blue-500 hover:underline flex items-center gap-1",children:[i.jsx(Gt,{className:`w-3 h-3 ${bt?"animate-spin":""}`})," Refresh"]})]}),i.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-slate-500 text-xs uppercase",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Class"}),i.jsx("th",{className:"p-3 text-center",children:"Marks Entered"}),i.jsx("th",{className:"p-3 text-right",children:"Verification"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:de.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"p-4 text-center text-slate-400",children:"Loading progress..."})}):de.map(j=>{const ge=j.totalStudents>0?Math.round(j.gradedCount/j.totalStudents*100):0,it=ge===100&&j.totalStudents>0,Ye=j.status==="SUBMITTED";return i.jsxs("tr",{className:"bg-white dark:bg-slate-900",children:[i.jsx("td",{className:"p-3 font-medium text-slate-800 dark:text-white",children:j.name}),i.jsx("td",{className:"p-3",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"flex-1 h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${it?"bg-blue-500":"bg-slate-300 dark:bg-slate-500"}`,style:{width:`${ge}%`}})}),i.jsxs("span",{className:"text-xs text-slate-500 w-12 text-right",children:[j.gradedCount,"/",j.totalStudents]})]})}),i.jsx("td",{className:"p-3 text-right",children:Ye?i.jsxs("span",{className:"text-xs font-bold text-green-600 bg-green-50 dark:bg-green-900/30 px-2 py-1 rounded inline-flex items-center gap-1",children:[i.jsx(mn,{className:"w-3 h-3"})," Verified"]}):i.jsxs("span",{className:"text-xs font-bold text-orange-500 bg-orange-50 dark:bg-orange-900/30 px-2 py-1 rounded inline-flex items-center gap-1",children:[i.jsx(Hn,{className:"w-3 h-3"})," Not Verified"]})})]},j.id)})})]})})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-slate-100 to-white dark:from-slate-800 dark:to-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl p-3 mb-6 shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/40 p-2 rounded-lg text-blue-600 dark:text-blue-400",children:i.jsx(uy,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-bold text-slate-800 dark:text-white",children:"Public Student Portal"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text--[10px] md:text-xs",children:"Link for students to check results"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>Bt(at()),className:"p-2 text-slate-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-slate-800 rounded-lg transition-colors",title:"Copy Public Link",children:i.jsx(Ei,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>Pr("Check Results",at()),className:"p-2 text-slate-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-slate-800 rounded-lg transition-colors",title:"Share Public Link",children:i.jsx(zd,{className:"w-5 h-5"})})]})]}),f===1&&i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4 px-1",children:"Class Manager"}),i.jsx(X,{className:"p-0 overflow-hidden min-h-[300px]",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-800 text-slate-500 dark:text-slate-400 text-xs uppercase font-bold",children:[i.jsx("th",{className:"p-4",children:"Class Name"}),i.jsx("th",{className:"p-4",children:"Teacher Name"}),i.jsx("th",{className:"p-4 text-center",children:"Students"}),i.jsx("th",{className:"p-4 text-right",children:"Action"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:h?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-6 text-center text-slate-500",children:"Loading..."})}):c.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-8 text-center text-slate-400",children:"No classes created yet. Use Step 1 to add a class."})}):c.map(j=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 bg-white dark:bg-slate-900 transition-colors",children:[i.jsx("td",{className:"p-4 font-bold text-lg text-slate-800 dark:text-white",children:j.name}),i.jsx("td",{className:"p-4 text-slate-600 dark:text-slate-300",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Er,{className:"w-3 h-3 text-slate-400"}),i.jsx("span",{className:"text-sm font-medium",children:j.teacherName||"Class Teacher"})]})}),i.jsx("td",{className:"p-4 text-center",children:i.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-bold bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300",children:[i.jsx(ki,{className:"w-3 h-3"}),j.studentCount||0]})}),i.jsx("td",{className:"p-4 text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsxs("button",{onClick:()=>m({id:j.id,name:j.name}),className:"bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300 px-3 py-2 rounded-lg inline-flex items-center gap-2 transition-colors font-medium text-xs",title:"Reset Class Password",children:[i.jsx(Is,{className:"w-4 h-4"})," Reset Password"]}),i.jsxs("button",{onClick:()=>ae(j.id,j.name,j.studentCount||0),className:"bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/40 text-red-600 dark:text-red-400 px-3 py-2 rounded-lg inline-flex items-center gap-2 transition-colors font-medium text-xs",title:"Delete Class",children:[i.jsx(Wo,{className:"w-4 h-4"})," Delete"]})]})})]},j.id))})]})})})]})]}):i.jsx("div",{className:"p-10 text-center",children:i.jsx(Gt,{className:"animate-spin w-8 h-8 mx-auto text-blue-500"})})},Jb=({user:t})=>{const[e,r]=b.useState("result"),[s,n]=b.useState(null),[a,l]=b.useState([]),[o,c]=b.useState(null),[u,h]=b.useState(""),[d,f]=b.useState(!1),[x,v]=b.useState(null),[y,w]=b.useState(!1),[g,p]=b.useState(t);b.useEffect(()=>{p(t),m()},[t]);const m=async()=>{const R=await D.getMarks(t.id,"Term 1");n(R);const Q=await D.getStudentRequests(t.id);l(Q)},_=async()=>{if(!o)return;const R=await D.createProfileRequest(t.id,o.field,o.value);R.success?(alert("Request sent to class teacher for approval."),c(null),m()):alert("Failed: "+R.message)},N=async()=>{if(!u||u.length<4){alert("Password too short");return}const R=await D.changePassword(t.id,u);R.success?(alert("Password updated successfully!"),h("")):alert("Failed: "+R.message)},E=async()=>{w(!0),setTimeout(async()=>{const R="UPI"+Date.now(),Q=await D.activateStudentPremium(t.id,R);w(!1),f(!1),Q.success?(p({...g,isPremium:!0}),alert(" Payment Successful! You are now a Verified Student.")):alert("Payment Failed")},2500)},S=async R=>{if(!R.target.files||R.target.files.length===0)return;if(!g.isPremium){f(!0);return}const Q=R.target.files[0],de=await D.uploadImage(Q,"students");de.success&&de.publicUrl&&(await D.createProfileRequest(t.id,"photoUrl",de.publicUrl)).success&&alert("Photo uploaded! Waiting for Teacher approval.")},C=(R,Q)=>{c({field:R,value:Q})},W=R=>R==="fatherName"?"Father's Name":R==="motherName"?"Mother's Name":R==="dob"?"Date of Birth":R.charAt(0).toUpperCase()+R.slice(1);return i.jsxs("div",{className:"pb-20 space-y-6",children:[d&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center bg-black/60 p-4 backdrop-blur-sm animate-fade-in-up",children:i.jsx("div",{className:"bg-white dark:bg-slate-900 w-full max-w-sm rounded-t-2xl md:rounded-2xl shadow-2xl overflow-hidden",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Nn,{className:"w-6 h-6 text-yellow-500 fill-yellow-500"}),"Premium Access"]}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Unlock Verified Badge & Features"})]}),i.jsx("button",{onClick:()=>f(!1),className:"p-1 hover:bg-slate-100 rounded-full",children:i.jsx(qd,{className:"w-6 h-6 text-slate-400"})})]}),i.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl p-5 text-white mb-6 shadow-lg relative overflow-hidden",children:[i.jsxs("div",{className:"relative z-10",children:[i.jsx("p",{className:"text-blue-100 text-xs font-bold uppercase tracking-wider mb-1",children:"Total Amount"}),i.jsxs("h2",{className:"text-4xl font-black",children:["20",i.jsx("span",{className:"text-lg font-medium text-blue-200",children:".00"})]})]}),i.jsx(Nn,{className:"absolute -bottom-4 -right-4 w-32 h-32 text-white/10 rotate-12"})]}),i.jsxs("div",{className:"space-y-3 mb-6",children:[i.jsxs("button",{disabled:y,onClick:()=>{v("UPI"),E()},className:"w-full flex items-center justify-between p-4 border border-slate-200 dark:border-slate-700 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors group",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:i.jsx(Gm,{className:"w-6 h-6 text-green-600"})}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:"UPI Apps"}),i.jsx("p",{className:"text-xs text-slate-500",children:"GPay, PhonePe, Paytm"})]})]}),y&&x==="UPI"?i.jsx(Gt,{className:"animate-spin w-5 h-5 text-blue-600"}):i.jsx(Bd,{className:"w-5 h-5 text-slate-300 group-hover:text-blue-500"})]}),i.jsxs("button",{disabled:y,onClick:()=>{v("CARD"),E()},className:"w-full flex items-center justify-between p-4 border border-slate-200 dark:border-slate-700 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors group",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:i.jsx(iu,{className:"w-6 h-6 text-purple-600"})}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:"Cards"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Credit / Debit"})]})]}),y&&x==="CARD"?i.jsx(Gt,{className:"animate-spin w-5 h-5 text-blue-600"}):i.jsx(Bd,{className:"w-5 h-5 text-slate-300 group-hover:text-blue-500"})]})]}),i.jsxs("p",{className:"text-[10px] text-center text-slate-400",children:["Secured by ",i.jsx("span",{className:"font-bold text-slate-500",children:"Cashfree Payments"})]})]})})}),i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[i.jsxs("div",{className:"relative shrink-0",children:[g.photoUrl?i.jsx("img",{src:g.photoUrl,className:`w-16 h-16 rounded-full object-cover border-4 ${g.isPremium?"border-blue-500":"border-slate-100"}`,alt:"profile"}):i.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center border-4 ${g.isPremium?"border-blue-500 bg-blue-50":"border-slate-100 bg-slate-100"}`,children:i.jsx(Er,{className:"w-8 h-8 text-slate-400"})}),g.isPremium&&i.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-600 text-white rounded-full p-1 border-4 border-white dark:border-slate-800",title:"Verified Student",children:i.jsx(Qt,{className:"w-4 h-4"})})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-black text-slate-800 dark:text-white flex items-center gap-2",children:g.name}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:["Reg No: ",g.regNo]}),g.isPremium?i.jsxs("p",{className:"text-xs text-blue-600 font-bold flex items-center gap-1 mt-1",children:[i.jsx(ou,{className:"w-3 h-3"})," Verified Student"]}):i.jsx("button",{onClick:()=>f(!0),className:"text-xs text-yellow-600 hover:text-yellow-700 font-bold flex items-center gap-1 mt-1 underline",children:"Get Verified Badge"})]})]}),i.jsxs("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-700 rounded-lg w-full md:w-auto",children:[i.jsx("button",{onClick:()=>r("result"),className:`flex-1 md:flex-none px-4 py-2 rounded-md text-sm font-bold transition-all ${e==="result"?"bg-white dark:bg-slate-600 text-blue-600 shadow-sm":"text-slate-500 dark:text-slate-300"}`,children:"Result"}),i.jsx("button",{onClick:()=>r("profile"),className:`flex-1 md:flex-none px-4 py-2 rounded-md text-sm font-bold transition-all ${e==="profile"?"bg-white dark:bg-slate-600 text-blue-600 shadow-sm":"text-slate-500 dark:text-slate-300"}`,children:"Profile"}),i.jsx("button",{onClick:()=>r("security"),className:`flex-1 md:flex-none px-4 py-2 rounded-md text-sm font-bold transition-all ${e==="security"?"bg-white dark:bg-slate-600 text-blue-600 shadow-sm":"text-slate-500 dark:text-slate-300"}`,children:"Security"})]})]}),e==="result"&&i.jsx("div",{className:"animate-fade-in-up",children:s?i.jsxs(X,{className:"max-w-3xl mx-auto border-slate-200 dark:border-slate-700 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-blue-500/5 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-0 left-0 -mb-10 -ml-10 w-40 h-40 bg-purple-500/5 rounded-full blur-3xl"}),i.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-slate-100 dark:border-slate-700 relative z-10",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-wider mb-1",children:"Academic Result"}),i.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-white",children:"Term 1 Report"})]}),i.jsxs("div",{className:`flex flex-col items-end px-4 py-2 rounded-lg border ${s.grade==="F"?"bg-red-50 border-red-100 text-red-700":"bg-green-50 border-green-100 text-green-700"}`,children:[i.jsx("span",{className:"text-[10px] uppercase font-bold opacity-70",children:"Grade"}),i.jsx("span",{className:"text-2xl font-black leading-none",children:s.grade})]})]}),i.jsx("div",{className:"grid grid-cols-2 gap-4 mb-6 relative z-10",children:Object.entries(s.subjects).map(([R,Q])=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-100 dark:border-slate-700/50 shadow-sm flex justify-between items-center",children:[i.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300 text-sm",children:R}),i.jsx("span",{className:"font-black text-lg text-slate-900 dark:text-white",children:Q})]},R))}),i.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-100 dark:border-slate-700 relative z-10",children:[i.jsxs("div",{className:"text-xs text-slate-400",children:["Generated on ",new Date().toLocaleDateString()]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Grand Total"}),i.jsx("p",{className:"text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:s.total})]})]})]}):i.jsxs("div",{className:"text-center py-20 bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[i.jsx("div",{className:"w-20 h-20 bg-slate-50 dark:bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:i.jsx(Hn,{className:"w-10 h-10 text-slate-300 dark:text-slate-500"})}),i.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-200",children:"Results Pending"}),i.jsx("p",{className:"text-slate-400 text-sm",children:"Your Term 1 marks have not been published yet."})]})}),e==="profile"&&i.jsxs("div",{className:"grid md:grid-cols-2 gap-6 animate-fade-in-up",children:[i.jsxs(X,{children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[i.jsx(Er,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})," Personal Details"]}),g.isPremium&&i.jsx("span",{className:"bg-blue-100 text-blue-700 text-[10px] font-bold px-2 py-1 rounded-full border border-blue-200",children:"PRO UNLOCKED"})]}),i.jsx("div",{className:"mb-8 flex justify-center",children:i.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>!g.isPremium&&f(!0),children:[g.photoUrl?i.jsx("img",{src:g.photoUrl,className:`w-32 h-32 rounded-full object-cover border-4 shadow-xl ${g.isPremium?"border-blue-500 ring-4 ring-blue-50":"border-white"}`,alt:"profile"}):i.jsx("div",{className:`w-32 h-32 rounded-full flex items-center justify-center border-4 shadow-xl ${g.isPremium?"bg-blue-50 border-blue-500":"bg-slate-100 border-white"}`,children:i.jsx(Er,{className:"w-12 h-12 text-slate-300"})}),g.isPremium?i.jsx(i.Fragment,{children:i.jsxs("label",{className:"absolute bottom-0 right-0 bg-blue-600 text-white rounded-full p-2 shadow-lg cursor-pointer hover:bg-blue-700 transition-colors border-4 border-white dark:border-slate-800",children:[i.jsx(Wa,{className:"w-4 h-4"}),i.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:S})]})}):i.jsxs("div",{className:"absolute inset-0 bg-black/60 rounded-full flex flex-col items-center justify-center text-white backdrop-blur-[2px] transition-all group-hover:bg-black/70",children:[i.jsx(Ws,{className:"w-8 h-8 mb-1"}),i.jsx("span",{className:"text-xs font-bold",children:"Unlock 20"})]})]})}),!g.isPremium&&i.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 p-4 rounded-xl mb-6 border border-amber-200 dark:border-amber-800/50",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"bg-gradient-to-br from-amber-400 to-orange-500 text-white p-2 rounded-lg shadow-sm",children:i.jsx(Nn,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-amber-900 dark:text-amber-100 text-sm",children:"Stand Out from the Crowd!"}),i.jsxs("p",{className:"text-xs text-amber-800 dark:text-amber-200/70 mt-1 mb-3 leading-relaxed",children:["Upgrade to Student Pro to get a ",i.jsx("b",{children:"Verified Blue Tick"})," and upload your own ",i.jsx("b",{children:"Profile Photo"}),"."]}),i.jsxs("button",{onClick:()=>f(!0),className:"bg-slate-900 text-white text-xs font-bold px-4 py-2 rounded-lg shadow-lg hover:shadow-xl hover:bg-black transition-all flex items-center gap-2",children:["Unlock Now ",i.jsx("span",{className:"text-amber-400",children:"20"})]})]})]})}),i.jsx("div",{className:"space-y-3",children:[{key:"name",label:"Student Name",val:g.name},{key:"dob",label:"Date of Birth",val:g.dob},{key:"fatherName",label:"Father's Name",val:g.fatherName},{key:"motherName",label:"Mother's Name",val:g.motherName}].map(R=>i.jsxs("div",{className:"flex justify-between items-center p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 rounded-lg transition-colors group border border-transparent hover:border-slate-100 dark:hover:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-0.5",children:R.label}),i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200 text-sm",children:R.val||"-"})]}),i.jsx("button",{onClick:()=>C(R.key,R.val),className:"opacity-0 group-hover:opacity-100 p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-full transition-all",title:"Request Change",children:i.jsx(zo,{className:"w-4 h-4"})})]},R.key))})]}),i.jsxs("div",{className:"space-y-6",children:[o&&i.jsxs(X,{className:"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/20 shadow-lg relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:i.jsx(zo,{className:"w-24 h-24 text-blue-600"})}),i.jsx("h4",{className:"font-bold text-blue-900 dark:text-blue-300 mb-2 relative z-10",children:"Request Change"}),i.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-400 mb-4 relative z-10",children:["You are requesting to change ",i.jsx("b",{children:W(o.field)}),". This will be reviewed by your class teacher."]}),i.jsxs("div",{className:"space-y-3 relative z-10",children:[i.jsx(K,{value:o.value,onChange:R=>c({...o,value:R.target.value}),autoFocus:!0,className:"bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(H,{onClick:_,className:"w-full shadow-lg shadow-blue-200 dark:shadow-none",children:"Send Request"}),i.jsx(H,{variant:"secondary",onClick:()=>c(null),children:"Cancel"})]})]})]}),i.jsxs(X,{children:[i.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white mb-4",children:"Request History"}),i.jsx("div",{className:"space-y-3",children:a.length===0?i.jsx("p",{className:"text-sm text-slate-400 italic",children:"No active requests."}):a.map(R=>i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded-lg shadow-sm flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-medium",children:["Change ",W(R.field)]}),i.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:["To: ",R.newValue]})]}),i.jsxs("div",{children:[R.status==="PENDING"&&i.jsxs("span",{className:"text-[10px] bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 px-2 py-1 rounded font-bold flex items-center gap-1 uppercase tracking-wider",children:[i.jsx(Hn,{className:"w-3 h-3"})," Pending"]}),R.status==="APPROVED"&&i.jsxs("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 px-2 py-1 rounded font-bold flex items-center gap-1 uppercase tracking-wider",children:[i.jsx(Qt,{className:"w-3 h-3"})," Approved"]}),R.status==="REJECTED"&&i.jsxs("span",{className:"text-[10px] bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 px-2 py-1 rounded font-bold flex items-center gap-1 uppercase tracking-wider",children:[i.jsx(qd,{className:"w-3 h-3"})," Rejected"]})]})]},R.id))})]})]})]}),e==="security"&&i.jsx("div",{className:"animate-fade-in-up",children:i.jsxs(X,{className:"max-w-md mx-auto border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-800 rounded-full text-slate-600 dark:text-slate-400",children:i.jsx(Ws,{className:"w-6 h-6"})}),i.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-white",children:"Account Security"})]}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6 leading-relaxed bg-slate-50 dark:bg-slate-800/50 p-3 rounded-lg border border-slate-100 dark:border-slate-700",children:"We recommend setting a strong password. If you forget it, your Class Teacher can reset it for you."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 block mb-1",children:"New Password"}),i.jsx(K,{type:"password",placeholder:"Min 4 characters",value:u,onChange:R=>h(R.target.value)})]}),i.jsx(H,{onClick:N,className:"w-full",children:"Update Password"})]})]})})]})},Qb=()=>{const[t,e]=b.useState(null),[r,s]=b.useState([]),[n,a]=b.useState([]),[l,o]=b.useState([]),[c,u]=b.useState(!0),[h,d]=b.useState("overview");b.useEffect(()=>{f()},[]);const f=async()=>{u(!0);const m=await D.getSystemStats();e(m);const _=await D.getInactiveSchools();s(_);const N=await D.getSystemFeedback();a(N);const E=await D.getPricingPlans();o(E),u(!1)},x=async(m,_)=>{if(!window.confirm(_?"Unpause this school?":"Pause this school? They won't be able to login."))return;(await D.pauseSchool(m,_)).success?f():alert("Failed")},v=async m=>{window.confirm("Send Inactivity Warning Email?")&&(await D.sendWarningToSchool(m),alert("Warning email queued."))},y=async m=>{await D.resolveFeedback(m),f()},w=async m=>{(await D.updatePricingPlan(m)).success?alert(`${m.name} updated!`):alert("Failed to update")},g=(m,_,N)=>{const E=[...l];E[m]={...E[m],[_]:N},o(E)},p=()=>{if(!t)return"Calculating...";const m=5e4,_=t.authUsersUsed,C=((m-_)/5/365).toFixed(1);return _>45e3?"CRITICAL! Upgrade Supabase Plan Immediately.":`Safe! At current growth, limit reached in ~${C} Years.`};return c?i.jsx("div",{className:"p-20 text-center text-slate-500",children:"Loading Owner Analytics..."}):i.jsxs("div",{className:"pb-20 animate-fade-in-up",children:[i.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-1",children:"Owner Dashboard"}),i.jsx("p",{className:"text-slate-500 text-sm",children:"Real-time SaaS Metrics & Control."})]}),i.jsxs(H,{onClick:f,variant:"secondary",className:"flex items-center gap-2",children:[i.jsx(Vm,{className:"w-4 h-4"})," Refresh"]})]}),i.jsxs("div",{className:"flex gap-4 mb-6 border-b border-slate-200 dark:border-slate-700 overflow-x-auto",children:[i.jsx("button",{onClick:()=>d("overview"),className:`pb-3 px-4 font-bold border-b-2 transition-colors whitespace-nowrap ${h==="overview"?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-800"}`,children:"Overview & Revenue"}),i.jsxs("button",{onClick:()=>d("inactive"),className:`pb-3 px-4 font-bold border-b-2 transition-colors whitespace-nowrap ${h==="inactive"?"border-orange-500 text-orange-600":"border-transparent text-slate-500 hover:text-slate-800"}`,children:["Inactive (",r.length,")"]}),i.jsxs("button",{onClick:()=>d("feedback"),className:`pb-3 px-4 font-bold border-b-2 transition-colors whitespace-nowrap ${h==="feedback"?"border-purple-500 text-purple-600":"border-transparent text-slate-500 hover:text-slate-800"}`,children:["Feedback (",n.filter(m=>m.status==="OPEN").length,")"]}),i.jsx("button",{onClick:()=>d("marketing"),className:`pb-3 px-4 font-bold border-b-2 transition-colors whitespace-nowrap ${h==="marketing"?"border-pink-500 text-pink-600":"border-transparent text-slate-500 hover:text-slate-800"}`,children:"Marketing Manager"})]}),h==="overview"&&t&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs(X,{className:"bg-slate-900 text-white border-none shadow-xl relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 right-0 p-10 opacity-10",children:i.jsx(vy,{className:"w-48 h-48"})}),i.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2 relative z-10",children:[i.jsx(qm,{className:"w-5 h-5 text-blue-400"})," Supabase Limit Analyzer"]}),i.jsxs("div",{className:"mb-2 flex justify-between text-sm font-medium relative z-10",children:[i.jsxs("span",{children:["Auth Users Used: ",i.jsx("b",{className:"text-blue-400",children:t.authUsersUsed.toLocaleString()})]}),i.jsx("span",{className:"text-slate-400",children:"Limit: 50,000"})]}),i.jsx("div",{className:"w-full bg-slate-700 rounded-full h-4 mb-4 overflow-hidden relative z-10",children:i.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-400 h-full transition-all duration-1000",style:{width:`${t.authUsersUsed/5e4*100}%`}})}),i.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-lg border border-slate-700 inline-flex items-center gap-3 relative z-10",children:[i.jsx(Km,{className:"w-5 h-5 text-green-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-slate-400 uppercase font-bold",children:"AI Trend Prediction"}),i.jsx("p",{className:"text-sm font-bold text-green-300",children:p()})]})]})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[i.jsxs(X,{className:"bg-gradient-to-br from-green-50 to-emerald-100 dark:from-green-900/20 dark:to-emerald-900/20 border-green-200",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-green-800 dark:text-green-300 font-bold uppercase mb-1",children:"Total Revenue"}),i.jsxs("h3",{className:"text-4xl font-black text-green-900 dark:text-white",children:["",t.totalRevenue.toLocaleString()]})]}),i.jsx("div",{className:"p-3 bg-green-200 dark:bg-green-800 rounded-full text-green-800 dark:text-green-100",children:i.jsx(iu,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"mt-4 text-xs font-medium text-green-800/70",children:["Schools: ",(t.proSchools*199).toLocaleString()," + Students: ",(t.premiumStudents*20).toLocaleString()]})]}),i.jsxs(X,{children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500 font-bold uppercase mb-1",children:"Total Students"}),i.jsx("h3",{className:"text-4xl font-black text-slate-800 dark:text-white",children:t.totalStudents.toLocaleString()})]}),i.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900 rounded-full text-blue-600 dark:text-blue-300",children:i.jsx(ki,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"mt-4 text-xs font-medium text-slate-500",children:[t.premiumStudents.toLocaleString()," Premium Students (20/each)"]})]}),i.jsxs(X,{children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500 font-bold uppercase mb-1",children:"Active Schools"}),i.jsx("h3",{className:"text-4xl font-black text-slate-800 dark:text-white",children:t.totalSchools})]}),i.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900 rounded-full text-purple-600 dark:text-purple-300",children:i.jsx(bi,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"mt-4 text-xs font-medium text-slate-500",children:[t.proSchools," Pro Licenses (199/year)"]})]})]})]}),h==="inactive"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-4 rounded-xl border border-orange-200 dark:border-orange-800 flex gap-3",children:[i.jsx(_i,{className:"w-5 h-5 text-orange-600"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-orange-800 dark:text-orange-200",children:"Inactive School Manager"}),i.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300",children:"Showing schools with no activity for 7+ days. Pause them to save DB resources."})]})]}),r.length===0?i.jsx("div",{className:"text-center py-10 text-slate-400",children:"All schools are active! Great job."}):i.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:r.map(m=>i.jsxs(X,{className:`${m.isPaused?"opacity-70 bg-slate-100":""}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("h4",{className:"font-bold text-lg",children:m.name}),m.isPaused&&i.jsx("span",{className:"bg-red-100 text-red-600 text-[10px] font-bold px-2 py-1 rounded",children:"PAUSED"})]}),i.jsx("p",{className:"text-sm text-slate-500 mb-4",children:m.email}),i.jsxs("div",{className:"flex items-center gap-2 mb-4 text-xs font-mono bg-slate-50 p-2 rounded",children:[i.jsx(bi,{className:"w-3 h-3 text-slate-400"}),"Last Active: ",new Date(m.lastActive).toLocaleDateString()," (",m.daysInactive," days ago)"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(H,{onClick:()=>v(m.id),variant:"secondary",className:"flex-1 text-xs",children:[i.jsx(hy,{className:"w-3 h-3 mr-1"})," Send Warning"]}),i.jsx(H,{onClick:()=>x(m.id,m.isPaused),className:`flex-1 text-xs ${m.isPaused?"bg-green-600":"bg-red-500 hover:bg-red-600"}`,children:m.isPaused?i.jsxs(i.Fragment,{children:[i.jsx(gy,{className:"w-3 h-3 mr-1"})," Unpause"]}):i.jsxs(i.Fragment,{children:[i.jsx(py,{className:"w-3 h-3 mr-1"})," Pause Access"]})})]})]},m.id))})]}),h==="feedback"&&i.jsx("div",{className:"space-y-4",children:n.length===0?i.jsx("div",{className:"text-center py-10 text-slate-400",children:"No pending feedback."}):n.map(m=>i.jsxs(X,{className:m.status==="RESOLVED"?"opacity-60":"border-l-4 border-l-blue-500",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded uppercase ${m.type==="BUG"?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"}`,children:m.type}),i.jsx("span",{className:"text-xs text-slate-400",children:new Date(m.createdAt).toLocaleDateString()})]}),i.jsx("p",{className:"text-slate-800 dark:text-white font-medium mb-2",children:m.message}),i.jsxs("p",{className:"text-xs text-slate-500 mb-4",children:["From: ",m.schoolName]}),m.status==="OPEN"?i.jsx(H,{onClick:()=>y(m.id),className:"w-full text-xs",children:"Mark as Resolved"}):i.jsxs("div",{className:"text-center text-xs font-bold text-green-600 flex items-center justify-center gap-1",children:[i.jsx(Qt,{className:"w-3 h-3"})," Resolved"]})]},m.id))}),h==="marketing"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-pink-50 dark:bg-pink-900/20 p-4 rounded-xl border border-pink-200 dark:border-pink-800 flex gap-3",children:[i.jsx(fy,{className:"w-5 h-5 text-pink-600"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-pink-800 dark:text-pink-200",children:"Marketing & Pricing Manager"}),i.jsx("p",{className:"text-sm text-pink-700 dark:text-pink-300",children:"Control Landing Page prices, offers, and scarcity timers instantly."})]})]}),i.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:l.map((m,_)=>i.jsxs(X,{className:"relative",children:[i.jsx("h3",{className:"font-bold text-lg mb-4 text-center",children:m.name}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Selling Price"}),i.jsx(K,{type:"number",value:m.sellingPrice,onChange:N=>g(_,"sellingPrice",parseFloat(N.target.value))})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Original Price"}),i.jsx(K,{type:"number",value:m.originalPrice,onChange:N=>g(_,"originalPrice",parseFloat(N.target.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Discount %"}),i.jsx(K,{type:"number",value:m.discountPercent,onChange:N=>g(_,"discountPercent",parseFloat(N.target.value))})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"text-xs font-bold text-slate-500 flex items-center gap-1",children:[i.jsx(Hn,{className:"w-3 h-3"})," Scarcity: Seats Left"]}),i.jsx(K,{type:"number",value:m.seatsLeft,onChange:N=>g(_,"seatsLeft",parseInt(N.target.value))})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"text-xs font-bold text-slate-500 flex items-center gap-1",children:[i.jsx(Hn,{className:"w-3 h-3"})," Offer Ends At"]}),i.jsx(K,{type:"datetime-local",value:m.offerEndsAt?new Date(m.offerEndsAt).toISOString().slice(0,16):"",onChange:N=>g(_,"offerEndsAt",N.target.value)})]}),i.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[i.jsx("input",{type:"checkbox",checked:m.isPopular,onChange:N=>g(_,"isPopular",N.target.checked),className:"w-4 h-4 accent-pink-600"}),i.jsx("span",{className:"text-sm",children:"Mark as Popular"})]}),i.jsxs(H,{onClick:()=>w(m),className:"w-full flex justify-center gap-2 mt-4 bg-pink-600 hover:bg-pink-700",children:[i.jsx(qo,{className:"w-4 h-4"})," Update Plan"]})]})]},m.id))})]})]})},Zb=()=>{var f;const t=tr(),[e,r]=b.useState(""),[s,n]=b.useState(""),[a,l]=b.useState(null),[o,c]=b.useState(!1),[u,h]=b.useState(""),d=async x=>{x.preventDefault(),c(!0),h(""),l(null);const v=await D.publicSearch(e,s);if(v){const y=await D.getSchoolConfig();l({...v,schoolConfig:y})}else h("Result not found. Please check Register Number and DOB.");c(!1)};return i.jsxs("div",{className:"flex flex-col items-center pt-8 md:pt-16 pb-20 px-4",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-white mb-2 text-center tracking-tight print:hidden",children:"Result Portal"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8 text-center text-sm print:hidden",children:"Enter your details to view your academic performance"}),a?i.jsx("div",{className:"w-full max-w-lg animate-fade-in-up",children:i.jsxs(X,{className:"relative overflow-hidden border-slate-200 dark:border-slate-700 shadow-xl print:shadow-none print:border-none",children:[i.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 bg-gradient-to-r from-blue-500 to-purple-600 print:hidden"}),i.jsxs("div",{className:"text-center mb-8 mt-4",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-50 dark:bg-slate-700 rounded-full mx-auto mb-4 flex items-center justify-center border border-slate-200 dark:border-slate-600 shadow-inner",children:i.jsx(iy,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-1",children:a.student.name}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400 font-mono text-sm bg-slate-100 dark:bg-slate-800 inline-block px-3 py-1 rounded-full",children:["Reg No: ",a.student.regNo]}),((f=a.schoolConfig)==null?void 0:f.examName)&&i.jsx("p",{className:"text-sm font-bold text-blue-600 mt-2",children:a.schoolConfig.examName}),i.jsx("div",{className:"mt-4 flex justify-center",children:i.jsxs("span",{className:`inline-flex items-center px-4 py-1 rounded-full text-sm font-bold border shadow-sm ${a.marks.grade==="F"?"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border-red-200 dark:border-red-800":"bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 border-green-200 dark:border-green-800"}`,children:["Overall Grade: ",a.marks.grade]})})]}),i.jsxs("div",{className:"mb-8 border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[i.jsxs("div",{className:"grid grid-cols-2 bg-slate-50 dark:bg-slate-800 p-2 border-b border-slate-200 dark:border-slate-700 text-xs uppercase font-semibold text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"pl-2",children:"Subject"}),i.jsx("div",{className:"text-right pr-2",children:"Marks Secured"})]}),Object.entries(a.marks.subjects).map(([x,v],y)=>i.jsxs("div",{className:`flex justify-between items-center p-3.5 border-b border-slate-100 dark:border-slate-700/50 last:border-0 ${y%2===0?"bg-white dark:bg-slate-900":"bg-slate-50/50 dark:bg-slate-800/50"}`,children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300 font-medium",children:x}),i.jsx("span",{className:"text-slate-900 dark:text-white font-bold font-mono",children:v})]},x)),i.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-100 dark:bg-slate-700 font-bold border-t border-slate-200 dark:border-slate-600",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Grand Total"}),i.jsx("span",{className:"text-slate-900 dark:text-white text-lg",children:a.marks.total})]})]}),i.jsxs("div",{className:"flex gap-4 print:hidden",children:[i.jsxs(H,{variant:"secondary",className:"flex-1 flex justify-center items-center gap-2",onClick:()=>l(null),children:[i.jsx(oy,{className:"w-4 h-4"})," Back"]}),i.jsxs(H,{className:"flex-1 flex justify-center items-center gap-2 shadow-lg shadow-blue-200 dark:shadow-none",onClick:()=>window.print(),children:[i.jsx(cy,{className:"w-4 h-4"})," Print"]})]}),i.jsx("div",{className:"mt-8 pt-6 border-t border-slate-100 dark:border-slate-700 text-center print:block hidden",children:i.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Generated by SchoolResult Pro"})}),i.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 dark:border-slate-700 text-center print:hidden bg-blue-50/50 dark:bg-blue-900/10 rounded-lg p-3",children:[i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Powered by"}),i.jsxs("button",{onClick:()=>t("/"),className:"text-sm font-bold text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 flex items-center justify-center gap-2 mx-auto transition-colors",children:[i.jsx(lu,{className:"w-4 h-4"})," SchoolResult Pro"]}),i.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Create your own school result portal for free"})]})]})}):i.jsx(X,{className:"w-full max-w-md shadow-lg border-slate-200 dark:border-slate-700 animate-fade-in-up",children:i.jsxs("form",{onSubmit:d,className:"space-y-5",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900/30 mb-4",children:i.jsx(Hm,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsx("h2",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200",children:"Student Search"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-slate-700 dark:text-slate-300 font-medium text-sm mb-1 block",children:"Register Number"}),i.jsx(K,{placeholder:"e.g. 1001",value:e,onChange:x=>r(x.target.value),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-slate-700 dark:text-slate-300 font-medium text-sm mb-1 block",children:"Date of Birth"}),i.jsx(K,{type:"date",value:s,onChange:x=>n(x.target.value),required:!0})]}),u&&i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm p-3 rounded-lg text-center border border-red-100 dark:border-red-800 flex items-center justify-center gap-2",children:[i.jsx("span",{className:"font-bold",children:"Error:"})," ",u]}),i.jsx(H,{type:"submit",className:"w-full flex justify-center items-center gap-2",disabled:o,children:o?"Searching...":"Get Result"})]})})]})},e_=()=>{const[t]=ry(),e=tr(),r=t.get("schoolId"),s=t.get("token"),[n,a]=b.useState(""),[l,o]=b.useState(""),[c,u]=b.useState([]),[h,d]=b.useState(!0),[f,x]=b.useState(!1),[v,y]=b.useState(!1),[w,g]=b.useState(!1),[p,m]=b.useState({name:"",regNo:"",classId:"",dob:"",gender:"",fatherName:"",motherName:""});b.useEffect(()=>{if(!r&&!s){d(!1);return}_()},[r,s]);const _=async()=>{let E=r;if(s){const C=await D.getSchoolByAdmissionToken(s);if(C){if(E=C.id,C.allow_public_admission===!1){g(!0),a(C.name),d(!1);return}}else{d(!1);return}}if(!E){d(!1);return}const S=await D.getSchoolDetailsPublic(E);if(S){o(E),a(S.name);const C=await D.getClassesForPublic(E);u(C)}d(!1)},N=async E=>{if(E.preventDefault(),!l)return;x(!0);const S=await D.publicRegisterStudent(l,p.classId,p);x(!1),S.success?y(!0):alert("Registration failed: "+S.message)};return w?i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center p-4",children:[i.jsx(Ws,{className:"w-16 h-16 text-slate-300 dark:text-slate-600 mb-4"}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:n}),i.jsx("h3",{className:"text-lg font-semibold text-red-500 mt-2",children:"Admissions Closed"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2 max-w-sm",children:"Public registration is currently disabled by the school administrator. Please contact the school office."}),i.jsx(H,{onClick:()=>e("/login"),className:"mt-8",children:"Go to Login"})]}):!h&&!l?i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center p-4",children:[i.jsx(_i,{className:"w-12 h-12 text-yellow-500 mb-4"}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Invalid or Expired Link"}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:["This registration link is no longer valid.",i.jsx("br",{}),"Please ask your school admin for a new link."]})]}):h?i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[i.jsx(Gt,{className:"w-8 h-8 animate-spin text-blue-600 mb-2"}),i.jsx("p",{className:"text-slate-500",children:"Loading School Details..."})]}):v?i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center p-4 animate-fade-in-up",children:[i.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6",children:i.jsx(Qt,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Registration Submitted!"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-md mx-auto mb-8",children:"Your details have been sent to the Class Teacher. Once verified, you will be able to login using your Register Number."}),i.jsx(H,{onClick:()=>e("/login"),children:"Go to Login"})]}):i.jsx("div",{className:"flex justify-center p-4 py-10",children:i.jsxs(X,{className:"w-full max-w-2xl border-t-4 border-t-blue-600 dark:border-t-blue-500",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex p-3 bg-blue-50 dark:bg-blue-900/20 rounded-full mb-3 text-blue-600 dark:text-blue-400",children:i.jsx(xy,{className:"w-8 h-8"})}),i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:n}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Student Admission Form"})]}),i.jsxs("form",{onSubmit:N,className:"space-y-6",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Student Name"}),i.jsx(K,{placeholder:"Full Name",value:p.name,onChange:E=>m({...p,name:E.target.value.toUpperCase()}),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Register No / Admission No"}),i.jsx(K,{placeholder:"e.g. 1024",value:p.regNo,onChange:E=>m({...p,regNo:E.target.value}),required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Date of Birth"}),i.jsx(K,{type:"date",value:p.dob,onChange:E=>m({...p,dob:E.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Gender"}),i.jsxs(Gr,{value:p.gender,onChange:E=>m({...p,gender:E.target.value}),required:!0,children:[i.jsx("option",{value:"",children:"Select"}),i.jsx("option",{value:"Male",children:"Male"}),i.jsx("option",{value:"Female",children:"Female"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Select Class"}),i.jsxs(Gr,{value:p.classId,onChange:E=>m({...p,classId:E.target.value}),required:!0,children:[i.jsx("option",{value:"",children:"-- Choose Class --"}),c.map(E=>i.jsx("option",{value:E.id,children:E.name},E.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Father's Name"}),i.jsx(K,{placeholder:"Father/Guardian Name",value:p.fatherName,onChange:E=>m({...p,fatherName:E.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Mother's Name"}),i.jsx(K,{placeholder:"Mother's Name",value:p.motherName,onChange:E=>m({...p,motherName:E.target.value}),required:!0})]})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg flex items-start gap-3",children:[i.jsx("div",{className:"mt-0.5 text-blue-600 dark:text-blue-400",children:i.jsx(Xm,{className:"w-5 h-5"})}),i.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:"By submitting this form, you request admission to the class. Your teacher will verify these details before you can access the result portal."})]}),i.jsx(H,{type:"submit",disabled:f,className:"w-full text-lg py-3",children:f?"Submitting...":"Submit Registration"})]})]})})},t_=()=>{const{slug:t}=Tv(),e=tr(),[r,s]=b.useState(""),[n,a]=b.useState("");b.useEffect(()=>{t&&l(t)},[t]);const l=async o=>{const c=await D.getSchoolBySlug(o);c?(a(c.name),localStorage.setItem("school_id",c.id),setTimeout(()=>{e("/login",{replace:!0})},800)):s(`School with code "${o}" not found.`)};return r?i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50 dark:bg-slate-900 p-4",children:i.jsxs(X,{className:"max-w-md w-full text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx($m,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"Portal Not Found"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:r}),i.jsx(H,{onClick:()=>e("/login"),className:"w-full",children:"Go to Main Login"})]})}):i.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-50 dark:bg-slate-900 p-4",children:i.jsxs("div",{className:"text-center animate-fade-in-up",children:[i.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(zm,{className:"w-10 h-10 text-blue-600 dark:text-blue-400"})}),n?i.jsxs(i.Fragment,{children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:["Welcome to ",n]}),i.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500 dark:text-slate-400",children:[i.jsx(Gt,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Redirecting to login..."})]})]}):i.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400",children:[i.jsx(Gt,{className:"w-6 h-6 animate-spin text-blue-600"}),i.jsx("span",{className:"text-lg",children:"Locating School Portal..."})]})]})})},fh=`
-- ==============================================================================
-- SCHOOL RESULT PRO - COMPLETE DATABASE SCHEMA (V3.1)
-- Includes Owner Analytics, User Limits, Inactive Tracking & Feedback
-- ==============================================================================

-- 1. CLEANUP OLD FUNCTIONS
DROP FUNCTION IF EXISTS teacher_login(text, text, uuid);
DROP FUNCTION IF EXISTS student_login(text, text, uuid);
DROP FUNCTION IF EXISTS get_class_students(uuid);
DROP FUNCTION IF EXISTS get_pending_admissions(uuid);
DROP FUNCTION IF EXISTS get_class_student_names(uuid);
DROP FUNCTION IF EXISTS get_student_marks(uuid, text);
DROP FUNCTION IF EXISTS save_marks(uuid, text, jsonb, numeric, text);
DROP FUNCTION IF EXISTS activate_student_premium(uuid, text);
DROP FUNCTION IF EXISTS get_school_progress();
DROP FUNCTION IF EXISTS reset_password_with_code(text, text, text);
DROP FUNCTION IF EXISTS get_system_stats();
DROP FUNCTION IF EXISTS get_inactive_schools();

-- 2. ENABLE EXTENSIONS
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

-- 3. CREATE TABLES

-- SCHOOLS Table
CREATE TABLE IF NOT EXISTS schools (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    auth_id UUID,
    name TEXT NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ADD NEW COLUMNS
ALTER TABLE schools ADD COLUMN IF NOT EXISTS slug TEXT UNIQUE;
ALTER TABLE schools ADD COLUMN IF NOT EXISTS admin_email TEXT;
ALTER TABLE schools ADD COLUMN IF NOT EXISTS phone TEXT;
ALTER TABLE schools ADD COLUMN IF NOT EXISTS place TEXT;
ALTER TABLE schools ADD COLUMN IF NOT EXISTS is_pro BOOLEAN DEFAULT FALSE;
ALTER TABLE schools ADD COLUMN IF NOT EXISTS license_key TEXT DEFAULT 'FREE';
ALTER TABLE schools ADD COLUMN IF NOT EXISTS expiry_date TIMESTAMP WITH TIME ZONE;
ALTER TABLE schools ADD COLUMN IF NOT EXISTS payment_status TEXT DEFAULT 'FREE';
ALTER TABLE schools ADD COLUMN IF NOT EXISTS transaction_ref TEXT;
ALTER TABLE schools ADD COLUMN IF NOT EXISTS theme_color TEXT DEFAULT 'blue';
ALTER TABLE schools ADD COLUMN IF NOT EXISTS logo_url TEXT;
ALTER TABLE schools ADD COLUMN IF NOT EXISTS allow_teacher_edit BOOLEAN DEFAULT FALSE;
ALTER TABLE schools ADD COLUMN IF NOT EXISTS allow_public_admission BOOLEAN DEFAULT TRUE;
ALTER TABLE schools ADD COLUMN IF NOT EXISTS admission_token TEXT;
ALTER TABLE schools ADD COLUMN IF NOT EXISTS result_publish_date TIMESTAMP WITH TIME ZONE;
ALTER TABLE schools ADD COLUMN IF NOT EXISTS exam_name TEXT;
ALTER TABLE schools ADD COLUMN IF NOT EXISTS academic_year TEXT DEFAULT '2024-25';
ALTER TABLE schools ADD COLUMN IF NOT EXISTS show_pass_fail_status BOOLEAN DEFAULT TRUE;
ALTER TABLE schools ADD COLUMN IF NOT EXISTS show_grades BOOLEAN DEFAULT TRUE;
ALTER TABLE schools ADD COLUMN IF NOT EXISTS show_rank BOOLEAN DEFAULT FALSE;
ALTER TABLE schools ADD COLUMN IF NOT EXISTS result_display_type TEXT DEFAULT 'PASS_FAIL';
ALTER TABLE schools ADD COLUMN IF NOT EXISTS sorting_method TEXT DEFAULT 'GENDER_ROLL';

-- NEW: Tracking Columns for Super Admin
ALTER TABLE schools ADD COLUMN IF NOT EXISTS last_active_at TIMESTAMP WITH TIME ZONE DEFAULT NOW();
ALTER TABLE schools ADD COLUMN IF NOT EXISTS is_paused BOOLEAN DEFAULT FALSE;

-- CLASSES Table
CREATE TABLE IF NOT EXISTS classes (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    school_id UUID REFERENCES schools(id) ON DELETE CASCADE,
    name TEXT NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
ALTER TABLE classes ADD COLUMN IF NOT EXISTS teacher_name TEXT DEFAULT 'Class Teacher';
ALTER TABLE classes ADD COLUMN IF NOT EXISTS teacher_password TEXT;
ALTER TABLE classes ADD COLUMN IF NOT EXISTS teacher_photo TEXT;
ALTER TABLE classes ADD COLUMN IF NOT EXISTS subjects JSONB DEFAULT '[]'::jsonb;
ALTER TABLE classes ADD COLUMN IF NOT EXISTS status TEXT DEFAULT 'DRAFT';

-- STUDENTS Table
CREATE TABLE IF NOT EXISTS students (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    school_id UUID REFERENCES schools(id) ON DELETE CASCADE,
    class_id UUID REFERENCES classes(id) ON DELETE CASCADE,
    reg_no TEXT NOT NULL,
    name TEXT NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
ALTER TABLE students ADD COLUMN IF NOT EXISTS roll_no INTEGER;
ALTER TABLE students ADD COLUMN IF NOT EXISTS dob DATE;
ALTER TABLE students ADD COLUMN IF NOT EXISTS gender TEXT;
ALTER TABLE students ADD COLUMN IF NOT EXISTS father_name TEXT;
ALTER TABLE students ADD COLUMN IF NOT EXISTS mother_name TEXT;
ALTER TABLE students ADD COLUMN IF NOT EXISTS photo_url TEXT;
ALTER TABLE students ADD COLUMN IF NOT EXISTS password TEXT;
ALTER TABLE students ADD COLUMN IF NOT EXISTS is_verified BOOLEAN DEFAULT TRUE;
ALTER TABLE students ADD COLUMN IF NOT EXISTS is_premium BOOLEAN DEFAULT FALSE;
ALTER TABLE students ADD COLUMN IF NOT EXISTS premium_expiry TIMESTAMP WITH TIME ZONE;

-- MARKS Table
CREATE TABLE IF NOT EXISTS marks (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    student_id UUID REFERENCES students(id) ON DELETE CASCADE,
    term TEXT NOT NULL,
    subjects JSONB NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
ALTER TABLE marks ADD COLUMN IF NOT EXISTS total NUMERIC DEFAULT 0;
ALTER TABLE marks ADD COLUMN IF NOT EXISTS grade TEXT;

-- PROFILE REQUESTS Table
CREATE TABLE IF NOT EXISTS profile_requests (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    school_id UUID REFERENCES schools(id) ON DELETE CASCADE,
    student_id UUID REFERENCES students(id) ON DELETE CASCADE,
    field TEXT NOT NULL,
    new_value TEXT NOT NULL,
    status TEXT DEFAULT 'PENDING',
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- NEW: FEEDBACK TABLE
CREATE TABLE IF NOT EXISTS system_feedback (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    school_id UUID REFERENCES schools(id) ON DELETE SET NULL,
    school_name TEXT,
    message TEXT NOT NULL,
    type TEXT DEFAULT 'SUPPORT', -- BUG, FEATURE, SUPPORT
    status TEXT DEFAULT 'OPEN',
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- NEW: PRICING PLANS TABLE (For Dynamic Landing Page)
CREATE TABLE IF NOT EXISTS pricing_plans (
    id TEXT PRIMARY KEY, -- 'FREE', 'PLUS', 'ELITE'
    name TEXT,
    original_price NUMERIC,
    selling_price NUMERIC,
    discount_percent INT,
    features JSONB,
    is_popular BOOLEAN DEFAULT FALSE,
    seats_left INT DEFAULT 100,
    offer_ends_at TIMESTAMP WITH TIME ZONE
);

-- Insert Default Plans if empty (UPDATED: Set seats to 58 for urgency effect)
INSERT INTO pricing_plans (id, name, original_price, selling_price, discount_percent, is_popular, seats_left, features, offer_ends_at)
VALUES 
('FREE', 'Madrassa Free', 0, 0, 0, FALSE, 58, '["Unlimited Students", "Basic Result", "Public Portal", "Community Support"]'::jsonb, NOW() + INTERVAL '30 days'),
('PLUS', 'Smart School Plus', 4999, 1999, 60, TRUE, 42, '["Everything in Free", "Verified Badges", "Priority Support", "Student Photos", "No Ads"]'::jsonb, NOW() + INTERVAL '2 days'),
('ELITE', 'Campus Elite Pro', 14999, 4999, 66, FALSE, 14, '["Everything in Plus", "Custom Domain", "White Label", "API Access", "Dedicated Manager"]'::jsonb, NOW() + INTERVAL '2 days')
ON CONFLICT (id) DO NOTHING;


-- 4. STORAGE SETUP
insert into storage.buckets (id, name, public)
values ('school-branding', 'school-branding', true)
on conflict (id) do nothing;

DROP POLICY IF EXISTS "Public Access" ON storage.objects;
create policy "Public Access"
  on storage.objects for select
  using ( bucket_id = 'school-branding' );

DROP POLICY IF EXISTS "Authenticated Upload" ON storage.objects;
create policy "Authenticated Upload"
  on storage.objects for insert
  with check ( bucket_id = 'school-branding' );


-- 5. FUNCTIONS

-- Teacher Login (Updates Last Active)
CREATE OR REPLACE FUNCTION teacher_login(cls_name TEXT, pass TEXT, schl_id UUID)
RETURNS JSON AS $$
DECLARE
  cls_record RECORD;
BEGIN
  -- Update Activity
  UPDATE schools SET last_active_at = NOW() WHERE id = schl_id;

  SELECT * INTO cls_record FROM classes 
  WHERE school_id = schl_id 
  AND name = cls_name 
  AND teacher_password = pass;
  
  IF FOUND THEN
    RETURN row_to_json(cls_record);
  ELSE
    RETURN NULL;
  END IF;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Student Login
CREATE OR REPLACE FUNCTION student_login(reg_no_in TEXT, pass_in TEXT, schl_id UUID)
RETURNS JSON AS $$
DECLARE
  stu_record RECORD;
BEGIN
  SELECT * INTO stu_record FROM students 
  WHERE school_id = schl_id 
  AND reg_no = reg_no_in
  AND (password = pass_in OR (password IS NULL AND pass_in = to_char(dob, 'YYYY-MM-DD')));
  
  IF FOUND THEN
    RETURN row_to_json(stu_record);
  ELSE
    RETURN NULL;
  END IF;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Get Students
CREATE OR REPLACE FUNCTION get_class_students(cls_id UUID)
RETURNS SETOF students AS $$
BEGIN
  RETURN QUERY SELECT * FROM students WHERE class_id = cls_id AND is_verified = TRUE ORDER BY roll_no ASC, name ASC;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Get Pending Admissions
CREATE OR REPLACE FUNCTION get_pending_admissions(cls_id UUID)
RETURNS SETOF students AS $$
BEGIN
  RETURN QUERY SELECT * FROM students WHERE class_id = cls_id AND is_verified = FALSE ORDER BY created_at DESC;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Get Student Names
CREATE OR REPLACE FUNCTION get_class_student_names(cls_id UUID)
RETURNS TABLE(id UUID, name TEXT, reg_no TEXT) AS $$
BEGIN
  RETURN QUERY SELECT s.id, s.name, s.reg_no FROM students s WHERE s.class_id = cls_id AND s.is_verified = TRUE ORDER BY s.name ASC;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Save Marks (Updates Activity)
CREATE OR REPLACE FUNCTION save_marks(stu_id UUID, term_in TEXT, sub_json JSONB, tot NUMERIC, grd TEXT)
RETURNS VOID AS $$
DECLARE
  sid UUID;
BEGIN
  SELECT school_id INTO sid FROM students WHERE id = stu_id;
  UPDATE schools SET last_active_at = NOW() WHERE id = sid;

  INSERT INTO marks (student_id, term, subjects, total, grade)
  VALUES (stu_id, term_in, sub_json, tot, grd)
  ON CONFLICT (student_id, term)
  DO UPDATE SET 
    subjects = EXCLUDED.subjects,
    total = EXCLUDED.total,
    grade = EXCLUDED.grade;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Get Marks
CREATE OR REPLACE FUNCTION get_student_marks(stu_id UUID, term_in TEXT)
RETURNS SETOF marks AS $$
BEGIN
  RETURN QUERY SELECT * FROM marks WHERE student_id = stu_id AND term = term_in;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Password Reset
CREATE OR REPLACE FUNCTION reset_password_with_code(email_input TEXT, code_input TEXT, new_password_input TEXT)
RETURNS BOOLEAN AS $$
DECLARE
  user_id UUID;
BEGIN
  SELECT schools.auth_id INTO user_id 
  FROM schools
  JOIN auth.users ON schools.auth_id = auth.users.id
  WHERE schools.admin_email = email_input 
  AND (auth.users.raw_user_meta_data->>'recovery_code')::text = code_input;

  IF user_id IS NOT NULL THEN
    UPDATE auth.users SET encrypted_password = crypt(new_password_input, gen_salt('bf')) WHERE id = user_id;
    RETURN TRUE;
  ELSE
    RETURN FALSE;
  END IF;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Premium Activation
CREATE OR REPLACE FUNCTION activate_student_premium(stu_id UUID, txn_id TEXT)
RETURNS VOID AS $$
BEGIN
    UPDATE students 
    SET is_premium = TRUE, premium_expiry = NOW() + INTERVAL '1 year' 
    WHERE id = stu_id;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- School Progress
CREATE OR REPLACE FUNCTION get_school_progress()
RETURNS TABLE(id UUID, name TEXT, status TEXT, total_students BIGINT, graded_count BIGINT) AS $$
BEGIN
    RETURN QUERY
    SELECT 
        c.id,
        c.name,
        c.status,
        (SELECT COUNT(*) FROM students s WHERE s.class_id = c.id) as total_students,
        (SELECT COUNT(DISTINCT m.student_id) FROM marks m JOIN students s ON m.student_id = s.id WHERE s.class_id = c.id AND m.total > 0) as graded_count
    FROM classes c;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- NEW: GET SYSTEM STATS (ANALYTICS)
CREATE OR REPLACE FUNCTION get_system_stats()
RETURNS JSON AS $$
DECLARE
    total_schools INT;
    total_students INT;
    pro_schools INT;
    premium_students INT;
    inactive_schools INT;
    auth_users_used INT;
    revenue_schools NUMERIC;
    revenue_students NUMERIC;
BEGIN
    SELECT COUNT(*) INTO total_schools FROM schools;
    SELECT COUNT(*) INTO total_students FROM students;
    SELECT COUNT(*) INTO pro_schools FROM schools WHERE is_pro = TRUE;
    SELECT COUNT(*) INTO premium_students FROM students WHERE is_premium = TRUE;
    
    -- Inactive: No login/update in 7 days
    SELECT COUNT(*) INTO inactive_schools FROM schools WHERE last_active_at < NOW() - INTERVAL '7 days';
    
    -- Auth Users (Count of schools + any direct auth users)
    -- Simplified: Just counting schools as they are the auth users.
    SELECT COUNT(*) INTO auth_users_used FROM schools;
    
    revenue_schools := pro_schools * 199; -- Mock Price
    revenue_students := premium_students * 20; -- Mock Price
    
    RETURN json_build_object(
        'totalSchools', total_schools,
        'totalStudents', total_students,
        'proSchools', pro_schools,
        'premiumStudents', premium_students,
        'totalRevenue', revenue_schools + revenue_students,
        'inactiveSchools', inactive_schools,
        'authUsersUsed', auth_users_used,
        'dbSizeMB', 5 -- Mock size
    );
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- NEW: GET INACTIVE SCHOOLS
CREATE OR REPLACE FUNCTION get_inactive_schools()
RETURNS TABLE(id UUID, name TEXT, email TEXT, lastActive TIMESTAMP WITH TIME ZONE, daysInactive INT, isPaused BOOLEAN) AS $$
BEGIN
    RETURN QUERY
    SELECT 
        s.id, 
        s.name, 
        s.admin_email, 
        s.last_active_at, 
        EXTRACT(DAY FROM (NOW() - s.last_active_at))::INT,
        s.is_paused
    FROM schools s
    WHERE s.last_active_at < NOW() - INTERVAL '7 days'
    ORDER BY s.last_active_at ASC;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;


-- 6. POLICIES
ALTER TABLE schools ENABLE ROW LEVEL SECURITY;
ALTER TABLE classes ENABLE ROW LEVEL SECURITY;
ALTER TABLE students ENABLE ROW LEVEL SECURITY;
ALTER TABLE marks ENABLE ROW LEVEL SECURITY;
ALTER TABLE profile_requests ENABLE ROW LEVEL SECURITY;
ALTER TABLE system_feedback ENABLE ROW LEVEL SECURITY;
ALTER TABLE pricing_plans ENABLE ROW LEVEL SECURITY; -- New Policy

DROP POLICY IF EXISTS "Public Read Schools" ON schools;
DROP POLICY IF EXISTS "Public Read Classes" ON classes;
DROP POLICY IF EXISTS "Public Read Students" ON students;
DROP POLICY IF EXISTS "Public Read Marks" ON marks;
DROP POLICY IF EXISTS "Public Insert Schools" ON schools;
DROP POLICY IF EXISTS "Admin All Access" ON schools;
DROP POLICY IF EXISTS "Enable All Classes" ON classes;
DROP POLICY IF EXISTS "Enable All Students" ON students;
DROP POLICY IF EXISTS "Enable All Marks" ON marks;
DROP POLICY IF EXISTS "Enable All Requests" ON profile_requests;
DROP POLICY IF EXISTS "Enable All Feedback" ON system_feedback;
DROP POLICY IF EXISTS "Enable All Plans" ON pricing_plans;

CREATE POLICY "Public Read Schools" ON schools FOR SELECT USING (true);
CREATE POLICY "Public Insert Schools" ON schools FOR INSERT WITH CHECK (true);
CREATE POLICY "Admin All Access" ON schools FOR ALL USING (auth.uid() = auth_id);

CREATE POLICY "Enable All Classes" ON classes FOR ALL USING (true);
CREATE POLICY "Enable All Students" ON students FOR ALL USING (true);
CREATE POLICY "Enable All Marks" ON marks FOR ALL USING (true);
CREATE POLICY "Enable All Requests" ON profile_requests FOR ALL USING (true);
CREATE POLICY "Enable All Feedback" ON system_feedback FOR ALL USING (true);
CREATE POLICY "Enable All Plans" ON pricing_plans FOR ALL USING (true);
`,r_=()=>{const t=()=>{navigator.clipboard.writeText(fh),alert("SQL Copied to Clipboard! Paste it in Supabase SQL Editor.")};return i.jsx("div",{className:"p-8 pb-20 max-w-4xl mx-auto",children:i.jsxs(X,{children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[i.jsx(Qt,{className:"text-green-500"})," Complete SQL Setup (V3.1)"]}),i.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Run this updated script to enable Owner Analytics, Inactive Tracking & Feedback."})]}),i.jsxs(H,{onClick:t,className:"flex items-center gap-2",children:[i.jsx(Ei,{className:"w-4 h-4"})," Copy SQL"]})]}),i.jsx("div",{className:"relative",children:i.jsx("pre",{className:"bg-slate-900 text-slate-300 p-4 rounded-xl overflow-x-auto text-xs font-mono h-[500px] border border-slate-700",children:fh})})]})})},s_=({children:t,user:e,role:r,onLogout:s,theme:n,toggleTheme:a})=>{const[l,o]=b.useState(null),[c,u]=b.useState("blue");b.useEffect(()=>{const d=localStorage.getItem("school_logo"),f=localStorage.getItem("school_theme");d&&o(d),f&&u(f),e&&e.logoUrl&&o(e.logoUrl),e&&e.schoolLogoUrl&&o(e.schoolLogoUrl)},[e]),b.useEffect(()=>{const d=()=>{const f=localStorage.getItem("school_logo"),x=localStorage.getItem("school_theme");f&&o(f),x&&u(x)};return window.addEventListener("storage",d),()=>window.removeEventListener("storage",d)},[]);const h=()=>{switch(c){case"purple":return"bg-purple-600";case"green":return"bg-green-600";case"orange":return"bg-orange-600";case"red":return"bg-red-600";default:return"bg-blue-600"}};return i.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 font-sans text-slate-900 dark:text-slate-100 transition-colors duration-200",children:[i.jsx("nav",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-50 transition-colors duration-200",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between h-16",children:[i.jsx("div",{className:"flex items-center",children:i.jsxs(Ll,{to:"/",className:"flex-shrink-0 flex items-center gap-2",children:[l?i.jsx("img",{src:l,alt:"Logo",className:"w-10 h-10 rounded-lg object-contain bg-white border border-slate-200 p-0.5"}):i.jsx("div",{className:`${h()} text-white p-1.5 rounded-lg`,children:i.jsx(lu,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-xl text-slate-800 dark:text-white tracking-tight hidden md:block",children:(e==null?void 0:e.schoolName)||"SchoolResult Pro"}),i.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white tracking-tight md:hidden",children:e!=null&&e.schoolName?e.schoolName.length>15?e.schoolName.substring(0,12)+"...":e.schoolName:"SchoolResult"})]})}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:a,className:"p-2 text-slate-500 hover:text-blue-600 dark:text-slate-400 dark:hover:text-blue-400 transition-colors rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",title:"Toggle Theme",children:n==="dark"?i.jsx(_y,{className:"w-5 h-5"}):i.jsx(my,{className:"w-5 h-5"})}),e?i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400 hidden md:block",children:r===G.SUPER_ADMIN?"Platform Owner":r===G.ADMIN?"Administrator":r===G.TEACHER?`Teacher (${e.name})`:e.name}),i.jsx("button",{onClick:s,className:"text-slate-500 hover:text-red-600 dark:text-slate-400 dark:hover:text-red-400 transition-colors",children:i.jsx(dy,{className:"w-5 h-5"})})]}):i.jsxs("div",{className:"hidden md:flex gap-4 text-sm font-medium text-slate-600 dark:text-slate-300",children:[i.jsx(Ll,{to:"/login",className:"hover:text-blue-600 dark:hover:text-blue-400",children:"Login"}),i.jsx(Ll,{to:"/result",className:"hover:text-blue-600 dark:hover:text-blue-400",children:"Results"})]})]})]})})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t})]})},n_=()=>{const[t,e]=b.useState(null),[r,s]=b.useState(null),[n,a]=b.useState(!0),[l,o]=b.useState(localStorage.getItem("theme")||"light");b.useEffect(()=>{const d=window.location.href;let f=null;if(d.includes("cfg=")){const x=d.match(/[?&]cfg=([^&#]*)/);x&&(f=x[1])}if(f)try{const x=atob(decodeURIComponent(f)),{u:v,k:y,s:w}=JSON.parse(x);if(v&&y){localStorage.setItem("sb_url",v),localStorage.setItem("sb_key",y),w&&localStorage.setItem("school_id",w);const g=window.location.href.replace(/[?&]cfg=[^&#]*/,"");window.history.replaceState({},document.title,g),window.location.reload();return}}catch(x){console.error("Invalid Magic Link",x)}setTimeout(()=>a(!1),1e3)},[]),b.useEffect(()=>{l==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",l)},[l]);const c=()=>{o(d=>d==="light"?"dark":"light")},u=(d,f)=>{s(d),e(f),(f.logoUrl||f.schoolLogoUrl)&&localStorage.setItem("school_logo",f.logoUrl||f.schoolLogoUrl),(f.themeColor||f.schoolThemeColor)&&localStorage.setItem("school_theme",f.themeColor||f.schoolThemeColor)},h=()=>{s(null),e(null),window.location.hash="#/login"};return n?i.jsx(sy,{}):i.jsx(Qv,{children:i.jsx(s_,{user:t,role:r,onLogout:h,theme:l,toggleTheme:c,children:i.jsxs(Wv,{children:[i.jsx(mt,{path:"/",element:i.jsx(Hb,{})}),i.jsx(mt,{path:"/setup",element:i.jsx(Gb,{})}),i.jsx(mt,{path:"/login",element:i.jsx(Kb,{onLogin:u})}),i.jsx(mt,{path:"/result",element:i.jsx(Zb,{})}),i.jsx(mt,{path:"/register",element:i.jsx(e_,{})}),i.jsx(mt,{path:"/portal/:slug",element:i.jsx(t_,{})}),i.jsx(mt,{path:"/sql",element:i.jsx(r_,{})})," ",i.jsx(mt,{path:"/dashboard/teacher",element:r===G.TEACHER&&t?i.jsx(Xb,{user:t}):i.jsx(_a,{to:"/login"})}),i.jsx(mt,{path:"/dashboard/admin",element:r===G.ADMIN?i.jsx(Yb,{}):i.jsx(_a,{to:"/login"})}),i.jsx(mt,{path:"/dashboard/superadmin",element:r===G.SUPER_ADMIN?i.jsx(Qb,{}):i.jsx(_a,{to:"/login"})}),i.jsx(mt,{path:"/dashboard/student",element:r===G.STUDENT&&t?i.jsx(Jb,{user:t}):i.jsx(_a,{to:"/login"})})]})})})},_0=document.getElementById("root");if(!_0)throw new Error("Could not find root element to mount to");const a_=Wl.createRoot(_0);a_.render(i.jsx(Nh.StrictMode,{children:i.jsx(n_,{})}));
