import{c as I,r as t,i as c,j as e,G as i,Z as D,a8 as T,P as N,A as G,F as E,X as B,a7 as U,s as M,C as F,d as k,J as L,e as z}from"./index-CR8CapFt.js";import{P as O}from"./plus-BN13murC.js";import{A as q}from"./arrow-up-right-RfR8L5cZ.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=I("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]),$=({schoolConfig:w})=>{const[x,v]=t.useState([]),[y,C]=t.useState(w.walletBalance||0),[S,b]=t.useState(!0),[A,n]=t.useState(!1),[d,h]=t.useState(""),[o,p]=t.useState(""),[r,m]=t.useState(null),[u,f]=t.useState(!1),[a,P]=t.useState(null);t.useEffect(()=>{g()},[]);const g=async()=>{b(!0);const[s,l,j]=await Promise.all([c.getWalletHistory(),c.getGlobalSettings(),c.getSchoolConfig()]);if(v(s),j&&C(j.walletBalance),l.GPAY_CONFIG)try{P(JSON.parse(l.GPAY_CONFIG))}catch{}b(!1)},R=async s=>{if(s.preventDefault(),!r||!o||!d)return alert("All fields are required");f(!0);const l=await c.submitPaymentProof(parseInt(d),o,r,"CREDIT_PURCHASE");f(!1),l.success?(alert("Proof submitted! Credits will be added once verified by Admin."),n(!1),h(""),p(""),m(null)):alert(l.message)};return e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs(i,{className:"md:col-span-2 bg-slate-900 border-slate-800 text-white relative overflow-hidden flex flex-col justify-between min-h-[200px]",children:[e.jsx("div",{className:"absolute right-0 top-0 p-6 opacity-10",children:e.jsx(D,{className:"w-40 h-40 fill-white"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-xs font-black text-blue-400 uppercase tracking-widest mb-1",children:"Available Balance"}),e.jsxs("h2",{className:"text-6xl font-black flex items-baseline gap-2",children:[y," ",e.jsx("span",{className:"text-xl font-bold text-slate-500 uppercase",children:"Credits"})]}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-2 flex items-center gap-1 uppercase tracking-tighter",children:[e.jsx(T,{className:"w-3 h-3 text-green-500"})," Secured Feature Wallet"]})]}),e.jsxs("div",{className:"relative z-10 flex gap-3 mt-6",children:[e.jsxs("button",{onClick:()=>n(!0),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-xl font-black text-sm shadow-xl shadow-blue-900/40 flex items-center justify-center gap-2 transition-all active:scale-95",children:[e.jsx(O,{className:"w-4 h-4"})," BUY CREDITS"]}),e.jsx("button",{onClick:g,className:"p-3 bg-white/5 hover:bg-white/10 rounded-xl border border-white/10 transition-all",children:e.jsx(N,{className:`w-5 h-5 ${S?"animate-spin":""}`})})]})]}),e.jsxs(i,{className:"bg-white dark:bg-slate-800 flex flex-col justify-between border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-slate-400 text-[10px] uppercase tracking-widest mb-4",children:"Pricing Guide"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"font-bold text-slate-500",children:"Result Publish"}),e.jsx("span",{className:"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 px-2 py-1 rounded font-black",children:"1 CR / Child"})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"font-bold text-slate-500",children:"AI Remarks"}),e.jsx("span",{className:"bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400 px-2 py-1 rounded font-black",children:"5 CR / Batch"})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs opacity-50",children:[e.jsx("span",{className:"font-bold text-slate-500",children:"SMS Alerts"}),e.jsx("span",{className:"bg-slate-100 dark:bg-slate-900 text-slate-500 px-2 py-1 rounded font-black",children:"1 CR / SMS"})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/10 rounded-xl border border-blue-100 dark:border-blue-900/30 flex items-start gap-2",children:[e.jsx(G,{className:"w-4 h-4 text-blue-600 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-[9px] text-blue-800 dark:text-blue-300 leading-tight font-medium",children:"Credits never expire. Buy in bulk for your yearly academic needs."})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-black text-xl text-slate-800 dark:text-white flex items-center gap-2 uppercase tracking-tight px-1",children:[e.jsx(E,{className:"w-6 h-6 text-blue-600"})," Wallet Statement"]}),e.jsx(i,{className:"p-0 overflow-hidden bg-white dark:bg-slate-800 border-slate-100 dark:border-slate-700",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-[10px] font-black uppercase text-slate-400 tracking-widest border-b border-slate-100 dark:border-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Date & Time"}),e.jsx("th",{className:"p-4",children:"Description"}),e.jsx("th",{className:"p-4",children:"Category"}),e.jsx("th",{className:"p-4 text-right",children:"Amount"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-800",children:[x.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50/50 dark:hover:bg-slate-900/50 transition-colors",children:[e.jsx("td",{className:"p-4 text-xs font-medium text-slate-500",children:new Date(s.createdAt).toLocaleString()}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${s.type==="CREDIT"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:s.type==="CREDIT"?e.jsx(q,{className:"w-4 h-4"}):e.jsx(V,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:s.description})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"text-[10px] font-black bg-slate-100 dark:bg-slate-900 px-2 py-1 rounded text-slate-500 uppercase tracking-wider",children:s.category})}),e.jsxs("td",{className:`p-4 text-right font-black text-lg ${s.type==="CREDIT"?"text-green-600":"text-red-500"}`,children:[s.type==="CREDIT"?"+":"-",s.amount]})]},s.id)),x.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"p-12 text-center text-slate-400 font-bold italic",children:"No transactions found."})})]})]})})})]}),A&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs(i,{className:"w-full max-w-md bg-white dark:bg-slate-900 border-t-8 border-blue-600 relative p-0 overflow-hidden",children:[e.jsx("button",{onClick:()=>n(!1),className:"absolute top-4 right-4 text-slate-400 hover:text-red-500 z-20",children:e.jsx(B,{className:"w-6 h-6"})}),e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-950 border-b border-slate-100 dark:border-slate-800",children:[e.jsx("h3",{className:"text-xl font-black text-slate-800 dark:text-white uppercase tracking-tight",children:"Top-up Wallet"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1 font-bold uppercase tracking-widest",children:"Manual GPay / UPI Gateway"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-4 rounded-2xl border border-blue-100 dark:border-blue-900/50 text-center",children:[e.jsx("label",{className:"text-[10px] font-black text-blue-600 uppercase tracking-widest block mb-4",children:"Step 1: Scan & Pay"}),e.jsx("div",{className:"w-32 h-32 bg-white rounded-2xl mx-auto mb-4 p-2 shadow-inner border border-blue-100 flex items-center justify-center",children:a!=null&&a.vpa?e.jsx(U,{className:"w-24 h-24 text-slate-800"}):e.jsx(M,{className:"w-12 h-12 text-slate-300 animate-pulse"})}),e.jsx("p",{className:"text-xs font-black text-slate-700 dark:text-slate-300 mb-1",children:(a==null?void 0:a.vpa)||"Loading VPA..."}),e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText((a==null?void 0:a.vpa)||""),alert("VPA Copied!")},className:"text-[10px] text-blue-600 font-black hover:underline uppercase flex items-center justify-center gap-1 mx-auto",children:[e.jsx(F,{className:"w-3 h-3"})," Copy UPI ID"]})]}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block -mb-2",children:"Step 2: Enter Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(k,{type:"number",placeholder:"Amount Paid (â‚¹)",value:d,onChange:s=>h(s.target.value),required:!0,className:"h-12 font-black"}),e.jsx(k,{placeholder:"Ref No / UTR",value:o,onChange:s=>p(s.target.value),required:!0,className:"h-12 font-bold uppercase"})]}),e.jsx("label",{className:"cursor-pointer group",children:e.jsxs("div",{className:"w-full border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-2xl p-4 flex flex-col items-center justify-center hover:bg-slate-50 dark:hover:bg-slate-800 transition-all",children:[e.jsx(L,{className:"w-6 h-6 text-slate-400 mb-2 group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:r?r.name:"Upload Screenshot"}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:s=>{var l;return m(((l=s.target.files)==null?void 0:l[0])||null)},required:!0})]})}),e.jsx(z,{type:"submit",disabled:u,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-4 text-sm font-black shadow-xl shadow-blue-500/30",children:u?e.jsx(N,{className:"animate-spin w-5 h-5 mx-auto"}):"SUBMIT FOR APPROVAL"})]})]})]})})]})};export{$ as default};
