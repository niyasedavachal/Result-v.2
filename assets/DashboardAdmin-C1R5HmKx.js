const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./OverviewTab-CKIpCXQd.js","./index-CR8CapFt.js","./plus-BN13murC.js","./calendar-days-Div_RGjT.js","./ClassesTab-CS0qD1YA.js","./layout-grid-DhX87_Yv.js","./layers-CzQ9w-9q.js","./AssessmentsTab-BAKhD0eJ.js","./clipboard-list-DO7w9v1_.js","./pen-square-my-Ln0hF.js","./thumbs-up-CZLhQSFH.js","./frown-CUBNiN_7.js","./FeesTab-CBMf2I7m.js","./history-BKy8-aW5.js","./printer-29g9zaoY.js","./SettingsTab-OFY48QSW.js","./database-DWcnkkET.js","./BillingTab-DsfpuQBH.js","./arrow-up-right-RfR8L5cZ.js","./ReportsTab-Bo1azvNJ.js","./PromotionTab-BfzmIpnH.js","./brain-circuit-BV5-IJ14.js","./TimetableTab-C5_zFOvy.js","./calendar-clock-CiCcwmvz.js","./CalendarTab-D1pXTy8g.js","./ExamsTab-c-L1Uwzg.js"])))=>i.map(i=>d[i]);
import{c as ae,u as De,r as t,i as f,j as e,x as Ue,y as dt,z as ct,X as B,e as y,H as mt,M as Ie,G as J,d as F,R as xt,b as ht,h as he,D as ut,S as bt,E as pt,I as Fe,a as ue,J as gt,K as se,N as S,O as ft,l as jt,P as Nt,B as vt,Q as kt,V as wt,Y as St,_ as yt,W as Ct,m as Et,U as Tt,o as At,F as Pt,$ as Rt,Z as zt,a0 as _t,a1 as C,a2 as _e}from"./index-CR8CapFt.js";import{B as xe}from"./bell-CGBzSOpK.js";import{L as Mt}from"./layout-dashboard-D_9fgD95.js";import{C as Dt}from"./calendar-clock-CiCcwmvz.js";import{C as Ut}from"./clipboard-list-DO7w9v1_.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=ae("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=ae("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=ae("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=ae("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),Ot=({config:i,onNoticeClick:a})=>{const d=De(),[n,x]=t.useState(""),[p,c]=t.useState([]),[l,g]=t.useState(!1),r=t.useRef(null);t.useEffect(()=>{const b=setTimeout(async()=>{if(n.length>=2){g(!0);const E=await f.searchAllStudents(n);c(E),g(!1)}else c([])},400);return()=>clearTimeout(b)},[n]),t.useEffect(()=>{const b=E=>{r.current&&!r.current.contains(E.target)&&c([])};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const m=b=>{c([]),x(""),alert(`Found Student ID: ${b}. (View Profile coming soon)`)};return e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4 bg-white dark:bg-slate-950 p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm relative z-40",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-100 dark:border-blue-900/50 text-blue-600 dark:text-blue-400",children:i.logoUrl?e.jsx("img",{src:i.logoUrl,className:"w-8 h-8 object-contain",alt:"Logo"}):e.jsx(Ue,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-black text-slate-900 dark:text-white leading-tight tracking-tight",children:i.schoolName}),e.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-wide mt-1",children:[e.jsx("span",{children:i.place}),e.jsx("span",{className:"w-1 h-1 bg-slate-300 rounded-full"}),e.jsx("span",{className:i.isPro?"text-emerald-600 flex items-center gap-1":"text-slate-400",children:i.isPro?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"w-3 h-3"})," PRO CAMPUS"]}):"FREE PLAN"})]})]})]}),e.jsxs("div",{className:"relative w-full md:w-64",ref:r,children:[e.jsxs("div",{className:"relative",children:[e.jsx(ct,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),e.jsx("input",{className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg pl-9 pr-8 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium text-slate-700 dark:text-slate-200",placeholder:"Search Student...",value:n,onChange:b=>x(b.target.value)}),n&&e.jsx("button",{onClick:()=>{x(""),c([])},className:"absolute right-2 top-2 text-slate-400 hover:text-slate-600 p-0.5 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors",children:e.jsx(B,{className:"w-3 h-3"})})]}),p.length>0&&e.jsx("div",{className:"absolute top-12 left-0 w-full bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-700 overflow-hidden z-[100] max-h-64 overflow-y-auto custom-scrollbar animate-fade-in-up",children:p.map(b=>e.jsxs("div",{onClick:()=>m(b.id),className:"p-3 border-b border-slate-100 dark:border-slate-800 last:border-0 hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors",children:[e.jsx("p",{className:"font-bold text-sm text-slate-800 dark:text-white",children:b.name}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("span",{className:"text-[10px] bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-1.5 py-0.5 rounded font-bold",children:b.className}),e.jsx("span",{className:"text-[10px] font-mono text-slate-400",children:b.regNo})]})]},b.id))}),n.length>=2&&!l&&p.length===0&&e.jsx("div",{className:"absolute top-12 left-0 w-full bg-white dark:bg-slate-900 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 p-4 text-center text-xs text-slate-500 z-[100]",children:"No students found."})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsxs(y,{onClick:()=>d(`/school/${i.slug||i.id}`),variant:"secondary",className:"flex-1 md:flex-none flex justify-center items-center gap-2 text-xs border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 hover:text-blue-600",children:[e.jsx(mt,{className:"w-4 h-4"})," Public Page"]}),e.jsxs(y,{onClick:a,className:"flex-1 md:flex-none flex justify-center items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-500/20",children:[e.jsx(Ie,{className:"w-4 h-4"})," Post Notice"]})]})]})},Gt=({onClose:i,data:a,setData:d,scheduleTime:n,setScheduleTime:x,onSubmit:p,loading:c})=>e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs(J,{className:"w-full max-w-md border-t-4 border-t-slate-900 relative",children:[e.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-zinc-400 hover:text-zinc-600",children:e.jsx(B,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-4 mb-6 pb-4 border-b border-zinc-100 dark:border-zinc-800",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-100 dark:bg-zinc-900 rounded-full flex items-center justify-center shrink-0",children:e.jsx(Ie,{className:"w-6 h-6 text-slate-900 dark:text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white leading-tight",children:"Post Notice"}),e.jsx("p",{className:"text-xs text-zinc-500",children:"Broadcast to campus"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(F,{placeholder:"Title (Optional)",value:a.title,onChange:l=>d({...a,title:l.target.value})}),e.jsx("textarea",{className:"w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-300 dark:border-zinc-700 rounded-lg p-3 text-sm h-32 resize-none outline-none focus:ring-2 focus:ring-slate-900",placeholder:"Message content...",value:a.message,onChange:l=>d({...a,message:l.target.value})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Schedule (Optional)"}),e.jsx(F,{type:"datetime-local",value:n,onChange:l=>x(l.target.value)})]}),e.jsx(y,{onClick:p,className:"w-full bg-slate-900 text-white hover:bg-slate-800",children:n?"Schedule Post":"Post Now"})]})]})}),Vt=({onClose:i,date:a,setDate:d,onSubmit:n,loading:x})=>e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs(J,{className:"max-w-md w-full relative border-t-4 border-emerald-600",children:[e.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-zinc-400 hover:text-zinc-600",children:e.jsx(B,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-50 dark:bg-emerald-900/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-emerald-100 dark:border-emerald-800",children:e.jsx(xt,{className:"w-8 h-8 text-emerald-600"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Publish Results"}),e.jsx("p",{className:"text-zinc-500 text-sm",children:"Make marks visible to public."})]}),e.jsx("div",{className:"space-y-4 mb-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Schedule Date (Optional)"}),e.jsx(F,{type:"datetime-local",value:a,onChange:p=>d(p.target.value)}),e.jsx("p",{className:"text-[10px] text-zinc-400 mt-1",children:"Leave empty for immediate release."})]})}),e.jsx(y,{onClick:n,disabled:x,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white shadow-lg shadow-emerald-900/20",children:x?"Processing...":a?"Schedule Publish":"Publish Now"})]})}),Bt=({onClose:i,mode:a,setMode:d,classId:n,setClassId:x,classes:p,newStudent:c,setNewStudent:l,onSubmit:g,onCsv:r,setCsv:m,loading:b,saved:E,schoolId:N})=>{const[$,h]=t.useState([]),[R,I]=t.useState({}),[D,z]=t.useState("");t.useEffect(()=>{(async()=>{var v;const[j,_]=await Promise.all([f.getSchoolConfig(),f.getGlobalSettings()]);(v=j==null?void 0:j.admissionConfig)!=null&&v.customFields&&h(j.admissionConfig.customFields),_.SHEET_TEMPLATE_URL&&z(_.SHEET_TEMPLATE_URL)})()},[]),t.useEffect(()=>{l(o=>({...o,customData:R}))},[R]);const T=()=>window.location.href.split("#")[0],L=()=>{if(D)window.open(D,"_blank");else{const j="data:text/csv;charset=utf-8,"+["Name","RegNo","RollNo","Gender","DOB","FatherName","MotherName","Phone","Address","Class"].join(","),_=encodeURI(j),v=document.createElement("a");v.setAttribute("href",_),v.setAttribute("download","ResultMate_Template.csv"),document.body.appendChild(v),v.click(),document.body.removeChild(v)}};return e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs(J,{className:"max-w-md w-full relative h-[85vh] flex flex-col p-0 overflow-hidden bg-zinc-50 dark:bg-zinc-900",children:[e.jsxs("div",{className:"p-6 pb-2 bg-white dark:bg-zinc-950 border-b border-zinc-200 dark:border-zinc-800",children:[e.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-zinc-400 hover:text-zinc-600",children:e.jsx(B,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-100 dark:bg-zinc-900 rounded-full flex items-center justify-center shrink-0 border border-zinc-200 dark:border-zinc-800",children:e.jsx(ht,{className:"w-6 h-6 text-slate-900 dark:text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white leading-tight",children:"Add Students"}),e.jsx("p",{className:"text-xs text-zinc-500",children:"Manage admission"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs(he,{value:n,onChange:o=>x(o.target.value),children:[e.jsx("option",{value:"",children:"-- Choose Class (Optional for Bulk) --"}),p.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})}),e.jsx("div",{className:"flex bg-zinc-100 dark:bg-zinc-900 p-1 rounded-lg border border-zinc-200 dark:border-zinc-800",children:["PUBLIC","DELEGATE","BULK","SINGLE"].map(o=>e.jsx("button",{onClick:()=>d(o),className:`flex-1 py-1.5 px-1 rounded text-[10px] font-bold whitespace-nowrap transition-all ${a===o?"bg-white dark:bg-zinc-800 shadow text-blue-600 dark:text-white":"text-zinc-500"}`,children:o==="DELEGATE"?"Invite":o},o))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 pt-4",children:[a==="PUBLIC"&&e.jsx("div",{className:"text-center pt-4",children:e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-6 rounded-xl border border-blue-100 dark:border-blue-900/50 mb-4",children:[e.jsx(ut,{className:"w-10 h-10 text-blue-600 mx-auto mb-2"}),e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:"Self Registration"}),e.jsx("p",{className:"text-xs text-zinc-500 mb-4",children:"Share link for parents to apply."}),e.jsx("div",{className:"p-2 bg-white dark:bg-zinc-950 rounded border border-zinc-200 dark:border-zinc-800 text-[10px] text-zinc-500 font-mono mb-4 break-all",children:n?`${T()}#/register?schoolId=${N}&classId=${n}`:"Select Class First"}),e.jsx(y,{onClick:()=>{n&&navigator.clipboard.writeText(`${T()}#/register?schoolId=${N}&classId=${n}`)},className:"w-full bg-blue-600 text-white hover:bg-blue-700",children:"Copy Link"})]})}),a==="DELEGATE"&&e.jsx("div",{className:"text-center pt-4",children:e.jsxs("div",{className:"bg-zinc-100 dark:bg-zinc-800 p-6 rounded-xl border border-zinc-200 dark:border-zinc-700",children:[e.jsx(bt,{className:"w-10 h-10 text-zinc-500 mx-auto mb-2"}),e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:"Invite Teacher"}),e.jsx("p",{className:"text-xs text-zinc-500 mb-4",children:"Let the teacher manage admissions."}),e.jsx(y,{onClick:()=>{n&&navigator.clipboard.writeText(`${T()}#/login?invite=${n}`)},variant:"secondary",className:"w-full bg-white dark:bg-zinc-950 border border-zinc-300 dark:border-zinc-700",children:"Copy Invite"})]})}),a==="BULK"&&e.jsxs("div",{className:"space-y-4 pt-4 text-center",children:[e.jsxs("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800 rounded-xl mb-4",children:[e.jsx("p",{className:"text-xs font-bold text-emerald-800 dark:text-emerald-300 mb-2",children:"Step 1: Get Template"}),e.jsxs("button",{onClick:L,className:"w-full py-3 bg-white dark:bg-emerald-900 border border-emerald-200 dark:border-emerald-700 text-emerald-700 dark:text-emerald-200 rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-emerald-50 dark:hover:bg-emerald-800 transition-colors shadow-sm",children:[e.jsx(pt,{className:"w-4 h-4"})," Open Master Sheet"]}),e.jsx("p",{className:"text-[9px] text-emerald-600 dark:text-emerald-400 mt-2",children:"Fill the sheet and save as CSV to upload."})]}),e.jsxs("div",{className:"border-2 border-dashed border-zinc-300 dark:border-zinc-700 rounded-xl p-6 bg-zinc-50 dark:bg-zinc-900",children:[e.jsx(Fe,{className:"w-10 h-10 text-emerald-600 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-zinc-500 mb-4",children:"Step 2: Upload CSV"}),e.jsx("input",{type:"file",accept:".csv",onChange:o=>{var j;return m(((j=o.target.files)==null?void 0:j[0])||null)},className:"text-xs w-full"})]}),e.jsx(y,{onClick:r,disabled:b,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white",children:b?"Uploading...":"Upload CSV"})]}),a==="SINGLE"&&e.jsxs("form",{onSubmit:g,className:"space-y-4 pt-2 relative",children:[E&&e.jsxs("div",{className:"absolute -top-4 right-0 text-[10px] text-green-600 font-bold flex gap-1",children:[e.jsx(ue,{className:"w-3 h-3"})," Saved Draft"]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Name"}),e.jsx(F,{value:c.name,onChange:o=>l({...c,name:o.target.value.toUpperCase()}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Reg No"}),e.jsx(F,{value:c.regNo,onChange:o=>l({...c,regNo:o.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Roll No"}),e.jsx(F,{value:c.rollNo,onChange:o=>l({...c,rollNo:o.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Gender"}),e.jsxs(he,{value:c.gender,onChange:o=>l({...c,gender:o.target.value}),children:[e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"DOB"}),e.jsx(F,{type:"date",value:c.dob,onChange:o=>l({...c,dob:o.target.value})})]})]}),e.jsx(y,{type:"submit",disabled:b,className:"w-full mt-4 bg-slate-900 text-white hover:bg-slate-800",children:b?"Saving...":"Save Student"})]})]})]})})},$t=({onClose:i,onSuccess:a})=>{const[d,n]=t.useState(null),[x,p]=t.useState("Term 1"),[c,l]=t.useState(!1),[g,r]=t.useState(null),[m,b]=t.useState([]),E=h=>{if(h.target.files&&h.target.files[0]){const R=h.target.files[0];n(R);const I=new FileReader;I.onload=D=>{var L;const T=((L=D.target)==null?void 0:L.result).split(`
`).filter(o=>o.trim());if(T.length>0){const o=se(T[0]),j=[];for(let _=1;_<T.length;_++){const v=se(T[_]),Q={};o.forEach((K,Y)=>{var w;return Q[K.trim()]=(w=v[Y])==null?void 0:w.trim()}),j.push(Q)}r({headers:o,count:j.length}),b(j)}},I.readAsText(R)}},N=async()=>{if(!m.length)return;l(!0);const h=await f.uploadBulkResultCSV(m,x);l(!1),h.success?(alert(h.message),a(),i()):alert("Upload Failed: "+h.message)},$=()=>{const h=["RegNo","Name","Class","English","Maths","Science","Social","IT"],R=["1001","Student Name","10 A","45","48","42","40","50"],I="data:text/csv;charset=utf-8,"+[h.join(","),R.join(",")].join(`
`),D=encodeURI(I),z=document.createElement("a");z.setAttribute("href",D),z.setAttribute("download","Result_Upload_Template.csv"),document.body.appendChild(z),z.click(),document.body.remove()};return e.jsx("div",{className:"fixed inset-0 z-[80] flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs(J,{className:"max-w-md w-full relative bg-white dark:bg-slate-900 border-t-4 border-emerald-500",children:[e.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600",children:e.jsx(B,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-50 dark:bg-emerald-900/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-emerald-100 dark:border-emerald-800",children:e.jsx(Fe,{className:"w-8 h-8 text-emerald-600"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Upload Results"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Bulk import marks from Excel/CSV"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Exam Name"}),e.jsx("input",{className:"w-full bg-slate-50 dark:bg-slate-950 border border-slate-200 dark:border-slate-800 rounded-lg p-2.5 text-sm font-bold text-slate-700 dark:text-white",value:x,onChange:h=>p(h.target.value)})]}),e.jsxs("div",{className:"border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-xl p-6 text-center hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[e.jsx("input",{type:"file",accept:".csv",className:"hidden",id:"csvUpload",onChange:E}),e.jsxs("label",{htmlFor:"csvUpload",className:"cursor-pointer",children:[e.jsx(gt,{className:"w-10 h-10 text-emerald-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:d?d.name:"Click to Select CSV File"}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Columns: RegNo, Name, Class, Subject1, Subject2..."})]})]}),g&&e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/10 p-3 rounded-lg border border-emerald-100 dark:border-emerald-900 text-center",children:[e.jsxs("p",{className:"text-xs text-emerald-700 dark:text-emerald-400 font-bold flex items-center justify-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4"})," Found ",g.count," Students"]}),e.jsxs("p",{className:"text-[10px] text-emerald-600 dark:text-emerald-500 mt-1 truncate px-2",children:["Subjects: ",g.headers.filter(h=>!["RegNo","Name","Class","Gender","DOB"].includes(h)).join(", ")]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:$,className:"flex-1 py-3 border border-slate-200 dark:border-slate-700 text-slate-500 rounded-xl text-xs font-bold hover:bg-slate-50 dark:hover:bg-slate-800",children:"Download Template"}),e.jsx(y,{onClick:N,disabled:c||!d,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white shadow-lg shadow-emerald-500/20",children:c?"Uploading...":"Confirm Upload"})]})]})]})})};class Ht extends S.Component{constructor(a){super(a),this.logErrorToCloud=async(d,n)=>{try{const x=localStorage.getItem("school_id")||"Unknown User",p=n!=null&&n.componentStack?n.componentStack.slice(0,300):"No stack trace",c=`CRASH: ${d.message}

Stack: ${p}`;await f.createSystemFeedback(c,"BUG",x),this.setState({reportSent:!0})}catch(x){console.error("Failed to auto-report crash",x)}},this.state={hasError:!1,error:null,errorInfo:null,reportSent:!1}}static getDerivedStateFromError(a){return{hasError:!0,error:a,reportSent:!1}}componentDidCatch(a,d){console.error("Uncaught error:",a,d),this.setState({errorInfo:d}),this.logErrorToCloud(a,d)}render(){var a;return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900 p-4",children:e.jsxs(J,{className:"max-w-md w-full text-center border-t-4 border-red-500",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ft,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-4",children:"The application encountered an unexpected error."}),this.state.reportSent&&e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 text-green-600 text-xs p-2 rounded mb-4 font-bold flex items-center justify-center gap-2",children:[e.jsx(jt,{className:"w-3 h-3"})," Error Report Sent to Admin Automatically."]}),e.jsx("div",{className:"bg-slate-100 dark:bg-slate-950 p-3 rounded-lg text-xs font-mono text-red-500 text-left mb-6 overflow-auto max-h-32 border border-slate-200 dark:border-slate-800",children:((a=this.state.error)==null?void 0:a.message)||"Unknown Error"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{onClick:()=>{localStorage.clear(),window.location.reload()},variant:"secondary",className:"flex-1 text-xs",children:"Clear Data & Reload"}),e.jsxs(y,{onClick:()=>window.location.reload(),className:"flex-1 flex items-center justify-center gap-2 bg-red-600 hover:bg-red-700 text-white shadow-lg shadow-red-500/20",children:[e.jsx(Nt,{className:"w-4 h-4"})," Try Reloading"]})]})]})}):this.props.children}}const Wt={home:{title:"Dashboard Overview",description:"Welcome to the Control Center. Here you get a bird's-eye view of your campus.",steps:["Check 'Crowd Radar' for holiday trends in your district.","Use 'Quick Launchpad' for common tasks like adding students.","Review 'Pending Admissions' to approve new students."],tips:"Click 'Publish Result' to make marks visible to parents instantly."},classes:{title:"Class Management",description:"Create and manage classrooms. You can create single classes or generate bulk batches.",steps:["Use 'Smart Batch Wizard' to create Class 1 to 10 in one click.","Use 'Manual Create' for specific courses like '+1 Science'.","Click 'Manage / Split' on a class card to move students between divisions."],tips:"Share the 'Invite Link' with teachers so they can set their own passwords."},promotion:{title:"Smart Promotion Engine",description:"Move students to the next academic year efficiently. Supports shuffling and merit balancing.",steps:["Step 1: Select 'Source' (Current Classes) and 'Target' (Next Year Classes).","Step 2: Choose 'Merit Balancing' if you want to distribute top scorers evenly.","Step 3: Review the 'Workbench'. Drag & drop students to adjust manually.","Step 4: Click 'Commit' to save changes permanently."],tips:"Always save a 'Draft' if you need to discuss the list with the Principal before finalizing."},fees:{title:"Fee Management & GPay",description:"Track student payments, generate receipts, and verify GPay screenshots.",steps:["Create a 'Fee Structure' (e.g., Term 1 Fee - ₹500).","Students can now upload 'GPay Screenshots' via their portal.","You can verify these proofs in the 'Finance & Approvals' tab (Super Admin) or manually mark as paid here.","Click 'Pay' to record a cash payment manually."],tips:"If GPay is configured in System Control, students see your QR code automatically."},assessments:{title:"Behavior & Skills",description:"Track non-academic performance like Discipline, Hygiene, or Reading Logs.",steps:["Create a Program (e.g., 'Daily Prayer Tracker').","Choose Evaluation Type: Stars, Emojis, or Marks.","Assign to Teachers or Parents.","View Leaderboards to see top performers."],tips:"Use 'Star Rating' for younger kids to keep them motivated."},timetable:{title:"AI Scheduler",description:"Generate conflict-free timetables automatically.",steps:["Setup: Define working days and school timings.","Staff: Add teachers and their subjects.","Map: Assign how many periods each subject needs per week.","Generate: Let AI build the schedule."],tips:"If generation fails, try reducing the workload or adding more teachers."},settings:{title:"System Configuration",description:"Control how your school portal behaves.",steps:["Update School Name, Logo, and Address.","Configure 'Principal Access' to give view-only rights.","Set 'GPay' details for fee collection.","Use 'Data Management' to backup or clean junk data."],tips:"Choose a 'Theme' (Modern/Classic) to change how the public result page looks."},billing:{title:"Wallet & Payment Proofs",description:"Manage credits for premium AI features and Top-up.",steps:["View your current credit balance.","To Recharge: Select a pack -> Pay via GPay -> Upload Screenshot.","Once the Admin validates your screenshot, credits are added automatically."],tips:"Result publishing for the first 50 students is always FREE."},finance:{title:"Finance & Validation",description:"For Finance Managers to approve manual payments.",steps:["View list of pending GPay screenshots uploaded by Schools or Students.","Click image to zoom and verify the Transaction Ref.","Click 'Approve' to instantly add credits or mark fee as Paid.","Click 'Reject' to decline invalid proofs."],tips:"Approving a 'Student Fee' proof will automatically generate a receipt for that student."}},Jt=({context:i})=>{const[a,d]=t.useState(!1),[n,x]=t.useState([]),c=JSON.parse(localStorage.getItem("app_globals")||"{}").SUPPORT_PHONE||"919744884223";t.useEffect(()=>{!n.includes(i)&&["promotion","timetable","finance"].includes(i)},[i]);const l=Wt[i]||{title:"Help Guide",description:"Select a feature to see instructions.",steps:[]},g=()=>{d(!a),a||x(r=>[...r,i])};return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:g,className:`fixed bottom-24 right-4 z-40 p-3.5 rounded-full shadow-2xl transition-all duration-300 flex items-center justify-center border-4 border-white dark:border-slate-800 hover:scale-110 active:scale-95 ${a?"bg-slate-800 text-white rotate-45 opacity-0 pointer-events-none":"bg-gradient-to-r from-blue-600 to-indigo-600 text-white animate-bounce-slow"}`,title:"Help & Guide",children:e.jsx(Ft,{className:"w-6 h-6"})}),e.jsx("div",{className:`fixed inset-0 bg-black/40 backdrop-blur-sm z-40 transition-opacity duration-300 ${a?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:()=>d(!1)}),e.jsxs("div",{className:`fixed z-50 bg-white dark:bg-slate-900 shadow-2xl transition-transform duration-500 cubic-bezier(0.32, 0.72, 0, 1) flex flex-col
                ${a?"translate-y-0 md:translate-x-0":"translate-y-full md:translate-y-0 md:translate-x-full"}
                bottom-0 left-0 right-0 w-full h-[70vh] rounded-t-[2rem] border-t border-slate-200 dark:border-slate-800
                md:top-0 md:right-0 md:left-auto md:bottom-0 md:w-96 md:h-full md:rounded-l-3xl md:rounded-tr-none md:border-l md:border-t-0
            `,children:[e.jsxs("div",{className:"p-6 pb-4 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 mb-1",children:[e.jsx(vt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"ResultMate Guide"})]}),e.jsx("h3",{className:"text-2xl font-black text-slate-800 dark:text-white leading-tight",children:l.title})]}),e.jsx("button",{onClick:()=>d(!1),className:"p-2 bg-slate-100 dark:bg-slate-800 rounded-full text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:e.jsx(B,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 pt-0 space-y-6 custom-scrollbar",children:[e.jsx("div",{className:"bg-slate-50 dark:bg-slate-950/50 p-4 rounded-xl border border-slate-100 dark:border-slate-800",children:e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed font-medium",children:l.description})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"How to use"}),l.steps.map((r,m)=>e.jsxs("div",{className:"flex gap-4 items-start group",children:[e.jsx("div",{className:"min-w-[24px] h-6 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex items-center justify-center text-xs font-bold mt-0.5 group-hover:bg-blue-600 group-hover:text-white transition-colors",children:m+1}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 leading-relaxed",children:r})]},m))]}),l.tips&&e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 p-5 rounded-2xl border border-amber-100 dark:border-amber-800/50 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:e.jsx(Me,{className:"w-24 h-24 text-amber-500 fill-amber-500"})}),e.jsxs("h4",{className:"text-amber-700 dark:text-amber-400 text-sm font-bold flex items-center gap-2 mb-2 relative z-10",children:[e.jsx(Me,{className:"w-4 h-4 fill-current"})," Pro Tip"]}),e.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200 italic relative z-10 leading-relaxed",children:['"',l.tips,'"']})]})]}),e.jsx("div",{className:"p-4 border-t border-slate-100 dark:border-slate-800 bg-slate-50 dark:bg-slate-950/30 text-center md:rounded-bl-3xl",children:e.jsxs("a",{href:`https://wa.me/${c}`,target:"_blank",rel:"noreferrer",className:"text-xs font-bold text-slate-500 hover:text-blue-600 flex items-center justify-center gap-2 transition-colors",children:[e.jsx(kt,{className:"w-3 h-3"})," Need human help? Contact Support"]})})]})]})},Qt=S.lazy(()=>C(()=>import("./OverviewTab-CKIpCXQd.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),Kt=S.lazy(()=>C(()=>import("./ClassesTab-CS0qD1YA.js"),__vite__mapDeps([4,1,5,6,2]),import.meta.url)),Yt=S.lazy(()=>C(()=>import("./AssessmentsTab-BAKhD0eJ.js"),__vite__mapDeps([7,1,8,2,9,10,11]),import.meta.url)),qt=S.lazy(()=>C(()=>import("./FeesTab-CBMf2I7m.js"),__vite__mapDeps([12,1,2,13,14]),import.meta.url)),Zt=S.lazy(()=>C(()=>import("./SettingsTab-OFY48QSW.js"),__vite__mapDeps([15,1,16]),import.meta.url)),Xt=S.lazy(()=>C(()=>import("./BillingTab-DsfpuQBH.js"),__vite__mapDeps([17,1,2,18]),import.meta.url)),es=S.lazy(()=>C(()=>import("./ReportsTab-Bo1azvNJ.js"),__vite__mapDeps([19,1,14]),import.meta.url)),ts=S.lazy(()=>C(()=>import("./PromotionTab-BfzmIpnH.js"),__vite__mapDeps([20,1,5,14,21]),import.meta.url)),ss=S.lazy(()=>C(()=>import("./TimetableTab-C5_zFOvy.js"),__vite__mapDeps([22,1,23,2,14]),import.meta.url)),as=S.lazy(()=>C(()=>import("./CalendarTab-D1pXTy8g.js"),__vite__mapDeps([24,1,2]),import.meta.url)),ls=S.lazy(()=>C(()=>import("./ExamsTab-c-L1Uwzg.js"),__vite__mapDeps([25,1,2]),import.meta.url)),xs=()=>{const i=De(),[a,d]=wt(),[n,x]=t.useState(!0),p=a.get("tab")||"home",c=a.get("group")||"OVERVIEW",[l,g]=t.useState(c),[r,m]=t.useState(p),[b,E]=t.useState("GENERAL"),[N,$]=t.useState(null),[h,R]=t.useState([]),[I,D]=t.useState([]),[z,T]=t.useState([]),[L,o]=t.useState([]),[j,_]=t.useState(null),[v,Q]=t.useState({fees:!0,assessments:!0}),[K,Y]=t.useState(""),[w,Le]=t.useState({results:1,ai:5,exams:0,assessments:0,timetable:0,calendar:0}),[Oe,le]=t.useState(!1),[re,Ge]=t.useState({title:"",message:""}),[be,Ve]=t.useState(""),[Be,pe]=t.useState(!1),[$e,oe]=t.useState(!1),[He,ge]=t.useState(""),[We,rs]=t.useState(!1),[ne,ie]=t.useState(!1),[de,Je]=t.useState("PUBLIC"),[O,fe]=t.useState(""),[G,ce]=t.useState({name:"",regNo:"",rollNo:"",dob:"",gender:"Male",fatherName:"",motherName:"",photoUrl:""}),[Qe,q]=t.useState(!1),[je,Ne]=t.useState(null),[Ke,ve]=t.useState(!1),[Ye,ke]=t.useState(!1),[we,Z]=t.useState(""),[os,qe]=t.useState(null),[U,Se]=t.useState(null),[ye,Ce]=t.useState([]),[Ze,X]=t.useState(!1),[Ee,Te]=t.useState(0);t.useEffect(()=>{d({group:l,tab:r})},[l,r]),t.useEffect(()=>{A(),f.runAutoMaintenance().then(s=>{s&&console.log("System optimized automatically.")}),Xe()},[]);const Xe=async()=>{const s=await f.getNotifications("ADMIN_ID","ADMIN");Ce(s),Te(s.filter(u=>!u.is_read).length)},et=async s=>{await f.markNotificationRead(s),Ce(u=>u.map(P=>P.id===s?{...P,is_read:!0}:P)),Te(u=>Math.max(0,u-1))};t.useEffect(()=>{const s=localStorage.getItem("student_draft");if(s)try{const u=JSON.parse(s);ce(u),u.classId&&fe(u.classId)}catch{}},[]),t.useEffect(()=>{if(ne&&de==="SINGLE"&&G.name){localStorage.setItem("student_draft",JSON.stringify({...G,classId:O})),ve(!0);const s=setTimeout(()=>ve(!1),2e3);return()=>clearTimeout(s)}},[G,O,ne]);const A=async()=>{x(!0);const[s,u]=await Promise.all([f.getSchoolConfig(),f.getGlobalSettings()]);if(!s){i("/login");return}if($(s),Q({fees:u.MODULE_FEES!=="FALSE",assessments:u.MODULE_ASSESSMENTS!=="FALSE"}),u.FEATURE_COSTS)try{const W=JSON.parse(u.FEATURE_COSTS);Le(W)}catch{}s.scheduledPublishDate&&ge(s.scheduledPublishDate.slice(0,16));const[P,V,me,ee]=await Promise.all([f.getClasses(),f.getAssessmentPrograms(),f.getFeeStructures(),f.getSchoolPendingAdmissions()]);R(P),D(V),o(me),T(ee),P.length>0&&Y(P[0].id),x(!1)},tt=async(s,u,P)=>{pe(!0),await f.createCampusPost(N.id,"Admin",u,"ADMIN","NOTICE",s,P),pe(!1),le(!1),Z("Notice Posted!"),setTimeout(()=>Z(""),2e3)},st=async()=>{oe(!1)},at=async s=>{s.preventDefault(),q(!0);const u=await f.createStudent(O,G);q(!1),u.success?(Z(`${G.name} Added!`),ce({name:"",regNo:"",rollNo:"",dob:"",gender:"Male",fatherName:"",motherName:"",photoUrl:""}),localStorage.removeItem("student_draft"),setTimeout(()=>Z(""),2e3),A()):alert(u.message)},lt=async()=>{if(!je)return alert("Please select a CSV file.");if(!O&&de!=="BULK")return alert("Please select a target class.");q(!0);const s=new FileReader;s.onload=async u=>{var Ae;const V=((Ae=u.target)==null?void 0:Ae.result).split(`
`),me=se(V[0]);let ee=0,W=0;for(let te=1;te<V.length;te++){if(!V[te].trim())continue;const nt=se(V[te]),k={};me.forEach((Re,it)=>{var ze;return k[Re.trim()]=(ze=nt[it])==null?void 0:ze.trim()});const Pe={name:k.Name,regNo:k.RegNo,rollNo:k.RollNo,gender:k.Gender,dob:k.DOB?_e(k.DOB):"2010-01-01",fatherName:k.FatherName,motherName:k.MotherName,phone:k.Phone,address:k.Address,password:k.DOB?_e(k.DOB).replace(/-/g,""):"123456"};Pe.name&&((await f.createStudent(O,Pe)).success?ee++:W++)}q(!1),ie(!1),Ne(null),alert(`Bulk Upload Complete.

✅ Success: ${ee}
❌ Failed: ${W}

(Failures are usually due to duplicate Register Numbers)`),A()},s.readAsText(je)},rt=()=>{},H=(s,u)=>{g(s),m(u),E("GENERAL")},ot=s=>{s==="billing"?(g("FINANCE"),m("billing")):s==="classes"?(g("CAMPUS"),m("classes")):s==="settings"?(g("SETTINGS"),m("settings")):s==="calendar"?(g("CAMPUS"),m("calendar")):s==="settings_academic"&&(g("SETTINGS"),m("settings"),E("ACADEMIC"))};return n?e.jsx(St,{}):N?e.jsx(Ht,{children:e.jsxs("div",{className:"pb-20 animate-fade-in-up relative",children:[e.jsx("div",{className:"fixed bottom-4 right-4 z-50 md:hidden",children:e.jsxs("button",{onClick:()=>X(!0),className:"bg-slate-900 text-white p-4 rounded-full shadow-lg border border-slate-700 relative",children:[e.jsx(xe,{className:"w-6 h-6"}),Ee>0&&e.jsx("span",{className:"absolute top-0 right-0 w-3 h-3 bg-red-500 rounded-full border-2 border-slate-900"})]})}),we&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"bg-slate-900/90 text-white px-6 py-4 rounded-xl shadow-2xl flex flex-col items-center animate-fade-in-up",children:[e.jsx(ue,{className:"w-10 h-10 text-emerald-500 mb-2"}),e.jsx("span",{className:"font-bold",children:we})]})}),e.jsx(Ot,{config:N,onNoticeClick:()=>le(!0)}),e.jsxs("div",{className:"flex bg-white dark:bg-slate-900 p-1 rounded-2xl mb-4 shadow-sm border border-slate-200 dark:border-slate-800 overflow-x-auto items-center",children:[e.jsx("div",{className:"mr-2 hidden md:block border-r border-slate-200 dark:border-slate-800 pr-2",children:e.jsxs("button",{onClick:()=>X(!0),className:"p-3 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 relative group",children:[e.jsx(xe,{className:"w-5 h-5 text-slate-500 group-hover:text-blue-600"}),Ee>0&&e.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full"})]})}),e.jsxs("button",{onClick:()=>H("OVERVIEW","home"),className:`flex-1 min-w-[100px] px-4 py-3 rounded-xl text-sm font-bold transition-all flex justify-center items-center gap-2 ${l==="OVERVIEW"?"bg-blue-600 text-white shadow-md":"text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[e.jsx(Mt,{className:"w-4 h-4"})," Overview"]}),e.jsxs("button",{onClick:()=>H("CAMPUS","classes"),className:`flex-1 min-w-[100px] px-4 py-3 rounded-xl text-sm font-bold transition-all flex justify-center items-center gap-2 ${l==="CAMPUS"?"bg-blue-600 text-white shadow-md":"text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[e.jsx(Ue,{className:"w-4 h-4"})," Campus"]}),e.jsxs("button",{onClick:()=>H("ACADEMIC","exams"),className:`flex-1 min-w-[100px] px-4 py-3 rounded-xl text-sm font-bold transition-all flex justify-center items-center gap-2 ${l==="ACADEMIC"?"bg-blue-600 text-white shadow-md":"text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[e.jsx(yt,{className:"w-4 h-4"})," Academics"]}),v.fees&&e.jsxs("button",{onClick:()=>H("FINANCE","fees"),className:`flex-1 min-w-[100px] px-4 py-3 rounded-xl text-sm font-bold transition-all flex justify-center items-center gap-2 ${l==="FINANCE"?"bg-blue-600 text-white shadow-md":"text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[e.jsx(Ct,{className:"w-4 h-4"})," Finance"]}),e.jsxs("button",{onClick:()=>H("SETTINGS","settings"),className:`flex-1 min-w-[100px] px-4 py-3 rounded-xl text-sm font-bold transition-all flex justify-center items-center gap-2 ${l==="SETTINGS"?"bg-blue-600 text-white shadow-md":"text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[e.jsx(Et,{className:"w-4 h-4"})," Settings"]})]}),l!=="OVERVIEW"&&l!=="SETTINGS"&&e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-4 px-1",children:[l==="CAMPUS"&&e.jsxs(e.Fragment,{children:[e.jsx(M,{id:"classes",active:r,onClick:m,icon:Tt,label:"Classes"}),e.jsx(M,{id:"timetable",active:r,onClick:m,icon:Dt,label:"Timetable",cost:w.timetable}),e.jsx(M,{id:"calendar",active:r,onClick:m,icon:At,label:"Calendar",cost:w.calendar}),e.jsx(M,{id:"promotion",active:r,onClick:m,icon:It,label:"Promotion"})]}),l==="ACADEMIC"&&e.jsxs(e.Fragment,{children:[e.jsx(M,{id:"exams",active:r,onClick:m,icon:Pt,label:"Exams",cost:w.exams}),v.assessments&&e.jsx(M,{id:"assessments",active:r,onClick:m,icon:Ut,label:"Assessments",cost:w.assessments}),e.jsx(M,{id:"reports",active:r,onClick:m,icon:Lt,label:"Reports"})]}),l==="FINANCE"&&e.jsxs(e.Fragment,{children:[e.jsx(M,{id:"fees",active:r,onClick:m,icon:Rt,label:"Fee Manager"}),e.jsx(M,{id:"billing",active:r,onClick:m,icon:zt,label:"Wallet & Credits"})]})]}),e.jsxs(t.Suspense,{fallback:e.jsx("div",{className:"flex justify-center py-20 text-slate-400 text-sm",children:"Loading Workspace..."}),children:[r==="home"&&e.jsx(Qt,{setActiveTab:ot,stats:j,classes:h,pendingAdmissions:z,onRefresh:A,setShowPublishModal:oe,setShowStudentEntryModal:ie,featureCosts:w,setShowResultUpload:ke}),r==="classes"&&e.jsx(Kt,{classes:h,onRefresh:A,onShowShare:s=>qe(s)}),r==="exams"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4 bg-slate-50 p-3 rounded-lg border border-slate-200",children:[e.jsx("span",{className:"text-sm font-bold text-slate-500",children:"Manage Exams For:"}),e.jsx(he,{value:K,onChange:s=>Y(s.target.value),className:"w-48 py-1 text-sm",children:h.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})]}),e.jsx(ls,{classId:K,featureCosts:w})]}),r==="timetable"&&e.jsx(ss,{classes:h,onRefresh:A,schoolName:N.schoolName,featureCosts:w}),r==="calendar"&&e.jsx(as,{featureCosts:w}),r==="reports"&&e.jsx(es,{}),r==="assessments"&&e.jsx(Yt,{assessments:I,classes:h,onRefresh:A,featureCosts:w}),r==="fees"&&e.jsx(qt,{feeStructures:L,classes:h,schoolConfig:N,onRefresh:A,onShowReceipt:Se}),r==="settings"&&e.jsx(Zt,{schoolConfig:N,onUpdate:$,initialSection:b}),r==="billing"&&e.jsx(Xt,{schoolConfig:N}),r==="promotion"&&e.jsx(ts,{classes:h,onRefresh:A})]}),Ze&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",onClick:()=>X(!1),children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-sm rounded-3xl p-6 shadow-2xl relative",onClick:s=>s.stopPropagation(),children:[e.jsxs("h3",{className:"font-bold text-lg mb-4 dark:text-white flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5 text-blue-500"})," System Alerts"]}),e.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto custom-scrollbar",children:ye.length>0?ye.map(s=>e.jsxs("div",{onClick:()=>!s.is_read&&et(s.id),className:`p-3 rounded-xl border transition-all cursor-pointer ${s.is_read?"bg-slate-50 dark:bg-slate-800 border-slate-100 dark:border-slate-700":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${s.type==="ALERT"||s.type==="WARNING"?"bg-red-100 text-red-600":s.type==="SUCCESS"?"bg-green-100 text-green-600":"bg-slate-200 text-slate-600"}`,children:s.type}),e.jsx("span",{className:"text-[10px] text-slate-400",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsx("h4",{className:"font-bold text-sm text-slate-800 dark:text-white",children:s.title}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-300 mt-1",children:s.message})]},s.id)):e.jsx("p",{className:"text-center text-slate-400 text-sm py-8",children:"No notifications."})}),e.jsx("button",{onClick:()=>X(!1),className:"w-full mt-4 py-3 bg-slate-100 dark:bg-slate-800 rounded-xl font-bold text-sm text-slate-600 dark:text-slate-300",children:"Close"})]})}),Oe&&e.jsx(Gt,{onClose:()=>le(!1),data:re,setData:Ge,scheduleTime:be,setScheduleTime:Ve,onSubmit:()=>tt(re.title,re.message,be),loading:Be}),$e&&e.jsx(Vt,{onClose:()=>oe(!1),date:He,setDate:ge,onSubmit:st,loading:We}),ne&&e.jsx(Bt,{onClose:()=>ie(!1),mode:de,setMode:Je,classId:O,setClassId:fe,classes:h,newStudent:G,setNewStudent:ce,onSubmit:at,onCsv:lt,setCsv:Ne,loading:Qe,saved:Ke,schoolId:N.id}),Ye&&e.jsx($t,{onClose:()=>ke(!1),onSuccess:A}),U&&e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/80 p-4",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl w-full max-w-sm relative",children:[e.jsx("button",{onClick:()=>Se(null),className:"absolute top-2 right-2 text-slate-400 hover:text-slate-600 font-bold",children:"✕"}),e.jsx("h3",{className:"font-bold text-center border-b pb-2 mb-4 text-slate-900",children:"FEE RECEIPT"}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h4",{className:"font-bold text-lg text-slate-800",children:U.schoolName}),e.jsx("p",{className:"text-xs text-gray-500",children:U.place})]}),e.jsxs("div",{className:"space-y-2 text-sm text-slate-700",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Name:"}),e.jsx("span",{className:"font-bold",children:U.studentName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Class:"}),e.jsx("span",{children:U.className})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Fee:"}),e.jsx("span",{children:U.feeName})]}),e.jsxs("div",{className:"border-t my-2 pt-2 flex justify-between font-bold text-lg text-slate-900",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["₹",U.amount||U.paidAmount]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-6",children:[e.jsxs("button",{onClick:rt,className:"flex-1 bg-[#25D366] hover:bg-[#20bd5a] text-white py-2.5 rounded-lg text-xs font-bold flex items-center justify-center gap-2 shadow-lg shadow-green-500/20",children:[e.jsx(_t,{className:"w-4 h-4"})," WhatsApp"]}),e.jsx("button",{onClick:()=>window.print(),className:"flex-1 bg-slate-900 hover:bg-slate-800 text-white py-2.5 rounded-lg text-xs font-bold no-print",children:"Print"})]})]})}),e.jsx(Jt,{context:r})]})}):null},M=({id:i,active:a,onClick:d,icon:n,label:x,cost:p})=>e.jsxs("button",{onClick:()=>d(i),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all flex items-center gap-2 whitespace-nowrap ${a===i?"bg-slate-200 dark:bg-slate-800 text-slate-900 dark:text-white":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(n,{className:"w-4 h-4"})," ",x,p>0&&e.jsxs("span",{className:"ml-1 text-[9px] bg-yellow-100 text-yellow-700 px-1.5 rounded",children:[p," CR"]})]});export{xs as default};
